<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julian Maitra">
<meta name="dcterms.date" content="2025-03-07">

<title>Exercices Méthodes II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul class="collapse">
  <li><a href="#installer-les-logiciels-r-et-rstudio" id="toc-installer-les-logiciels-r-et-rstudio" class="nav-link active" data-scroll-target="#installer-les-logiciels-r-et-rstudio">Installer les logiciels R et RStudio</a></li>
  <li><a href="#linterface-rstudio" id="toc-linterface-rstudio" class="nav-link" data-scroll-target="#linterface-rstudio">L’interface RStudio</a></li>
  <li><a href="#exécuter-un-script-r" id="toc-exécuter-un-script-r" class="nav-link" data-scroll-target="#exécuter-un-script-r">Exécuter un script R</a></li>
  <li><a href="#commenter-votre-code-avec-un" id="toc-commenter-votre-code-avec-un" class="nav-link" data-scroll-target="#commenter-votre-code-avec-un">Commenter votre code avec un <code>#</code></a></li>
  <li><a href="#lopérateur-daffectation--" id="toc-lopérateur-daffectation--" class="nav-link" data-scroll-target="#lopérateur-daffectation--">L’opérateur d’affectation <code>&lt;-</code></a></li>
  <li><a href="#variables-à-élément-unique" id="toc-variables-à-élément-unique" class="nav-link" data-scroll-target="#variables-à-élément-unique">Variables à élément unique</a></li>
  <li><a href="#variables-à-plusieurs-éléments-vecteurs" id="toc-variables-à-plusieurs-éléments-vecteurs" class="nav-link" data-scroll-target="#variables-à-plusieurs-éléments-vecteurs">Variables à plusieurs éléments : vecteurs</a></li>
  <li><a href="#session-2-commandes-de-base-ii" id="toc-session-2-commandes-de-base-ii" class="nav-link" data-scroll-target="#session-2-commandes-de-base-ii">Session 2 | Commandes de base II</a>
  <ul class="collapse">
  <li><a href="#répétition-rapide-de-session-1" id="toc-répétition-rapide-de-session-1" class="nav-link" data-scroll-target="#répétition-rapide-de-session-1">Répétition rapide de session 1</a></li>
  <li><a href="#données-en-forme-de-tableau" id="toc-données-en-forme-de-tableau" class="nav-link" data-scroll-target="#données-en-forme-de-tableau">Données en forme de tableau</a></li>
  <li><a href="#les-matrices" id="toc-les-matrices" class="nav-link" data-scroll-target="#les-matrices">Les matrices</a></li>
  <li><a href="#les-data-frames" id="toc-les-data-frames" class="nav-link" data-scroll-target="#les-data-frames">Les data frames</a></li>
  <li><a href="#fonctions-statistiques-de-base" id="toc-fonctions-statistiques-de-base" class="nav-link" data-scroll-target="#fonctions-statistiques-de-base">Fonctions statistiques de base</a></li>
  <li><a href="#les-facteurs" id="toc-les-facteurs" class="nav-link" data-scroll-target="#les-facteurs">Les facteurs</a></li>
  <li><a href="#le-répértoire-de-travail" id="toc-le-répértoire-de-travail" class="nav-link" data-scroll-target="#le-répértoire-de-travail">Le répértoire de travail</a></li>
  </ul></li>
  <li><a href="#session-3-problem-set-1" id="toc-session-3-problem-set-1" class="nav-link" data-scroll-target="#session-3-problem-set-1">Session 3 (Problem Set 1)</a></li>
  <li><a href="#session-4-paquets-r-jeux-de-données-intégrés-visualisations-i" id="toc-session-4-paquets-r-jeux-de-données-intégrés-visualisations-i" class="nav-link" data-scroll-target="#session-4-paquets-r-jeux-de-données-intégrés-visualisations-i">Session 4 | Paquets R, jeux de données intégrés, visualisations I</a>
  <ul class="collapse">
  <li><a href="#les-paquets-r" id="toc-les-paquets-r" class="nav-link" data-scroll-target="#les-paquets-r">Les paquets R</a></li>
  <li><a href="#les-jeux-de-données-intégrés" id="toc-les-jeux-de-données-intégrés" class="nav-link" data-scroll-target="#les-jeux-de-données-intégrés">Les jeux de données intégrés</a></li>
  <li><a href="#introduction-aux-visualisations-avec-ggplot2" id="toc-introduction-aux-visualisations-avec-ggplot2" class="nav-link" data-scroll-target="#introduction-aux-visualisations-avec-ggplot2">Introduction aux visualisations avec <code>ggplot2</code></a></li>
  </ul></li>
  <li><a href="#session-5-visualisations-ii" id="toc-session-5-visualisations-ii" class="nav-link" data-scroll-target="#session-5-visualisations-ii">Session 5 | Visualisations II</a>
  <ul class="collapse">
  <li><a href="#les-nuages-de-points-angl.-scatter-plots" id="toc-les-nuages-de-points-angl.-scatter-plots" class="nav-link" data-scroll-target="#les-nuages-de-points-angl.-scatter-plots">1. Les nuages de points (angl. <em>scatter plots</em>)</a></li>
  <li><a href="#les-diagrammes-à-barres" id="toc-les-diagrammes-à-barres" class="nav-link" data-scroll-target="#les-diagrammes-à-barres">2. Les diagrammes à barres</a></li>
  <li><a href="#les-histogrammes" id="toc-les-histogrammes" class="nav-link" data-scroll-target="#les-histogrammes">3. Les histogrammes</a></li>
  <li><a href="#les-boîtes-à-moustaches-angl.-boxplots" id="toc-les-boîtes-à-moustaches-angl.-boxplots" class="nav-link" data-scroll-target="#les-boîtes-à-moustaches-angl.-boxplots">4. Les boîtes à moustaches (angl. <em>boxplots</em>)</a></li>
  </ul></li>
  <li><a href="#session-6-problem-set-2" id="toc-session-6-problem-set-2" class="nav-link" data-scroll-target="#session-6-problem-set-2">Session 6 (Problem Set 2)</a></li>
  <li><a href="#session-7-manipuler-les-données-i" id="toc-session-7-manipuler-les-données-i" class="nav-link" data-scroll-target="#session-7-manipuler-les-données-i">Session 7 | Manipuler les données I</a>
  <ul class="collapse">
  <li><a href="#lire-des-données-auf-format-csv-dans-rstudio" id="toc-lire-des-données-auf-format-csv-dans-rstudio" class="nav-link" data-scroll-target="#lire-des-données-auf-format-csv-dans-rstudio">Lire des données auf format CSV dans RStudio</a></li>
  <li><a href="#explorez-votre-jeu-de-données-importé" id="toc-explorez-votre-jeu-de-données-importé" class="nav-link" data-scroll-target="#explorez-votre-jeu-de-données-importé">Explorez votre jeu de données importé</a></li>
  <li><a href="#la-transformation-du-type-de-variable" id="toc-la-transformation-du-type-de-variable" class="nav-link" data-scroll-target="#la-transformation-du-type-de-variable">La transformation du type de variable</a></li>
  <li><a href="#lopérateur" id="toc-lopérateur" class="nav-link" data-scroll-target="#lopérateur">L’opérateur <code>%&gt;%</code></a></li>
  <li><a href="#manipuler-les-données-avec-dplyr" id="toc-manipuler-les-données-avec-dplyr" class="nav-link" data-scroll-target="#manipuler-les-données-avec-dplyr">Manipuler les données avec <code>dplyr</code></a></li>
  <li><a href="#manipulation-de-colonnes-selectet-mutate" id="toc-manipulation-de-colonnes-selectet-mutate" class="nav-link" data-scroll-target="#manipulation-de-colonnes-selectet-mutate">Manipulation de colonnes : <code>select()</code>et <code>mutate()</code></a></li>
  <li><a href="#manipulation-de-lignes-avec-filter-et-arrange" id="toc-manipulation-de-lignes-avec-filter-et-arrange" class="nav-link" data-scroll-target="#manipulation-de-lignes-avec-filter-et-arrange">Manipulation de lignes avec <code>filter()</code> et <code>arrange()</code></a></li>
  <li><a href="#résumer-compter-et-regrouper-avec-summarize-count-et-group_by" id="toc-résumer-compter-et-regrouper-avec-summarize-count-et-group_by" class="nav-link" data-scroll-target="#résumer-compter-et-regrouper-avec-summarize-count-et-group_by">Résumer, compter et regrouper avec <code>summarize()</code>, <code>count()</code> et <code>group_by()</code></a></li>
  </ul></li>
  <li><a href="#session-8-manipuler-les-données-ii" id="toc-session-8-manipuler-les-données-ii" class="nav-link" data-scroll-target="#session-8-manipuler-les-données-ii">Session 8 | Manipuler les données II</a>
  <ul class="collapse">
  <li><a href="#exercices-avec-solutions" id="toc-exercices-avec-solutions" class="nav-link" data-scroll-target="#exercices-avec-solutions">Exercices avec solutions</a></li>
  </ul></li>
  <li><a href="#session-9-problem-set-3" id="toc-session-9-problem-set-3" class="nav-link" data-scroll-target="#session-9-problem-set-3">Session 9 (Problem Set 3)</a></li>
  <li><a href="#session-10-statistiques-descriptives" id="toc-session-10-statistiques-descriptives" class="nav-link" data-scroll-target="#session-10-statistiques-descriptives">Session 10 | Statistiques descriptives</a>
  <ul class="collapse">
  <li><a href="#analyse-des-réponses-au-questionnaire-1ère-partie-stats-déscriptives" id="toc-analyse-des-réponses-au-questionnaire-1ère-partie-stats-déscriptives" class="nav-link" data-scroll-target="#analyse-des-réponses-au-questionnaire-1ère-partie-stats-déscriptives">Analyse des réponses au questionnaire, 1ère partie (stats déscriptives)</a></li>
  <li><a href="#la-fonction-write.csv" id="toc-la-fonction-write.csv" class="nav-link" data-scroll-target="#la-fonction-write.csv">La fonction <code>write.csv()</code></a></li>
  </ul></li>
  <li><a href="#session-11-statistiques-inférentielles-i" id="toc-session-11-statistiques-inférentielles-i" class="nav-link" data-scroll-target="#session-11-statistiques-inférentielles-i">Session 11 | Statistiques inférentielles I</a>
  <ul class="collapse">
  <li><a href="#cest-quoi-la-statistique-inférentielle" id="toc-cest-quoi-la-statistique-inférentielle" class="nav-link" data-scroll-target="#cest-quoi-la-statistique-inférentielle">C’est quoi la statistique inférentielle ?</a></li>
  <li><a href="#le-test-t" id="toc-le-test-t" class="nav-link" data-scroll-target="#le-test-t">le test t</a></li>
  </ul></li>
  <li><a href="#session-12-statistiques-inférentielles-ii" id="toc-session-12-statistiques-inférentielles-ii" class="nav-link" data-scroll-target="#session-12-statistiques-inférentielles-ii">Session 12 | Statistiques inférentielles II</a>
  <ul class="collapse">
  <li><a href="#lanalyse-de-la-variance-anova" id="toc-lanalyse-de-la-variance-anova" class="nav-link" data-scroll-target="#lanalyse-de-la-variance-anova">L’analyse de la variance (ANOVA)</a></li>
  <li><a href="#la-régression-linéaire-avec-lm" id="toc-la-régression-linéaire-avec-lm" class="nav-link" data-scroll-target="#la-régression-linéaire-avec-lm">La régression linéaire avec <code>lm()</code></a></li>
  </ul></li>
  <li><a href="#session-13-problem-set-4" id="toc-session-13-problem-set-4" class="nav-link" data-scroll-target="#session-13-problem-set-4">Session 13 (Problem Set 4)</a></li>
  <li><a href="#session-14-en-auto-apprentissage" id="toc-session-14-en-auto-apprentissage" class="nav-link" data-scroll-target="#session-14-en-auto-apprentissage">Session 14 (en auto-apprentissage)</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exercices Méthodes II</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Julian Maitra <a href="mailto:julian.maitra@unifr.ch" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-3989-5158" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://www.unifr.ch/home/en/">
            Université de Fribourg
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 7, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p></p><div style="page-break-after: always;"></div> # Session 1 | Introduction<p></p>
<p><strong>Sujet : Bienvenue, pourquoi R ? et commandes de base I</strong></p>
<p>Bienvenue dans la première leçon du cours <strong>Exercices Méthode II</strong> du Bachelor en sciences de la communication à l’Université de Fribourg !</p>
<p>Sur cette page Github, je vous guiderai dans vos premiers pas avec R.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>R</strong> est un langage de programmation et un environnement logiciel pour l’analyse statistique, la visualisation de données et le calcul scientifique. Il est largement utilisé par les statisticiens, les chercheurs en sciences des données et de plus en plus en sciences sociales y compris en sciences de la communication.</p>
<p>R est idéal pour la manipulation, l’analyse, la modélisation et la visualisation de données. C’est un logiciel libre et open source, ce qui signifie qu’il est gratuit à utiliser, modifier et distribuer. Il dispose d’une grande communauté d’utilisateurs et de développeurs qui contribuent à son développement et à sa maintenance.</p>
</div>
</div>
<section id="installer-les-logiciels-r-et-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="installer-les-logiciels-r-et-rstudio">Installer les logiciels R et RStudio</h2>
<p>Pour utiliser R sur votre ordinateur portable, vous devez d’abord installer les deux logiciels suivants :</p>
<ol type="1">
<li>le langage de programmation <a href="https://cran.r-project.org">R</a></li>
<li>l’interface <a href="https://posit.co/download/rstudio-desktop/">RStudio</a></li>
</ol>
<p>Notez que nous n’écrirons le code R que dans RStudio, l’interface. Le langage de programmation R doit d’abord être installé, mais il fonctionnera ensuite en arrière-plan. Il n’est donc pas nécessaire d’ouvrir R directement sur votre ordinateur par la suite.</p>
</section>
<section id="linterface-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="linterface-rstudio">L’interface RStudio</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://docs.posit.co/ide/user/ide/guide/ui/images/rstudio-panes-labeled.jpeg" class="img-fluid figure-img"></p>
<figcaption>Volets RStudio <a href="https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html">Source : posit.co</a></figcaption>
</figure>
</div>
<p>Dans RStudio, il existe quatre volets différents :</p>
<ol type="1">
<li>Le volet <strong>source</strong></li>
<li>Le volet <strong>console</strong></li>
<li>Le volet <strong>environnement</strong></li>
<li>Le volet <strong>output</strong></li>
</ol>
</section>
<section id="exécuter-un-script-r" class="level2">
<h2 class="anchored" data-anchor-id="exécuter-un-script-r">Exécuter un script R</h2>
<p>Nous travaillons principalement dans le volet <strong>source</strong>, c’est là que nous écrivons notre code.</p>
<p>Vous pouvez ouvrir le volet source en créant un nouveau <strong>R script</strong> (cliquez sur le signe plus vert dans le coin supérieur gauche).</p>
<p>Vous pouvez réécrire ou copier-coller le calcul simple suivant et l’insérer dans votre script :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Une fois que nous avons écrit du code R dans le script, nous pouvons <strong>l’exécuter</strong> en le sélectionnant et en cliquant sur le bouton d’exécution situé au-dessus du volet source (le bouton d’exécution avec la flèche verte à qui montre à droite).</p>
<p>C’est alors dans le volet de la <strong>console</strong> où le résultat va être affiché :</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<p>Notez que le nombre entre crochets indique la ligne du résultat. Ici, il s’agit de 1 car il n’y a qu’une seule ligne.</p>
<p>Voici quelques autres calculs simples, suivi de leurs résultats :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">99</span> <span class="sc">-</span> <span class="dv">98</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">100</span><span class="sc">/</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">^</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1024</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour exécuter le code R plus rapidement, vous pouvez placer votre curseur sur une ligne de code à exécuter et utiliser les raccourcis clavier suivants :</p>
<ul>
<li><p>Sur <strong>Windows</strong> : <kbd>CTRL</kbd> + <kbd>Enter</kbd></p></li>
<li><p>Sur <strong>MacOS</strong> : <kbd>Command</kbd> + <kbd>Enter</kbd></p></li>
</ul>
</div>
</div>
</section>
<section id="commenter-votre-code-avec-un" class="level2">
<h2 class="anchored" data-anchor-id="commenter-votre-code-avec-un">Commenter votre code avec un <code>#</code></h2>
<p>C’est une bonne pratique de <strong>commenter</strong> son code R. Les commentaires expliquent ce que le code fait et facilite l’utilisation ultérieure et aussi le partage de code entre personnes (qui ne savent peut-être pas ce que vous vouliez faire avec votre code).</p>
<p>On commente en ajoutant un symbole <strong><code>#</code></strong> au début de la ligne de code, comme ceci :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ceci est un commentaire, et R l'ignorera lors de</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># l'exécution du script.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lopérateur-daffectation--" class="level2">
<h2 class="anchored" data-anchor-id="lopérateur-daffectation--">L’opérateur d’affectation <code>&lt;-</code></h2>
<p>L’opérateur d’affectation <strong><code>&lt;-</code></strong> est un opérateur clé de la programmation R. Il permet d’attribuer des valeurs aux variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Par exemple, nous pouvons attribuer la valeur 5 à la</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variable x :</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si vous exécutez ce code, une nouvelle variable, <code>x</code>, sera créée dans le volet <strong>environnement</strong> en haut à droite de RStudio.</p>
<div style="page-break-after: always;"></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>En général, la programmation R parle aussi d’<strong>objets</strong>, ou de <strong>structures de données</strong>, que vous pouvez créer. C’est pourquoi R est également appelé <strong>langage de programmation orienté objet</strong>. Les variables à un élément sont des objets très simples. Au cours de ce cours, nous découvrirons d’autres types d’objets.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez créer l’opérateur d’affectation <code>&lt;-</code> avec les raccourcis clavier suivants :</p>
<ul>
<li><p>Sur <strong>Windows</strong> : <kbd>Alt</kbd> + <kbd>-</kbd></p></li>
<li><p>Sur <strong>MacOS</strong> : <kbd>Option</kbd> + <kbd>-</kbd></p></li>
</ul>
</div>
</div>
</section>
<section id="variables-à-élément-unique" class="level2">
<h2 class="anchored" data-anchor-id="variables-à-élément-unique">Variables à élément unique</h2>
<p>Vous pouvez <strong>imprimer</strong> (afficher) la valeur d’une variable que vous avez créée, telle que <code>x</code>, en tapant le nom de la variable et en l’exécutant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Veillez toujours à exécuter votre code pour créer des variables avant de les utiliser pour d’autres opérations. Si vous oubliez de créer les variables en premier, vous obtiendrez une erreur comme résultat.</li>
</ul>
</div>
</div>
<p>Par exemple, essayez d’exécuter ce qui suit : <code>y + z</code></p>
<p>Pourquoi cela crée une erreur ? Réponse : les variables <code>y</code> et <code>z</code> n’on pas encore été définies !</p>
<p>Pour éliminer l’erreur, nous devons donc définir <code>y</code> et <code>z</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Essayons encore une fois :</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>y <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<p>Maintenant ça marche ! 😀</p>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Sachez aussi que si vous attribuez une nouvelle valeur à une variable existante, l’ancienne valeur sera écrasée !</li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notez que si vous exécutez toutes les lignes de code</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># suivantes, la variable x se voit attribuer la dernière</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># valeur exécutée : 4. Les valeurs 5 et 100 sont ecrasées</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># lors de l'exécution du code.</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<section id="les-différents-types-de-variable-numériques-textuelles-et-logique" class="level3">
<h3 class="anchored" data-anchor-id="les-différents-types-de-variable-numériques-textuelles-et-logique">Les différents types de variable : numériques, textuelles et logique</h3>
<p>Jusqu’à présent, nous avons créé des variables de <strong>type numérique</strong>, telles que <code>x</code> (valeur = 5).</p>
<p>Cependant, ce n’est pas le seul type de variable dans R.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans R, il existe différents types de variables :</p>
<ul>
<li><p>les variables <strong>numériques</strong></p></li>
<li><p>les variables <strong>textuelles</strong>, également appelées <em>character strings</em> (chaînes de caractères).</p></li>
<li><p>les variables <strong>logiques</strong> avec les valeurs TRUE et FALSE (VRAI et FAUX)</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regardons quelques exemples avec du code ! (faut tout</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># exécuter !)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># variables numériques :</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">77</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">21</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>Insta_likes <span class="ot">&lt;-</span> <span class="dv">1539</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># variables textuelles (toujours ajouter des guillemets !)</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="st">"chien"</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="st">"chat"</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>Comm_TikTok <span class="ot">&lt;-</span> <span class="st">"wsh"</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>Moliere <span class="ot">&lt;-</span> <span class="st">"il n’est rien d’égal au tabac : c’est la passion des honnêtes gens"</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># variables logiques :</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Les variables logiques peuvent être utiles quand vous travaillez avec des <strong>catégories binaires</strong>.</p>
<p>Par exemple : il est souvent utile de classer les personnes ayant répondu à un questionnaire en catégories binaires, telles que :</p>
<ul>
<li><p>homme/femme</p></li>
<li><p>mineur/majeur</p></li>
<li><p>conservateur/libéral</p></li>
<li><p>etc.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si Marc était mineur et Claire majeure, nous les</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># classerions comme suit :</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>Marc <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>Claire <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Dans cet exemple, la variable logique indique si une</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># personne est majeure (TRUE) ou pas (FALSE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="variables-à-plusieurs-éléments-vecteurs" class="level2">
<h2 class="anchored" data-anchor-id="variables-à-plusieurs-éléments-vecteurs">Variables à plusieurs éléments : vecteurs</h2>
<p>Les <strong>vecteurs</strong> constituent un autre type de variable (ou type d’objet) essentiel dans la programmation R. Il s’agit de variables comportant <strong>plusieurs</strong> éléments.</p>
<p>Vous pouvez créer des vecteurs avec l’opérateur d’affectation <code>&lt;-</code> et la <strong>fonction de concatenation</strong> <code>c()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voici quelques exemples avec du code ! (faut tout</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># exécuter !)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># un vecteur numérique (notez qu'il faut toujours séparer</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># les valeurs avec des virgules)</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vous pouvez afficher la valeur de <code>v1</code> en tappant son nom et l’exécutant :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>v1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>En R, une <strong>fonction</strong> est un morceau de code conçu pour effectuer une tâche spécifique, souvent avec des paramètres variables. Ces paramètres d’entrée sont également appelés les <strong>arguments</strong> de la fonction.</p>
</div>
</div>
<p>Prenons l’exemple de la fonction <code>c()</code> qui crée des vecteurs :</p>
<ul>
<li><p>les arguments de cette fonction doivent être insérés entre les crochets sous la forme de valeurs séparées par des virgules (pour chaque élément du vecteur).</p></li>
<li><p>Un vecteur à deux éléments : <code>c(2, 4)</code></p></li>
<li><p>Un vecteur à trois éléments : <code>c(3, 6, 9)</code></p></li>
</ul>
<p>Maintenant, regardons encores quelques exemples de vecteurs de <strong>différents types</strong> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vecteurs numériques</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">100</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">88</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>likes_comments_shares <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">513</span>, <span class="dv">34</span>, <span class="dv">102</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># vecteurs textuels (toujours ajouter des guillemets pour</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># chaque élément !)</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>animaux <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"chat"</span>, <span class="st">"chien"</span>, <span class="st">"cheval"</span>, <span class="st">"chenille"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>Comm_Insta <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"trop cool"</span>, <span class="st">"wsh"</span>, <span class="st">"c'est quoi ?"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>humains <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Claire"</span>, <span class="st">"Clarissa"</span>, <span class="st">"Theresa"</span>, <span class="st">"Marc"</span>, <span class="st">"Alma"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co"># vecteurs logiques :</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>femme <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Dans R, on ne peut généralement pas mélanger les valeurs numériques, textuelles et logiques dans le même vecteur !</p>
</div>
</div>
</div>
<section id="devoir-pour-session-2" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-2">Devoir pour Session 2</h3>
<ul>
<li><p>Si ce n’est pas encore fait : Installez R et RStudio sur votre ordinateur.</p></li>
<li><p>Lisez ensuite encore une fois ce script et exécutez toutes les sections de code sur votre ordinateur.</p></li>
<li><p>Essayez de résoudre vous-même les éventuels messages d’erreur en adaptant le code.</p></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="session-2-commandes-de-base-ii" class="level1">
<h1>Session 2 | Commandes de base II</h1>
<section id="répétition-rapide-de-session-1" class="level2">
<h2 class="anchored" data-anchor-id="répétition-rapide-de-session-1">Répétition rapide de session 1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script de répétition</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Avez-vous compris comment R traite les différents types</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># de variables ?  Quelle est la différence entre a et b ?</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="st">"5"</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comment afficher a et b ?</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative : avec la fonction print(), qui augmente la</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># compréhension ultérieure du code</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pourquoi le code suivant produit-il une erreur ?</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>a <span class="sc">*</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in a * b: non-numeric argument to binary operator</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le code suivant corrige à nouveau l'erreur, pourquoi ?</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>a <span class="sc">*</span> b</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Vécteurs</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>v1</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Vous pouvez créez des nombres succesifs avec un colon :</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>v2</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"salut"</span>, <span class="st">"le"</span>, <span class="st">"pote"</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez utiliser la fonction <code>class()</code> pour vérifier le type d’un objet, p.&nbsp;ex. (exécutez vous-même !) :</p>
<ul>
<li><p><code>class(c(1,2,3))</code></p></li>
<li><p><code>class(c("Hello", "World"))</code></p></li>
<li><p><code>class(c(TRUE,TRUE,FALSE))</code></p></li>
</ul>
</div>
</div>
</section>
<section id="données-en-forme-de-tableau" class="level2">
<h2 class="anchored" data-anchor-id="données-en-forme-de-tableau">Données en forme de tableau</h2>
<p>Les données sous forme de tableaux, avec des lignes et des colonnes, sont au cœur des méthodes quantitatives dans les sciences de la communication.</p>
<p>Dans R, il existe plusieurs structures de données en format de tableau, notamment :</p>
<ul>
<li><p>Les <strong>matrices</strong></p></li>
<li><p>Les <strong>data frames</strong></p></li>
<li><p>D’autres types, tels que les <strong>tibbles</strong>, qui sont en fait des data frames adaptés à des paquets R spécifiques (nous traiterons ce sujet plus tard dans le cours).</p></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Il est de convention qu’un tableau de données présente les <strong>unités statistiques</strong> par <strong>ligne</strong> (angl. <em>row</em>).</li>
<li>Les <strong>variables</strong> ou caractéristiques de ces unités statistiques sont indiquées en conséquence par <strong>colonnes</strong> (angl. <em>column</em>).</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Selon le type de données, surtout en recherche empirique en sciences sociales dont font partie les sciences de la communication, les unités statistiques peuvent être :</p>
<ul>
<li><p>des <strong>participants</strong> à un questionnaire ou à une expérimentation</p></li>
<li><p>des <strong>documents</strong> (p.&nbsp;ex. articles de presse, posts sur réseaux sociaux)</p></li>
<li><p>des <strong>observations/ cas</strong> (p.&nbsp;ex. des profils sur réseaux sociaux, des entreprises médiatiques)</p></li>
</ul>
<p>Dans ces jeux de données, par convention, chaque ligne représente une unité statistique (ou un participant, un document, une observation), tandis que chaque colonne représente les variables qui ont été collectées pour chaque unité statistique.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>La taille d’un jeu de données est indiquée par <strong>le nombre d’unités statistiques n</strong>.</p>
<ul>
<li>Par exemple, si 49 personnes ont répondu à un questionnaire, nous parlons donc d’un échantillon de n = 49 participants.</li>
</ul>
</div>
</div>
<p>Voici un modèle de la manière dont on devrait structurer les réponses à un questionnaire avec n participants et X questions :</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>          id  question_A  question_B  question_C etc.  question_X
1 personne_1 réponse_a_A réponse_a_B réponse_a_C  ... réponse_a_X
2 personne_2 réponse_a_A réponse_a_B réponse_a_C  ... réponse_a_X
3 personne_3 réponse_a_A réponse_a_B réponse_a_C  ... réponse_a_X
4       etc.         ...         ...         ...  ...         ...
5 personne_n réponse_a_A réponse_a_B réponse_a_C  ... réponse_a_X</code></pre>
</div>
</div>
<p>Dans ce modèle, l’unité statistique de ce jeu de données est la personne qui a répondue au questionnaire (un participant). Chaque ligne correspond donc à une personne différente. Les variables, en revanche, sont les différentes questions qui ont été enregistrées pour chaque participant.</p>
<p>Regardons maintenant quelques objets R sous forme de tableau :</p>
</section>
<section id="les-matrices" class="level2">
<h2 class="anchored" data-anchor-id="les-matrices">Les matrices</h2>
<p>Les <strong>matrices</strong> sont des objets plutôt mathématique. Elles doivent notamment être composé de données de même type, c’est à dire numérique, textuel, logique, etc.</p>
<p>On peut créer des objets matriciels avec la commande <strong><code>matrix()</code></strong>, avec les arguments suivants :</p>
<ul>
<li><p>un vecteur de valeurs (p.&nbsp;ex. <code>c(1,2,3,4,5,6)</code>)</p></li>
<li><p>le nombre de lignes (<code>nrow=</code>),</p></li>
<li><p>le nombre de colonnes (<code>ncol=</code>) et</p></li>
<li><p>la <em>direction</em> de remplissage des valeurs, c’est-à-dire par lignes (<code>byrow = TRUE</code>) ou par colonnes (<code>byrow = FALSE</code>).</p></li>
</ul>
<p>Créons quelques matrices exemplaires avec du code R maintenant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m1)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m2)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelle est la différence entre m1 et m2 au niveau du code</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si vous ne spécifier pas tous les arguments d’une fonction, R va tenter d’utiliser des arguments par défauts.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut p. ex. créer une matrice sans spécifier tout les</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># arguments de la fonction matrix()</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10</code></pre>
</div>
</div>
<p>Vous pouvez extraire des éléments individuels ou des parties d’une matrice avec des <strong>parenthèses carrées <code>[]</code></strong> en spécifiant les lignes et les colonnes concernées.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créons d'abord un matrice m4 avec 100 éléments :</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">10</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    1    2    3    4    5    6    7    8    9    10
 [2,]   11   12   13   14   15   16   17   18   19    20
 [3,]   21   22   23   24   25   26   27   28   29    30
 [4,]   31   32   33   34   35   36   37   38   39    40
 [5,]   41   42   43   44   45   46   47   48   49    50
 [6,]   51   52   53   54   55   56   57   58   59    60
 [7,]   61   62   63   64   65   66   67   68   69    70
 [8,]   71   72   73   74   75   76   77   78   79    80
 [9,]   81   82   83   84   85   86   87   88   89    90
[10,]   91   92   93   94   95   96   97   98   99   100</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire le deuxième élément de la troisième ligne :</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>m4[<span class="dv">3</span>, <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire les cinq premiers éléments de la dixième ligne :</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>m4[<span class="dv">10</span>, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 91 92 93 94 95</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire tous les éléments de la première ligne :</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>m4[<span class="dv">1</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire tous les éléments de la troisième colonne :</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>m4[, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3 13 23 33 43 53 63 73 83 93</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire la moitié supérieure de la matrice :</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>m4[<span class="fu">c</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]   51   52   53   54   55   56   57   58   59    60
[2,]   61   62   63   64   65   66   67   68   69    70
[3,]   71   72   73   74   75   76   77   78   79    80
[4,]   81   82   83   84   85   86   87   88   89    90
[5,]   91   92   93   94   95   96   97   98   99   100</code></pre>
</div>
</div>
</section>
<section id="les-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="les-data-frames">Les data frames</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les <strong>data frames</strong> (français : <em>cadre de données</em>) sont le type de donnée en forme tableau le plus commun dans R. Cette structure de donnée peut notamment être composé de données de différents types (numérique, textuel, logique).</p>
</div>
</div>
<p>Créons un data frame avec la fonction <code>data.frame()</code> maintenant. Nous appelons ce type d’objets désormais un <strong>jeu de données</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/en/2/24/Ice_Age_Dawn_of_the_Dinosaurs_theatrical_poster.jpg" class="img-fluid figure-img"></p>
<figcaption>Le film Âge de glace <a href="https://en.wikipedia.org/wiki/File:Ice_Age_Dawn_of_the_Dinosaurs_theatrical_poster.jpg">Source : wikimedia.org</a></figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créons d'abord un vecteur textuel avec les noms de</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># certains animaux du film L'âge de glace.</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Manny"</span>, <span class="st">"Sid"</span>, <span class="st">"Diego"</span>, <span class="st">"Ellie"</span>, <span class="st">"Peaches"</span>, <span class="st">"Scrat"</span>,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rudy"</span>, <span class="st">"Buck"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Un second vecteur textuel indique l'espèce de chaque</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># animal.</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mammoth"</span>, <span class="st">"sloth"</span>, <span class="st">"sabertooth"</span>, <span class="st">"mammoth"</span>, <span class="st">"mammoth"</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"squirrel"</span>, <span class="st">"dinosaur"</span>, <span class="st">"weasel"</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Un troisième vecteur logique indique si chaque animal est</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># une femelle</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>female <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Un quatrième vecteur numérique indique l'âge en années de</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co"># chaque animal.</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">20</span>, <span class="dv">35</span>, <span class="dv">25</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">28</span>)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Un cinquième tableau numérique indique le poids en kg de</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="co"># chaque animal.</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">80</span>, <span class="dv">400</span>, <span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">10000</span>, <span class="dv">3</span>)</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co"># La fonction data.frame() permet d'utiliser les vecteurs</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co"># pour former un tableau de données.</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>ice_age_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(name, species, female, age, weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous pouvons afficher l’objet <code>ice_age_df</code> en exécutant son nom ou en utilisant la fonction <code>print()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name    species female age weight
1   Manny    mammoth  FALSE  30   5000
2     Sid      sloth  FALSE  20     80
3   Diego sabertooth  FALSE  35    400
4   Ellie    mammoth   TRUE  25   4000
5 Peaches    mammoth   TRUE   7   1000
6   Scrat   squirrel  FALSE   4      1
7    Rudy   dinosaur  FALSE 100  10000
8    Buck     weasel  FALSE  28      3</code></pre>
</div>
</div>
<section id="quelques-fonctions-utiles-pour-analyser-les-data-frames" class="level3">
<h3 class="anchored" data-anchor-id="quelques-fonctions-utiles-pour-analyser-les-data-frames">Quelques fonctions utiles pour analyser les data frames</h3>
<p>Il existe plusieurs <strong>fonctions utiles</strong> dans R qui vous permettent d’analyser les propriétés de jex de données de type data frame (et d’autres types d’objets R), comme p.&nbsp;ex. :</p>
<ul>
<li><p><code>dim()</code> : Retourne les dimensions d’un jeu de données - le nombre de lignes et de colonnes.</p></li>
<li><p><code>head()</code> : Affiche les six premières lignes du jeu de données.</p></li>
<li><p><code>str()</code> : Fournit la structure du jeu de données, y compris</p>
<ul>
<li><p>le type de variable de chaque colonne,</p></li>
<li><p>le nombre d’observations et</p></li>
<li><p>les premières entrées de chaque colonne.</p>
<p>C’est un moyen rapide de se faire une idée du contenu de votre jeu de données.</p></li>
</ul></li>
<li><p><code>summary()</code>: Donne un résumé du jeu de données, y compris des statistiques telles que</p>
<ul>
<li><p>la moyenne,</p></li>
<li><p>la médiane,</p></li>
<li><p>le minimum et le maximum pour les variables numériques, et</p></li>
<li><p>les fréquences pour les variables factorielles.</p>
<p>Cette fonction est utile pour obtenir rapidement une vue d’ensemble des statistiques.</p></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilisons ces fonctions pour analyser l'objet ice_age_df</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name    species female age weight
1   Manny    mammoth  FALSE  30   5000
2     Sid      sloth  FALSE  20     80
3   Diego sabertooth  FALSE  35    400
4   Ellie    mammoth   TRUE  25   4000
5 Peaches    mammoth   TRUE   7   1000
6   Scrat   squirrel  FALSE   4      1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   8 obs. of  5 variables:
 $ name   : chr  "Manny" "Sid" "Diego" "Ellie" ...
 $ species: chr  "mammoth" "sloth" "sabertooth" "mammoth" ...
 $ female : logi  FALSE FALSE FALSE TRUE TRUE FALSE ...
 $ age    : num  30 20 35 25 7 4 100 28
 $ weight : num  5000 80 400 4000 1000 1 10000 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name             species            female             age        
 Length:8           Length:8           Mode :logical   Min.   :  4.00  
 Class :character   Class :character   FALSE:6         1st Qu.: 16.75  
 Mode  :character   Mode  :character   TRUE :2         Median : 26.50  
                                                       Mean   : 31.12  
                                                       3rd Qu.: 31.25  
                                                       Max.   :100.00  
     weight        
 Min.   :    1.00  
 1st Qu.:   60.75  
 Median :  700.00  
 Mean   : 2560.50  
 3rd Qu.: 4250.00  
 Max.   :10000.00  </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Une autre astuce utile consiste à utiliser le <strong><code>$</code></strong> pour <strong>extraire des colonnes spécifiques</strong> d’un jeu de données.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># P. ex. :</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>ice_age_df<span class="sc">$</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Manny"   "Sid"     "Diego"   "Ellie"   "Peaches" "Scrat"   "Rudy"   
[8] "Buck"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Essayez vous-même et extrayez d'autres colonnes de</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ice_age_df à l'aide du $ !</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="fonctions-statistiques-de-base" class="level2">
<h2 class="anchored" data-anchor-id="fonctions-statistiques-de-base">Fonctions statistiques de base</h2>
<p>Il existe dans R toute une palette de fonctions statistiques qui vous permettent d’évaluer principalement des données de type numérique. Quelques fonctions utiles pour les statistiques descriptives de base :</p>
<ul>
<li><p><code>mean()</code> : Calcule la moyenne arithmétique</p></li>
<li><p><code>median()</code> : Calcule la médiane</p></li>
<li><p><code>sd()</code> : Calcule l’écart-type (angl. <em>standard deviation</em>)</p></li>
<li><p><code>var()</code> : Calcule la variance</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">100</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(a1)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(a1)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(a1)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(a1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34.33333</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 56.8712</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3234.333</code></pre>
</div>
</div>
</section>
<section id="les-facteurs" class="level2">
<h2 class="anchored" data-anchor-id="les-facteurs">Les facteurs</h2>
<p>Un autre type de variable clé dans R est ce que l’on appelle les <strong>facteurs</strong>, qui sont essentiellement des <strong>variables catégorielles</strong>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les facteurs sont des variables qui prennent un nombre limité de valeurs différentes (appelées <em>levels</em> dans R).</p>
<p>Il existe deux sous-type de facteurs :</p>
<ul>
<li><p>Les <strong>facteurs nominaux</strong> (sans ordre) : toutes les catégories sont équivalentes les unes aux autres. Il n’y a pas de hiérarchisation.</p>
<ul>
<li>Exemples : le genre et l’appartenance à un parti politique</li>
</ul></li>
<li><p>Les <strong>facteurs ordinaux</strong> (avec un ordre): il y a un ordre ou une hiérarchie spécifié parmi les catégories (p.&nbsp;ex. des niveaux tels que <em>faible</em>, <em>moyen</em>, <em>élevé</em>).</p>
<ul>
<li>Exemples : niveau d’éducation, cohortes d’âge</li>
</ul></li>
</ul>
</div>
</div>
<p>Vous pouvez créer un facteur nominal à l’aide de la fonction <code>factor()</code> et vérifier ses catégories avec <code>levels()</code>. Voici un exemple :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer un vecteur de données catégorielles, d'abord de</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># type textuel</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>genre <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"homme"</span>, <span class="st">"femme"</span>, <span class="st">"femme"</span>, <span class="st">"femme"</span>, <span class="st">"homme"</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Le convertir ensuite en facteur</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>facteur_genre <span class="ot">&lt;-</span> <span class="fu">factor</span>(genre)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Voir les niveaux du facteur genre</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(facteur_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "femme" "homme"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimer le facteur (montre aussi les niveaux)</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(facteur_genre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] homme femme femme femme homme
Levels: femme homme</code></pre>
</div>
</div>
<p>Et voici comment créer un facteur ordinal :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voici un vecteur textuel avec des tailles de T-shirt</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>tailles <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Small"</span>, <span class="st">"Medium"</span>, <span class="st">"Large"</span>, <span class="st">"Medium"</span>, <span class="st">"Small"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On le transforme en facteur ordinal en spécifiant les</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co"># arguments suivants :</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>tailles_facteur <span class="ot">&lt;-</span> <span class="fu">factor</span>(tailles, <span class="at">order =</span> <span class="cn">TRUE</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Small"</span>,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Medium"</span>, <span class="st">"Large"</span>))</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tailles_facteur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Small"  "Medium" "Large" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tailles_facteur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Small  Medium Large  Medium Small 
Levels: Small &lt; Medium &lt; Large</code></pre>
</div>
</div>
<p>Transformons maintenant la colonne <code>species</code> de notre jeu de données <code>ice_age_df</code> en facteur avec la fonction <code>as.factor()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifions d'abord la structure de l'objet ice_age_df :</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   8 obs. of  5 variables:
 $ name   : chr  "Manny" "Sid" "Diego" "Ellie" ...
 $ species: chr  "mammoth" "sloth" "sabertooth" "mammoth" ...
 $ female : logi  FALSE FALSE FALSE TRUE TRUE FALSE ...
 $ age    : num  30 20 35 25 7 4 100 28
 $ weight : num  5000 80 400 4000 1000 1 10000 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformation en facteur : ice_age_df$species &lt;-</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co"># as.factor(ice_age_df$species)</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifions encore une fois la structure de l'objet :</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co"># str(ice_age_df)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>C’est maintenant à vous de transformer la colonne <code>name</code> de <code>ice_age_df</code>en facteur !</p>
</section>
<section id="le-répértoire-de-travail" class="level2">
<h2 class="anchored" data-anchor-id="le-répértoire-de-travail">Le répértoire de travail</h2>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans R, le <strong>répertoire de travail</strong> (angl. <em>working directory</em>) fait référence au dossier de votre ordinateur dans lequel R lit et enregistre les fichiers par défaut. Il s’agit d’un concept crucial dans la programmation R, car il détermine l’endroit où R recherche les fichiers à lire et l’endroit où il place les fichiers lorsque vous les enregistrez.</p>
</div>
</div>
<p>Vous pouvez définir votre répertoire de travail avec la fonction <strong><code>setwd()</code></strong>.</p>
<p>Une possibilité, c’est de le faire manuellement dans le volet <em>output</em> en bas à droite :</p>
<ol type="1">
<li>Naviguez sur l’onglet <strong>Files</strong></li>
<li>Cliquez sur les trois petits points <strong>…</strong> tout à droite</li>
<li>Choisissez un dossier sur votre ordinateur qui peut servir de répertoire de travail (vous devez peut-être en créer un d’abord et lui donner un nom utile, p.ex. “ex_meth_sp24”</li>
<li>Cliquez ensuite sur la petite <strong>roue bleue</strong> (More) et choisissez <strong>Set as Working Directory</strong></li>
<li>Vous pouvez ensuite copier et coller le code R qui définit le répertoire de travail depuis l’onglet de la console et l’inclure dans votre script R</li>
</ol>
<p>Sur l’ordinateur de l’enseignant, ce code est le suivant : <code>setwd("C:/Users/julim/switchdrive/001_Exercices_Methodes_2_SP_22/R")</code> <strong>Attention</strong> : Ce code ne marche naturellement pas sur votre machine. Il faut l’adapter et inclure un chemin de fichier de votre ordinateur.</p>
<p>Vous pouvez ensuite vérifier si le répertoire de travail a été correctement défini avec la fonction <code>getwd()</code></p>
<section id="devoir-pour-session-3-problem-set-1" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-3-problem-set-1">Devoir pour Session 3 (Problem Set 1)</h3>
<ul>
<li><p><strong>Problem Set 1</strong></p>
<ul>
<li><p>Le Problem Set 1 est un QCM sur Moodle qui sera accessible pendant les 30 premières minutes de l’exercice.</p></li>
<li><p>Assurez-vous que R et RStudio fonctionnent sur votre ordinateur portable et qu’il a suffisamment de batterie. Il est de votre responsabilité de vous en assurer.</p></li>
<li><p>Dans le Problem Set 1, il y a à la fois des questions que vous devez résoudre avec du code R et des questions de compréhension qui peuvent être résolues sans code. Vous devez donc être capable non seulement d’exécuter le code, mais aussi d’en comprendre l’objectif.</p></li>
<li><p>Répétez le contenu des sessions 1 et 2 sur votre ordinateur afin de bien vous préparer pour le Problem Set 1.</p></li>
<li><p>Assurez-vous que toutes les parties du code fonctionnent sans message d’erreur.</p></li>
</ul></li>
<li><p><strong>Attention</strong> :</p>
<ul>
<li><p>Vous devez tous venir la semaine prochaine dans le groupe dans lequel vous êtes inscrits via my.unifr (A, B, C, D) si vous voulez participer au Problem Set 1.</p></li>
<li><p>Chaque étudiant-e n’aura accès qu’au Problem Set 1 de son groupe.</p></li>
<li><p>Les personnes qui ne sont inscrites dans aucun groupe ne peuvent pas valider le Problem Set 1.</p></li>
</ul></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-3-problem-set-1" class="level1">
<h1>Session 3 (Problem Set 1)</h1>
<p>Les résultats du <strong>Problem Set 1</strong> (bonnes réponses, échelle des notes) sont accessibles sur la page Moodle de l’exercice.</p>
<p>Voici l’histogramme des points obtenus par n = 62 étudiant-e-s qui ont participé au Problem Set 1.</p>
<ul>
<li><p>Le nombre maximal de points était de 20, il fallait 10 pour passer le test.</p></li>
<li><p>La moyenne des points obtenus était de 14.2 points (note = 4.75).</p></li>
<li><p>59 étudiant-e-s ont réussi Problem Set 1 (95%).</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="session-4-paquets-r-jeux-de-données-intégrés-visualisations-i" class="level1">
<h1>Session 4 | Paquets R, jeux de données intégrés, visualisations I</h1>
<p>La session 4 a pour but d’introduire trois éléments fondamentaux en analyse de données avec R :</p>
<ol type="1">
<li>Installer et charger des <strong>paquets R</strong> sur son ordinateur</li>
<li>Utiliser des <strong>jeux de données intégrés en R</strong> pour s’entraîner en analyse de données</li>
<li>Apprendre à utiliser le paquet <strong>ggplot2</strong> pour créer des visualisations de données</li>
</ol>
<section id="les-paquets-r" class="level2">
<h2 class="anchored" data-anchor-id="les-paquets-r">Les paquets R</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans la programmation R, un <strong>paquet</strong> (angl. <em>package</em>) est un ensemble de fonctions, de données et de code compilé dans un format bien défini.</p>
<p>Les paquets étendent les fonctionnalités de R de base en fournissant des outils supplémentaires pour l’analyse des données, la visualisation, l’apprentissage automatique, la modélisation statistique et beaucoup d’autres applications spécialisées.</p>
<p>Les paquets R peuvent être développés par n’importe qui et partagés gratuitement avec d’autres (open source). Par conséquent, une grande multitude de paquets R sont disponibles.</p>
</div>
</div>
<p>Notez que la plupart des paquets R doit être installé séparément, normalement depuis le site <a href="http://cran.r-project.org">Comprehensive R Archive Network (CRAN)</a>. Dans ce cours, nous nous concentrerons sur deux paquets célèbres :</p>
<ul>
<li><p><code>ggplot2</code> pour créer des <strong>visualisations de données</strong></p></li>
<li><p><code>dplyr</code> pour <strong>manipuler les jeux de données</strong></p></li>
</ul>
<p>Tous deux font partie du <a href="https://www.tidyverse.org">tidyverse</a>, une collection de paquets conçus pour la science des données. Nous utiliserons également le paquet suivant :</p>
<ul>
<li><code>ggthemes</code> pour <strong>augmenter le design des graphiques</strong></li>
</ul>
<p>Pour utiliser un paquet R sur votre ordinateur, il faut :</p>
<ol type="1">
<li>D’abord <strong>installer</strong> le paquet en question avec la fonction <code>install.packages()</code>. Cela peut durer quelques minutes.</li>
<li>Ensuite <strong>activer</strong> le paquet avec la fonction <code>library()</code>.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans RStudio, on peut aussi installer les paquets via l’onglet <strong>Tools</strong> et le menu déroulant : Cliquez sur <em>Install Packages</em>… et cherchez les paquets que vous voulez installer.</p>
</div>
</div>
<p>Utilisez le code suivant pour installer les paquets R requis pour notre cours. Enlevez les croisillons, éxécutez le code avec <code>install.packages()</code> puis réajouter les croisillons pour éviter de réinstaller les paquets chaque fois que vous éxécutez le code dans votre script ! Activer ensuite les paquets avec <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('tidyverse')</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('ggthemes')</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>À noter : <code>ggplot2</code> et <code>dplyr</code> sont installés avec le <code>tidyverse</code>, il ne faut donc plus les installer séparément.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notez qu’une fois installé, vous n’avez pas besoin de le réinstaller les paquets à chaque fois avec <code>install.packages()</code>. Cependant, vous devez <strong>activer</strong> tous les paquets R que vous voulez utiliser dans une session avec la commande <code>library()</code>. Sans activation, vous allez recevoir des messages d’erreur.</p>
</div>
</div>
<p>Certains paquets ont des documentations auxquelles vous pouvez accéder grâce au point d’interrogation. Ces infos sont affichés dans le volet <em>Output</em> sous l’onglet <em>Help</em>.</p>
<ul>
<li><p><code>?ggplot2</code></p></li>
<li><p><code>?dplyr</code></p></li>
</ul>
<p>En ligne, vous pouvez également trouver de nombreuses ressources qui expliquent en détail les fonctionnalités des différents paquets R et vous renvoient vers d’autres livres, tutoriels, cours, etc., p.&nbsp;ex. :</p>
<ul>
<li><p><a href="https://ggplot2.tidyverse.org/index.html">Documentation officielle de <code>ggplot2</code></a></p></li>
<li><p><a href="https://dplyr.tidyverse.org">Documentation officielle de <code>dplyr</code></a></p></li>
<li><p><a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/">Exemples de graphiques crées avec les différents designs de <code>ggthemes</code></a></p></li>
</ul>
<p>Vous pouvez vérifier quels paquets sont <strong>actuellement installés sur votre ordinateur</strong> avec la fonction <code>installed.packages()</code> (vous pouvez laisser vide l’espace entre parenthèses) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="les-jeux-de-données-intégrés" class="level2">
<h2 class="anchored" data-anchor-id="les-jeux-de-données-intégrés">Les jeux de données intégrés</h2>
<p>Une excellente façon, et probablement la plus efficace, d’apprendre à utiliser R pour l’analyse de données consiste à travailler avec des <strong>jeux de données intégrés dans R</strong>.</p>
<p>Ces jeux de données exemplaires présentent deux avantages principaux.</p>
<ol type="1">
<li>Il est facile d’y accéder et de les charger dans votre session RStudio, car ils sont intégrés à R et à certains de ses paquets.</li>
</ol>
<p>Cela les distingue fortement des données du “monde réel”, comme les données de questionnaires ou de médias sociaux, qu’il faut souvent d’abord nettoyer et formater, puis importer dans RStudio sous forme de fichiers externes. Avec les jeux de données intégrés, vous pouvez immédiatement commencer l’analyse et la visualisation des données.</p>
<ol start="2" type="1">
<li>Ces jeux de données ont prouvé leur utilité dans d’innombrables supports d’apprentissage.</li>
</ol>
<p>Par conséquent, vous pouvez facilement trouver des ressources supplémentaires et des exemples de code à leur sujet.</p>
<p>Dans ce qui suit, nous allons explorer quatre jeux de données classiques de ce type :</p>
<ul>
<li><p><code>iris</code></p></li>
<li><p><code>mtcars</code></p></li>
<li><p><code>diamonds</code></p></li>
<li><p><code>palmerpenguins</code></p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez afficher les jeux de données qui sont actuellement accéssible sur votre ordinateur avec la commande <code>data().</code></p>
</div>
</div>
<section id="le-jeu-de-données-iris" class="level3">
<h3 class="anchored" data-anchor-id="le-jeu-de-données-iris">le jeu de données <code>iris</code></h3>
<p>Le jeu de données <code>iris</code> est un ensemble de données célèbre qui contient les mesures en centimètres des variables longueur et largeur du sépale, ainsi que longueur et largeur du pétale, pour trois expèces de fleurs d’iris (Setosa, Virginica et Versicolor). Il y a 150 observations en total (50 pour chaque espèce).</p>
<p>Le jeu de données a été rendu célèbre par le statisticien et biologiste britannique <strong>Ronald Fisher</strong> dans un article scientifique de 1936 qui avait beaucoup d’influence dans le domaine des statistiques. Les données d’iris eux-même ont été récolté par le botaniste Edgar Anderson en 1935 sur la péninsule de Gaspésie au Québéc, Canada.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Plus sur Ronald Fisher
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Ronald Fisher (1890-1962) était un statisticien, généticien et biologiste britannique qui a joué un rôle crucial dans le développement de la science statistique moderne. Il est connu pour son travail dans le développement des fondements des méthodes statistiques, incluant l’analyse de variance (ANOVA), le test exact de Fisher et l’estimation du maximum likelihood. Fisher a également apporté des contributions significatives en génétique, où son travail sur la théorie de la sélection naturelle et la génétique des populations a aidé à combler le fossé entre la génétique mendélienne et l’évolution darwinienne. Il est considéré comme l’un des architectes principaux de la synthèse néo-darwinienne. Son influence s’étend au-delà de la statistique et de la génétique aux domaines plus larges de la biologie et de la recherche agricole, faisant de lui une figure pivotale de la science du 20e siècle.</p>
</div>
</div>
</div>
<p><a title="Diego Mariano, CC BY-SA 4.0 <https://creativecommons.org/licenses/by-sa/4.0>, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Flores_de_%C3%8Dris.png"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Flores_de_%C3%8Dris.png/512px-Flores_de_%C3%8Dris.png" alt="Flores de Íris" width="512"></a></p>
<p>Il y a des statistiques sur trois espèces d’iris dans le jeu de données <a href="https://commons.wikimedia.org/wiki/File:Flores_de_Íris.png">Source : wikimedia.org</a></p>
<p>Dans l’apprentissage de R, ce jeu de données est souvent utilisé pour illustrer diverses techniques d’analyse de données, y compris le clustering, la classification et la visualisation.</p>
<p>Explorons un peu le jeu de données <code>iris</code> avec du code !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris)  <span class="co"># Ceci affiche le nombre de lignes et de colonnes)</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)  <span class="co"># Affiche les six premières lignes</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)  <span class="co"># Informations sur la structure du jeu de données</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iris)  <span class="co"># Affiche les noms des colonnes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Regardons ce que ça donne après l’éxécution de chaque ligne de code :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150   5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"     </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez consulter la documentation pour beaucoup de jeux de données avec un point d’interrogation : <code>?iris()</code>.</p>
</div>
</div>
</section>
<section id="le-jeu-de-données-mtcars" class="level3">
<h3 class="anchored" data-anchor-id="le-jeu-de-données-mtcars">le jeu de données <code>mtcars</code></h3>
<p>Utilisez le script suivant pour analyser <code>mtcars</code>(lisez également la documentation avec <code>?mtcars</code>) !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargez le jeu de données mtcars. Il devrait apparaître</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dans l'environnement</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichez mtcars</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>mtcars</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co"># vous pouvez explorer mtcars manuellement en double</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="co"># cliquant dessus dans l'environnement</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichez seulement les six premières observations</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichez seulement les six dernières observations</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mtcars)</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquez quelques autres commandes pour explorer ce jeu</span></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a><span class="co"># de données</span></span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mtcars)</span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mtcars)</span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars)</span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mtcars)  <span class="co"># cette commande marche seulement si vous avez activé le tidyverse</span></span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire la colonne mpg ('miles per gallon') avec le</span></span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a><span class="co"># signe $ et calculer la moyenne, la médianne, le minimum</span></span>
<span id="cb87-29"><a href="#cb87-29" aria-hidden="true" tabindex="-1"></a><span class="co"># et le maximum</span></span>
<span id="cb87-30"><a href="#cb87-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-31"><a href="#cb87-31" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>mpg</span>
<span id="cb87-32"><a href="#cb87-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-33"><a href="#cb87-33" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(mtcars<span class="sc">$</span>mpg)</span>
<span id="cb87-34"><a href="#cb87-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-35"><a href="#cb87-35" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(mtcars<span class="sc">$</span>mpg)</span>
<span id="cb87-36"><a href="#cb87-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-37"><a href="#cb87-37" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(mtcars<span class="sc">$</span>mpg)</span>
<span id="cb87-38"><a href="#cb87-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-39"><a href="#cb87-39" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(mtcars<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a title="Jeremy from Sydney, Australia, CC BY 2.0 <https://creativecommons.org/licenses/by/2.0>, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:1974_Toyota_Corolla_(KE20)_L_2-door_sedan_(20538771443).jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/1974_Toyota_Corolla_%28KE20%29_L_2-door_sedan_%2820538771443%29.jpg/512px-1974_Toyota_Corolla_%28KE20%29_L_2-door_sedan_%2820538771443%29.jpg" alt="1974 Toyota Corolla (KE20) L 2-door sedan (20538771443)" width="512"></a></p>
<p>Un des modèles de mtcars : Le Toyota Corolla de 1974. <a href="https://commons.wikimedia.org/wiki/File:1974_Toyota_Corolla_(KE20)_L_2-door_sedan_(20538771443).jpg">Source : wikimedia.org</a></p>
</section>
<section id="le-jeu-de-données-diamonds" class="level3">
<h3 class="anchored" data-anchor-id="le-jeu-de-données-diamonds">le jeu de données <code>diamonds</code></h3>
<p>C’est maintenant à vous d’explorer ce jeu de données avec du code !</p>
<p>Utilisez également <code>?diamonds()</code> !</p>
<p><a title="Jerry Cone, Public domain, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Diamond-1128734.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Diamond-1128734.jpg/512px-Diamond-1128734.jpg" alt="Diamond-1128734" width="512"></a></p>
<p>Qu’est-ce qui définit le prix d’un diamant ? <a href="https://commons.wikimedia.org/wiki/File:Diamond-1128734.jpg">Source : wikimedia.org</a></p>
</section>
</section>
<section id="introduction-aux-visualisations-avec-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="introduction-aux-visualisations-avec-ggplot2">Introduction aux visualisations avec <code>ggplot2</code></h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ggplot2</code>, qui fait partie du <code>tidyverse</code>, est un paquet de visualisation de données très populaire dans R. Il a été conçu pour faciliter la création de graphiques complexes et multicouches avec une syntaxe cohérente et consistante nommée <em>grammar of graphics</em>.</p>
<p><em>ggplot2</em> est donc un acronyme formé à partir des mots <em>grammar of graphics plots</em> (français : <em>grammaire des graphiques</em>). Le “2” dans ggplot2 indique simplement la deuxième génération de ce paquet R.</p>
<p>Avec <code>ggplot2</code>, les utilisateurs peuvent construire des graphiques de manière incrémentale en ajoutant des couches, ce qui le rend flexible pour une large gamme de besoins graphiques. Cela permet de créer des visualisations hautement personnalisables et esthétiquement attrayantes, allant de simples diagrammes de dispersion à des figures multi-panneaux complexes.</p>
</div>
</div>
<p>Le tableau suivant décrit les couches d’un graphique ggplot :</p>
<table class="table">
<caption>Les couches d’un graphique ggplot</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Couche</th>
<th style="text-align: left;">Déscription/Variables</th>
<th style="text-align: center;">Obligatoire ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>data</em></td>
<td style="text-align: left;">le jeu de données que nous voulons visualiser</td>
<td style="text-align: center;">oui</td>
</tr>
<tr class="even">
<td><em>aesthetics</em></td>
<td style="text-align: left;">le <em>mapping</em> de nos variables : axes <em>x</em> et <em>y</em>, <em>color</em>, <em>fill</em>, <em>alpha</em>, <em>line width</em>, etc.</td>
<td style="text-align: center;">oui</td>
</tr>
<tr class="odd">
<td><em>geometries</em></td>
<td style="text-align: left;">le type visuel du graphique : <em>point</em>, <em>line</em>, <em>histogram</em>, <em>bar</em>, <em>boxplot</em></td>
<td style="text-align: center;">oui</td>
</tr>
<tr class="even">
<td><em>themes</em></td>
<td style="text-align: left;">Le design du graphique</td>
<td style="text-align: center;">non</td>
</tr>
<tr class="odd">
<td>Autres couches optionelles : <em>facets</em>, <em>statistics</em>, <em>coordinates</em></td>
<td style="text-align: left;">Pour des visualisations plus complexes</td>
<td style="text-align: center;">non</td>
</tr>
</tbody>
</table>
<p>Pour comprendre comment cela fonctionne, voici un exemple de code dans lequel les différentes couches d’un graphique <em>ggplot</em> sont ajoutées étape par étape dans la fonction <code>ggplot()</code>. (Normalement, nous ne procéderions pas ainsi, mais utiliserions directement le code en entier pour créer le graphique).</p>
<p>Le but dans cet exemple est de visualiser le jeu de données <code>diamonds</code> pour comprendre la relation entre les variables <code>price</code> (prix) et <code>carat</code> (poids) des diamants dans le jeu de données !</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Important : avant d’analyser un ensemble de données, il faut toujours acquérir des <strong>connaissances contextuelles</strong> sur ce que les données représentent.</p>
<p>Dans notre exemple, il s’agit de diamants. Dans le monde des diamants, il est important de comprendre qu’il existe <strong>quatre critères de qualité</strong> qui déterminent <strong>la valeur</strong> (donc le prix) d’un diamant. Ce sont les suivants :</p>
<ul>
<li><p>La taille (angl. <em>cut</em>)</p></li>
<li><p>La pureté (<em>clarity</em>)</p></li>
<li><p>La couleur (<em>color</em>)</p></li>
<li><p>Le poids en carats (<em>carat</em>)</p></li>
</ul>
<p>En anglais, on parle donc aussi des 4C. Le jeu de données <code>diamonds</code> contient précisément ces variables.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La première couche, data, définit le jeu de données</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Notre graphique n’est pour l’instant qu’une zone grise ! Catastrophe ? Bien sûr que non 😀. Nous devons maintenant définir les autres paramètres de la fonction <code>ggplot()</code> !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La deuxième couche, aesthetics, définit le mapping de nos</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variables sur les axes y et x</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La zone grise a maintenant reçu des unités pour ses axes x (<code>carat</code>) et y (<code>price</code>). Mais il n’y a toujours pas de données affichées !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La troisième couche, geometries, définit le type visuel</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co"># de notre graphique</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ouf, si vous avez exécuté le dernier code, vous avez maintenant 53 940 points de données affichées dans votre graphique ! Car il y a tant d’observations dans le jeu de données <code>diamonds</code>.</p>
<p>Bon courage si vous avez un vieil ordinateur, cela peut prendre un certain temps avant que R ne produise le graphique…</p>
<p>Mais jetons un coup d’œil au graphique. Qu’est-ce qui saute aux yeux, pouvez-vous déjà identifier des tendances ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut maintenant encore optimiser notre graphique</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> clarity)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Vous avez remarqué ce qui a changé dans le code ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajoutons encore une couche optionnelle mais utile au</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique : labs() nous permet d'ajouter et de</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co"># personnaliser des titres, sout-titres, titre d'axes,</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co"># titres de légendes, etc. !</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> clarity)) <span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"La relation entre prix et carat des diamants"</span>,</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"n = 53 940 diamants"</span>, <span class="at">y =</span> <span class="st">"Prix"</span>, <span class="at">x =</span> <span class="st">"Carat"</span>,</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"Pureté"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Maintenant il s’agit d’interpréter le graphique. Que nous dit-il sur la relation entre prix et carats des diamants ? Quel rôle joue la variable <em>pureté</em> (<code>clarity</code>)?</p>
<section id="devoir-pour-session-5" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-5">Devoir pour Session 5</h3>
<ul>
<li><p>Exécutez toutes les sections de code de la session 4 sur votre ordinateur.</p></li>
<li><p>Entraînez-vous à ouvrir un nouveau script R, à définir un répertoire de travail et à enregistrer le script dans un dossier sur votre ordinateur.</p></li>
<li><p>Assurez-vous que le paquet R <code>tidyverse</code> est installé correctement sur votre ordinateur.</p></li>
<li><p>Utilisez le code R de manière autonome pour explorer le jeu de données <code>diamonds</code>. Vous devez être en mesure de comprendre et d’expliquer comment il est structuré (nombre d’observations n, unité statistique, variables, origine des données, etc).</p></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-5-visualisations-ii" class="level1">
<h1>Session 5 | Visualisations II</h1>
<p>La session 5 a pour but d’approfondir les techniques de visualisation de données avec le paquet <code>ggplot2</code>, notamment la création des types de graphique suivants :</p>
<ol type="1">
<li>Les nuages de points (angl. <em>scatter plots</em>)</li>
<li>Les diagrammes à barres (angl. <em>bar plots</em>)</li>
<li>Les histogrammes (angl. <em>histograms</em>)</li>
<li>Les boîtes à moustaches (angl. <em>box plots</em>)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># N'oubliez pas de charger les paquets tidyverse et</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggthemes !  Exécutez le code suivant pour le faire :</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="les-nuages-de-points-angl.-scatter-plots" class="level2">
<h2 class="anchored" data-anchor-id="les-nuages-de-points-angl.-scatter-plots">1. Les nuages de points (angl. <em>scatter plots</em>)</h2>
<p>Commençons par le <strong>nuage de points</strong>, que nous avons déjà vu lors de la dernière session, lorsque nous avons visualisé la relation entre les carats et les prix dans le jeu de données <code>diamonds</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un <strong>nuage de points</strong> (aussi appelé diagramme de dispersion) est utilisé dans <code>ggplot2</code> pour représenter les valeurs de <strong>deux variables numériques différentes</strong> par des points, avec une variable sur l’axe des X et l’autre sur l’axe des Y.</p>
<p>Ce type de graphique est idéal pour l’analyse exploratoire de données, permettant d’observer les relations entre les variables, de détecter des tendances, des regroupements, des valeurs êxtremes (angl. <em>outliers</em>) ou de vérifier des hypothèses de corrélation.</p>
<p>Dans la fonction <code>ggplot()</code>, un scatter plot est créé avec la couche géométrique <code>geom_point()</code>.</p>
</div>
</div>
<p>Créons un nuage de points avec le jeu de données <code>iris</code>, en comparant les longueurs et les largeurs des sépales des iris (les variables <code>Sepal.Length</code> et <code>Sepal.Width</code>).</p>
<p>Notez que, dans le code suivant, nous ne créons pas directement un graphique <code>ggplot</code> mais nous stockons le graphique comme un objet dans l’environnement, nommé <code>p1</code>, que nous pouvons ensuite afficher avec la fonction <code>print()</code>. Nous verrons dans un instant pourquoi cette pratique est utile.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nuage de points basique pour comparer la longueur et la</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="co"># largeur des sépales des iris</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>np1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> iris, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sepal length and width in the iris dataset"</span>)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(np1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Nous pouvons ajouter des couches à l’objet <code>np1</code> sans l’écraser, p.&nbsp;ex. une ligne de régression linéaire avec <code>geom_smooth(method = lm)</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>np1 <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Que nous indique la ligne de régression ? En principe, elle indique une correlation légèrement négative entre les variables <code>Sepal.Length</code>et <code>Sepal.Width</code> ! (la zone grise autour de la ligne bleue indique une marge d’erreur).</p>
<p>Cela signifie que les iris dont les sépales sont plus longs ont tendance à avoir des sépales un peu moins larges ! Gardez cette constatation à l’esprit pour les étapes de codage suivantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ecrasons np1 en changeant un peu le code. Découvrez</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># vous-même ce qui a changé dans le code !</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>np1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sepal length and width in the iris dataset"</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(np1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Vous pouvez voir dans le graphique que nous pouvons maintenant différencier les trois espèces d’iris. La dispersion des points semble moins aléatoire, ce qui permet de voir des groupes de points appartenant à l’une ou l’autre espèce (angl. <em>cluster</em>).</p>
<p>Maintenant, ajoutons à nouveau une couche <code>geom_smooth()</code> à l’objet <code>np1</code> !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>np1 <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Les trois lignes de régression (une pour chaque type d’iris) montrent maintenant un tout autre résultat : en effet, la corrélation entre <code>Sepal.Length</code> et <code>Sepal.Width</code> est clairement positive.</p>
<p>Cette constatation est un exemple d’analyse exploratoire des données, rendue possible par les possibilités de visualisation de <code>ggplot2</code>.</p>
</section>
<section id="les-diagrammes-à-barres" class="level2">
<h2 class="anchored" data-anchor-id="les-diagrammes-à-barres">2. Les diagrammes à barres</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les <strong>diagrammes à barres</strong> dans R avec <code>ggplot2</code> sont utilisés pour représenter visuellement des <strong>données catégorielles</strong>, permettant de comparer des quantités entre différentes catégories.</p>
<p>On les utilise donc souvent pour montrer la fréquence ou la proportion d’observations dans chaque catégorie, ce qui les rend utiles pour analyser des tendances ou des différences au sein de données catégorielles.</p>
<p>Dans la fonction <code>ggplot()</code>, un diagramme à barres est créé avec la couche géométrique <code>geom_bar()</code>.</p>
</div>
</div>
<p>Par exemple, nous pouvons utiliser le code simple suivant pour comparer la fréquence des différentes tailles (angl. <code>cut</code>) dans le jeu de données <code>diamonds</code>. Cette-fois ci, nous sauvegardons et nommons le graphique <code>db1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>db1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(db1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Améliorons le graphique avec des paramètres et des couches supplémentaires de la fonction <code>ggplot()</code> (Notez que nous allons simplement écraser l’objet <code>db1</code> créé précédemment avec une nouvelle version de <code>db1</code> !) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>db1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Frequency of cut quality types in the diamonds dataset"</span>,</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"n = 53,940 diamonds"</span>, <span class="at">x =</span> <span class="st">"Cut Quality"</span>, <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(db1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Que nous dit le graphique ? Il est intéressant de constater que dans le jeu de données <code>diamonds</code>, le niveau de qualité le plus élevé de la taille, à savoir <code>ideal</code>, est également le plus fréquent.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-29-contents" aria-controls="callout-29" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-29" class="callout-29-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Dans la fonction <code>ggplot()</code>, il y a une différence si vous voulez ajouter de la couleur aux points (qui ont mathématiquement zéro dimension) ou aux surfaces (qui ont deux dimensions), comme dans les diagrammes à barres.</p>
<p>Si vous voulez ajouter de la couleur à une surface, vous devez utiliser l’argument <code>fill = "xyz"</code>. L’argument <code>color = "xyz"</code> que nous avons utilisé pour ajouter de la couleur aux nuages de points ne fera qu’ajouter de la couleur à la ligne autour de la surface !</p>
</div>
</div>
</div>
<section id="cest-maintenant-à-vous-de-jouer" class="level3">
<h3 class="anchored" data-anchor-id="cest-maintenant-à-vous-de-jouer">C’est maintenant à vous de jouer !</h3>
<p>Reprenez le code que nous avons utilisé pour créer <code>db1</code> et modifiez-le pour créer un nouvel objet,<code>db2</code>, qui visualise la fréquence des types de qualité de couleur (<code>color</code>) dans le jeu de données <code>diamonds</code> sous la forme d’un diagramme à barres !</p>
</section>
</section>
<section id="les-histogrammes" class="level2">
<h2 class="anchored" data-anchor-id="les-histogrammes">3. Les histogrammes</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un <strong>histogramme</strong> est un type de graphique utilisé pour représenter <strong>la distribution</strong> d’<strong>une variable numérique</strong> à travers des barres.</p>
<p>Un “histogramme sépare les valeurs possibles des données en classes ou groupes. Pour chaque groupe, on construit un rectangle dont la base correspond aux valeurs de ce groupe et la hauteur correspond au nombre d’observations dans le groupe.</p>
<p>L’histogramme a une apparence semblable au graphique à barres verticales, mais il n’y a pas d’écart entre les barres.</p>
<p>En règle générale, l’histogramme possède des barres d’une largeur égale” (Source : <a href="https://www150.statcan.gc.ca/n1/edu/power-pouvoir/ch9/histo/5214822-fra.htm">Statistique Canada, 2021).</a></p>
<p>L’histogramme est particulièrement utile pour :</p>
<ul>
<li><strong>Analyser la distribution</strong> : Comprendre si les données sont normalement distribuées, asymmétriques (angl. <em>skewness</em>), ou si elles présentent un plateau (kurtosis).</li>
<li><strong>Détecter les valeurs extrêmes</strong> : Identifier les données qui s’écartent du reste de l’ensemble des données de manière signifiante.</li>
<li><strong>Comparer des distributions</strong> : Observer comment différentes sous-populations se comparent les unes aux autres en termes de distribution de données.</li>
</ul>
<p>Avec <code>ggplot2</code> en R, créer un histogramme se fait avec la couche géometrique <code>geom_histogram()</code>. <code>ggplot2</code> calcule automatiquement la taille des intervalles (angl. <em>bins</em>) par défaut, mais cela peut être ajusté manuellement en spécifiant l’argument <code>binwidth = xyz</code>dans la fonction <code>geom_histogram()</code>, p.&nbsp;ex. <code>geom_histogram(binwidth = 30)</code>.</p>
</div>
</div>
<p>Avant de créer un histogramme avec le code R, introduisons d’abord une nouvelle fonction : <code>rnorm()</code>. Elle peut être utilisée pour créer des valeurs aléatoires qui suivent une <strong>loi normale</strong> (angl. <em>normal distribution</em>).</p>
<p>Les arguments que nous pouvons entrer dans la fonction sont :</p>
<ul>
<li><p>le nombre <code>n</code> de valeurs aléatoires que nous voulons créer</p></li>
<li><p>la moyenne <code>mean</code> de la distribution des valeurs aléatoires</p></li>
<li><p>l’écart-type <code>sd</code> de la distribution des valeurs aléatoires</p></li>
</ul>
<p>Notez que par défaut, la fonction utilise <code>mean = 0</code> et <code>sd = 1</code>, ce qui correspond à une <strong>loi normale centrée réduite</strong> (angl. <em>standard normal distribution</em>).</p>
<p>Utilisez aussi <code>?rnorm()</code>pour accéder à plus d’infos.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>La fonction <code>set.seed()</code> dans R est utilisée pour définir la graine (seed en anglais) du générateur de nombres aléatoires. La graine est un nombre entier qui sert de point de départ pour le générateur de nombres aléatoires.</p>
<p>En définissant une graine spécifique, par exemple avec <code>set.seed(123)</code>, vous garantissez que la séquence de nombres aléatoires générée par la suite avec des fonctions telles que <code>rnorm()</code>, sera la même à chaque fois que vous exécuterez le code, ce qui est utile pour la reproductibilité des résultats.</p>
</div>
</div>
<p>Dans le code R suivant, nous utilisons <code>rnorm()</code> pour simuler les distributions des tailles des hommes et des femmes en Suisse.</p>
<p>Selon un article de <a href="https://www.24heures.ch/calculateur-en-ligne-quelle-taille-faites-vous-par-rapport-aux-autres-191558705635#"><em>24 heures</em></a>, en Suisse, les femmes ont une taille moyenne de 164.7 cm tandis que les hommes mesurent 177.4 cm en moyenne. Dans la suite, nous supposons que les écarts-types sont de +- 5.6 cm pour les femmes et de +- 6.1 cm pour les hommes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulation de tailles de femmes en Suisse Créer 500</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co"># valeurs aléatoires de taille (moyenne = 164.7 et</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co"># écart-type = 5.6) avec la fonction rnorm().</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>taille_f <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="at">mean =</span> <span class="fl">164.7</span>, <span class="at">sd =</span> <span class="fl">5.6</span>)</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(taille_f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 161.5613 163.4110 173.4288 165.0948 165.4240 174.3044</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stocker taille_f comme objet de type 'data.frame'</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>taille_f <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(taille_f)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># visualiser taille_f avec un histogramme basique</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> taille_f, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> taille_f)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># jouer avec le paramètre 'binwidth' de l'histogramme qui</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co"># définit l'intervalle de la base de ses barres</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> taille_f, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> taille_f)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> taille_f, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> taille_f)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> taille_f, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> taille_f)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stocker l'histogramme comme objet, nommé hist1, et</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co"># modifier sa couleur</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>hist1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> taille_f, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> taille_f)) <span class="sc">+</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"white"</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(hist1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter des couches supplémentaires pour améliorer la</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="co"># visualisation p. ex. des titres</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>hist1 <span class="ot">&lt;-</span> hist1 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histogramme des tailles de femmes en Suisse"</span>,</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Simulation basée sur 500 observations"</span>, <span class="at">x =</span> <span class="st">"Taille en cm"</span>,</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Fréquence"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>()</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(hist1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un élément clé des visualisations de données est la <strong>couleur</strong>. Le document PDF suivant, créé par Ying Wei de l’Université de Columbia à New York, montre et liste les noms des couleurs dans R. Vous pouvez copier-coller le nom d’une couleur et l’utiliser dans votre graphique ggplot2 !</p>
<ul>
<li><a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">Colors in R</a></li>
</ul>
</div>
</div>
<section id="cest-maintenant-à-vous-de-jouer-1" class="level3">
<h3 class="anchored" data-anchor-id="cest-maintenant-à-vous-de-jouer-1">C’est maintenant à vous de jouer !</h3>
<p>Reprenez le code que nous avons utilisé pour créer <code>taille_f</code> et <code>hist1</code> et modifiez-le pour créer une nouvelle simulation de taille d’hommes, <code>taille_h</code>, et un nouveau histogramme qui montre sa distribution, <code>hist2</code>. Jouez avec les paramètres <code>binwidth</code>et la couleur de votre visualisation. Pour cette tâche, vous pouvez supposer que les hommes en Suisse ont une taille moyenne (<code>mean</code>) de 177,4 cm avec un écart-type (<code>sd</code>) de 6,1 cm.</p>
</section>
</section>
<section id="les-boîtes-à-moustaches-angl.-boxplots" class="level2">
<h2 class="anchored" data-anchor-id="les-boîtes-à-moustaches-angl.-boxplots">4. Les boîtes à moustaches (angl. <em>boxplots</em>)</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les <strong>boîtes à moustaches</strong>, ou <strong>boxplots</strong>, sont un type de graphique pour représenter la distribution d’un ensemble de données à travers cinq mesures clés :</p>
<ol type="1">
<li>le minimum (début de la “moustache” ou point extrême de minimum)</li>
<li>le premier quartile (Q1 ; début de la boîte)</li>
<li>la médiane (Q2 ; ligne qui “coupe la boîte en deux”)</li>
<li>le troisième quartile (Q3 ; fin de la boîte) et</li>
<li>le maximum (fin de la moustache ou point extrême de maximum)</li>
</ol>
<p>Ces diagrammes permettent d’identifier rapidement la médiane, l’étendue interquartile (angl. <em>interquartile range</em> = <em>IQR</em>) et les valeurs êxtremes potentielles. Ils sont particulièrement utiles pour comparer les distributions entre plusieurs groupes ou variables.</p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Le dataset <code>mtcars</code> en R, qui contient des données sur les caractéristiques de différents modèles de voitures, peut être utilisé pour illustrer l’utilisation de boxplots.</p>
<p>Par exemple, pour visualiser la distribution de la consommation de carburant (<code>mpg</code>) des voitures en fonction du nombre de cylindres (<code>cyl</code>), on peut utiliser le code suivant :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avant de créer le boxplot, vérifions d'abord la structure</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># de mtcars :</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
</div>
<p>Nous pouvons constater que la colonne <code>cyl</code> (cylindre) est stockée au format numérique.</p>
<p>C’est un problème, car nous voulons comparer la consommation de carburant des voitures à 4, 6 ou 8 cylindres. Nous devons traiter chacune d’entre elles comme un sous-groupe distinct. Comment faire ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformons donc cyl en facteur</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>cyl <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(mtcars<span class="sc">$</span>cyl)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Et maintenant nous pouvons construire notre boxplot</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>box1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mtcars, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> mpg, <span class="at">fill =</span> cyl)) <span class="sc">+</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Consommation de carburant (mpg) par nombre de cylindres dans mtcars"</span>,</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Nombre de cylindres"</span>, <span class="at">y =</span> <span class="st">"Miles per gallon (mpg)"</span>)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(box1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ce code génère un boxplot, <code>box1</code>, pour chaque groupe de cylindres dans le dataset <code>mtcars</code>, permettant de comparer facilement la consommation de carburant entre les voitures avec un différents nombres de cylindres.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Le paramètre <code>alpha = 0.2</code> à l’intérieur de <code>geom_boxplot()</code> rend les boxplots transparents. En général, <code>alpha</code> peut être compris entre 0 (totalement transparent) et 1 (non transparent). C’est un paramètre supplémentaire qui permet de personnaliser votre graphique <code>ggplot2</code>.</p>
</div>
</div>
<p>On voit dans le graphique des boxplots que dans <code>mtcars</code>, les voitures avec des moteurs ayant plus de cylindres ont aussi tendance à être moins efficaces en termes de consommation de carburant. Il existe toutefois quelques intersections entre les groupes. C’est-à-dire qu’il y a des voitures à 8 cylindres qui sont relativement efficaces en termes de consommation de carburant, surpassant quelques voitures à 6 cylindres, par exemple.</p>
<section id="devoir-pour-session-6-problem-set-2" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-6-problem-set-2">Devoir pour Session 6 (Problem Set 2)</h3>
<ul>
<li><p><strong>Problem Set 2</strong></p>
<ul>
<li><p>Comme le premier Problem Set, le Problem Set 2 est un QCM sur Moodle qui sera accessible pendant 30 minutes du créneau horaire de votre groupe de l’exercice.</p></li>
<li><p>Assurez-vous que R et RStudio fonctionnent sur votre ordinateur portable et qu’il a suffisamment de batterie. Il est de votre responsabilité de vous en assurer.</p></li>
<li><p>Le Problem Set 2 concernera principalement le contenu des sessions 4 et 5.</p></li>
<li><p>Les bases de R qui ont été traitées dans les premières sessions, comme par exemple la création et l’écrasement d’objets avec l’opérateur d’affectation <code>&lt;-</code>, sont toutefois requises, car la matière se fonde sur ces bases. Veuillez combler vous-même les éventuelles lacunes à ce sujet.</p></li>
</ul></li>
<li><p><strong>Annonce : Questionnaire</strong></p>
<ul>
<li><p>Nous allons évaluer <strong>un questionnaire sur votre comportement d’utilisation des médias</strong> avec R comme autre élément important du cours.</p></li>
<li><p>Le questionnaire est <strong>anonyme</strong> (même pour l’enseignant) et peut être rempli en ligne via LimeSurvey jusqu’au <strong>lundi 31 mars 2025 à 23h59</strong>.</p></li>
<li><p>Tous les étudiant-e-s ont reçu un lien personnel d’invitation au questionnaire par e-mail (les réponses seront anonymisées et mélangées par le logiciel, l’enseignant ne verra que si les personnes invitées ont répondu au questionnaire avant la date limite).</p></li>
<li><p>Chaque étudiant-e qui aura rempli le questionnaire dans les délais recevra un <strong>bonus de 2 points dans le Problem Set 4</strong> (10% des points).</p></li>
</ul></li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-6-problem-set-2" class="level1">
<h1>Session 6 (Problem Set 2)</h1>
<p>Les résultats du <strong>Problem Set 2</strong> (bonnes réponses, échelle des notes) sont accéssibles sur la page Moodle de l’exercice.</p>
<p>Voici l’histogramme des points obtenus par n = 65 étudiant-e-s qui ont participé au Problem Set 2 le 26 et 27 mars 2025.</p>
<ul>
<li><p>Le nombre maximal de points était de 20, il fallait 10 pour passer le test.</p></li>
<li><p>La moyenne des points obtenus était de 12.7 (note = 4.5).</p></li>
<li><p>56 étudiant-e-s (86%) ont réussi Problem Set 2.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="session-7-manipuler-les-données-i" class="level1">
<h1>Session 7 | Manipuler les données I</h1>
<p><strong>Sujet : Manipuler les données (partie 1)</strong></p>
<p>Le premier but de cette session est d’apprendre à importer des données dans RStudio à partir de <strong>fichiers CSV</strong> et de les stocker en forme de data frame (format tabulaire).</p>
<p>Le deuxième but est de se familiariser avec <code>dplyr</code> (prononcé “dee-ply-er” en anglais), un paquet du <code>tidyverse</code> conçu pour manipuler les données en forme de data frame.</p>
<p>Contrairement aux jeux de données intégrés à R (tels que <code>diamonds</code>, etc.), la plupart des jeux de données du monde réel nécessitent des <strong>transformations</strong> avant de pouvoir être analysés et visualisés. À cette fin, nous examinerons également certaines transformations de types de variables et un nouvel opérateur, le <code>%&gt;%</code> (angl. “pipe”; trad. franç. “tuyau”), qui est très utile pour les manipulations de données.</p>
<section id="lire-des-données-auf-format-csv-dans-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="lire-des-données-auf-format-csv-dans-rstudio">Lire des données auf format CSV dans RStudio</h2>
<p>Par la suite, nous alons appliquer <code>dplyr</code> pour manipuler les données d’un jeu de données concret : un fichier CSV nommé <code>igposts.csv</code>. Ce fichier contient des posts Instagram de célébritées qui ont reçu beaucoup d’interactions d’utilisateurs. Pour cette application, il faut d’abord charger ce jeu de données dans notre session RStudio en cours.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un fichier de type <strong>CSV</strong> (angl. comma-separated values) est un format textuel simple pour sauvegarder des données en forme de tableau, c’est à dire avec des valeurs organisé par lignes et colonnes et séparées par virgules.</p>
<p>Le format CSV présente l’avantage d’être assez léger et compatible avec tous les systèmes d’exploitation. En outre, il est utile pour stocker des données quantitatives en sciences sociales, qui se présentent souvent sous forme de tableaux.</p>
<p>Voici un exemple de format CSV simple :</p>
<p>nom, prénom, âge<br>
Leclerc, Antoine, 53<br>
Gomez, Hugo, 25<br>
Nguyen, Laetitia, 19<br>
</p>
<p>Que nous pouvons afficher comme tableau (à noter que la première ligne désigne les noms des colonnes) :</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">nom</th>
<th style="text-align: left;">prénom</th>
<th style="text-align: center;">âge</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Leclerc</td>
<td style="text-align: left;">Antoine</td>
<td style="text-align: center;">53</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gomez</td>
<td style="text-align: left;">Hugo</td>
<td style="text-align: center;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nguyen</td>
<td style="text-align: left;">Laetitia</td>
<td style="text-align: center;">19</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Avant l’importation de fichier CSV dans RStudio (et comme déjà vu pleins de fois dans le cours 😉), il faut d’abord charger les paquets nécessaire avec <code>library()</code> et définir son répértoire de travail (vous devez adapter les paramètres de <code>setwd()</code> pour qu’il marche sur votre ordinateur) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour charger le jeu de données <code>igposts.csv</code> dans RStudio, vous pouvez suivre le processus suivant :</p>
<ol type="1">
<li><p>Vous téléchargez le fichier <code>igposts.csv</code> depuis le <a href="https://moodle.unifr.ch/course/section.php?id=410649">site Moodle du cours</a> (voir matériel de la 7e session).</p></li>
<li><p>Stockez le fichier <code>igposts.csv</code> dans le dossier que vous avez définit comme répértoire de travail.</p></li>
<li><p>Ensuite, vous utilisez le menu intéractif dans RStudio : File -&gt; Import Dataset -&gt; From Text (base)… et choisissez <code>igposts.csv</code>.</p></li>
<li><p>Une fenêtre avec des paramètre apparait, que vous pouvez remplir de la manière suivante :</p>
<p><img src="images/clipboard-2412941684.png" class="img-fluid"></p>
<ul>
<li><p>Explications des paramètres :</p>
<ul>
<li><p><strong>Encoding = UTF-8</strong> : Indique à RStudio d’utiliser <a href="https://fr.wikipedia.org/wiki/UTF-8">l’encodage de caractères UTF-8</a> (qui est un standard très répandu), ce qui est important pour lire correctement toutes les lettres (notamment les caractères avec des accents : é, ä, ê, etc.).</p></li>
<li><p><strong>Heading = YES</strong> : Indique à RStudio que la première ligne du fichier CSV contient les noms des colonnes.</p></li>
<li><p><strong>Separator = Comma</strong> : Indique à RStudio que les valeurs du tableau sont séparées par des virgules “,” (attention, certains documents francophones utilisent le point-virgule “;” à la place de la virgule, ce qu’il faudrait tenir en compte, si c’était le cas).</p></li>
<li><p><strong>Decimal = Period</strong> : Indique à RStudio que le point “.” est utilisé pour les décimales (et non la virgule “,” comme c’est souvent le cas dans les documents en français).</p></li>
<li><p><strong>na.strings = #N/A</strong> : Indique à RStudio que les cellules vides dans le tableau, c’est à dire, les valeurs manquantes, sont désignées par #N/A (cela peut être différent dans d’autres fichiers CSV).</p></li>
</ul></li>
</ul></li>
<li><p>Finalement, vous pouvez copier et coller le code qui apparaît dans la console dans votre script R pour facilement recharger le fichier CSV ultérieurement.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Par exemple, pour l'ordinateur de l'enseignant, ce code</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># est le suivant :</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>igposts <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code/igposts.csv"</span>,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">encoding =</span> <span class="st">"UTF-8"</span>, <span class="at">na.strings =</span> <span class="st">"#N/A"</span>)</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Si tout a bien marché, l'objet igposts devrait apparaître</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dans votre environnement Nous pouvons afficher la</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co"># structure de igposts pour une première impression :</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(igposts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   100 obs. of  12 variables:
 $ Account             : chr  "Leo Messi" "Selena Gomez" "KIARA" "Cristiano Ronaldo" ...
 $ User.Name           : chr  "leomessi" "selenagomez" "kiaraaliaadvani" "cristiano" ...
 $ Followers.at.Posting: int  434255880 381000851 26965756 545618329 548818853 551324765 44212419 56881100 390981561 547708976 ...
 $ Post.Created.Date   : chr  "27/02/2023" "22/02/2023" "07/02/2023" "09/02/2023" ...
 $ Post.Created.Time   : chr  "18:17:47" "21:32:34" "11:55:59" "16:19:37" ...
 $ Type                : chr  "Album" "Photo" "Album" "Album" ...
 $ Total.Interactions  : int  23333227 20020533 16776082 16501407 14683868 14619124 13517205 12844571 12661694 12639004 ...
 $ Likes               : int  23075849 19760862 16554530 16317762 14603158 14489506 13517204 12844571 12589553 12558961 ...
 $ Comments            : int  257378 259671 221552 183645 80710 129618 1 0 72141 80043 ...
 $ Views               : int  0 0 0 0 0 0 0 10998354 5648190 0 ...
 $ URL                 : chr  "https://www.instagram.com/p/CpLxnFlNJZn/" "https://www.instagram.com/p/Co_P7YgrrFO/" "https://www.instagram.com/p/CoXmBSLvj7A/" "https://www.instagram.com/p/CodNx8BL1-X/" ...
 $ Description         : chr  "Gracias a todos los que hicieron posible que ganara este premio. A todos los de la @afaseleccion, a mi familia "| __truncated__ "I deleted this one time because I thought maybe it was too much but eh (taking a break from social)" "“Ab humari permanent booking hogayi hai” \n\nWe seek your blessings and love on our journey ahead ❤️🙏" "Great feeling to have scored 4 goals and reaching my 500th league goal in a very solid win by the team!💪🏼\n⚽️⚽️⚽️⚽️" ...</code></pre>
</div>
</div>
</section>
<section id="explorez-votre-jeu-de-données-importé" class="level2">
<h2 class="anchored" data-anchor-id="explorez-votre-jeu-de-données-importé">Explorez votre jeu de données importé</h2>
<p>Cela nous montre qu’il s’agit d’un data frame avec 100 observations et 12 variables. Chaque ligne représente un post Instagram d’une célébrité (unité statistique) et chaque colonnes une variable différente associé à ce post.</p>
<p>Notez que les variables sont soit de type textuel (chr = “character”; p. ex. <code>Account</code>= le nom du compte Insta qui a publié le post), soit numérique (int = “integer”; p.&nbsp;ex. <code>Total.Interactions</code> = la somme des <code>Likes</code>et <code>Comments</code> qu’un post a reçu).</p>
<p>Vous pouvez aussi cliquer sur l’objet et explorer le tableau manuellement pour le comprendre d’avantage (comme nous l’avons fait avec <code>mtcars</code>, etc.).</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-36-contents" aria-controls="callout-36" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-36" class="callout-36-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li><p>Vous ne devez pas ouvrir les fichiers CSV avec des autres logiciels avant de les importer dans RStudio (par ex. avec Excel), car cela a souvent pour conséquence de modifier automatiquement le format du fichier CSV, ce qui entraîne ensuite des erreurs.</p></li>
<li><p>Vous devriez enregistrer le fichier CSV directement dans votre répertoire de travail sans l’ouvrir, puis l’importer dans RStudio à l’aide du menu interactif.</p></li>
<li><p>Vous devriez également éviter d’ouvrir le fichier CSV avec des applications ou autres (p.&nbsp;ex. application Moodle), ce qui peut également entraîner des erreurs.</p></li>
<li><p>Il est préférable de télécharger les fichiers CSV avec des navigateurs standard tels que Chrome ou Safari.</p></li>
</ul>
</div>
</div>
</div>
<p>Avant de continuer avec <code>dplyr</code>, regardons encore deux éléments cruciales pour la manipulation de données avec R :</p>
<ul>
<li><p>la transformation du types de variable (p.&nbsp;ex. de variables textuelles en facteurs)</p></li>
<li><p>L’opérateur <code>%&gt;%</code> (angl. “pipe”; trad. française “tuyau”)</p></li>
</ul>
</section>
<section id="la-transformation-du-type-de-variable" class="level2">
<h2 class="anchored" data-anchor-id="la-transformation-du-type-de-variable">La transformation du type de variable</h2>
<p>Lorsque l’on analyse des jeux de données, on constate parfois que toutes les variables <strong>ne sont pas enregistrées dans un format utile pour l’analyse</strong>. Parfois, par exemple, les valeurs numériques sont enregistrées sous forme de texte. Il est alors utile de les transformer dans un format numérique (par exemple avec la fonction <code>as.numeric()</code>.</p>
<p>Mais il y a aussi le cas suivant : les variables sous forme de texte ne représentent pas simplement des textes, mais certaines <strong>catégories</strong>. Dans ce cas, il est judicieux de les transformer en une variable catégorielle, c’est-à-dire un facteur, à l’aide de la fonction <code>as.factor()</code>.</p>
<p>Dans notre exemple de jeu de données <code>igposts</code>, qui contient des métriques sur les posts Instagram, nous pouvons justement constater cela. Certes, certaines variables textuelles, telles que <code>URL</code> (le lien vers le post) et <code>Description</code> (le message textuel associé au post Instagram), sont tout à fait pertinentes. D’autres, en revanche, sont des catégories. La plus évidente est la variable <code>Type</code>, qui indique si un post Instagram est une photo, une vidéo ou un album. Factorisons ci-dessous quelques-unes de ces variables catégorielles à l’aide de code :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformons les colonnes 'Account', 'User.Name' et</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 'Type' en facteurs :</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>Account <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>Account)</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>User.Name <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>User.Name)</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>Type <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>Type)</span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifier, si ça a marché :</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(igposts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   100 obs. of  12 variables:
 $ Account             : Factor w/ 38 levels "Anastasia Karanikolaou",..: 24 31 21 7 7 7 16 35 31 7 ...
 $ User.Name           : Factor w/ 38 levels "agustd","arianagrande",..: 24 30 21 7 7 7 16 35 30 7 ...
 $ Followers.at.Posting: int  434255880 381000851 26965756 545618329 548818853 551324765 44212419 56881100 390981561 547708976 ...
 $ Post.Created.Date   : chr  "27/02/2023" "22/02/2023" "07/02/2023" "09/02/2023" ...
 $ Post.Created.Time   : chr  "18:17:47" "21:32:34" "11:55:59" "16:19:37" ...
 $ Type                : Factor w/ 2 levels "Album","Photo": 1 2 1 1 2 1 2 1 1 2 ...
 $ Total.Interactions  : int  23333227 20020533 16776082 16501407 14683868 14619124 13517205 12844571 12661694 12639004 ...
 $ Likes               : int  23075849 19760862 16554530 16317762 14603158 14489506 13517204 12844571 12589553 12558961 ...
 $ Comments            : int  257378 259671 221552 183645 80710 129618 1 0 72141 80043 ...
 $ Views               : int  0 0 0 0 0 0 0 10998354 5648190 0 ...
 $ URL                 : chr  "https://www.instagram.com/p/CpLxnFlNJZn/" "https://www.instagram.com/p/Co_P7YgrrFO/" "https://www.instagram.com/p/CoXmBSLvj7A/" "https://www.instagram.com/p/CodNx8BL1-X/" ...
 $ Description         : chr  "Gracias a todos los que hicieron posible que ganara este premio. A todos los de la @afaseleccion, a mi familia "| __truncated__ "I deleted this one time because I thought maybe it was too much but eh (taking a break from social)" "“Ab humari permanent booking hogayi hai” \n\nWe seek your blessings and love on our journey ahead ❤️🙏" "Great feeling to have scored 4 goals and reaching my 500th league goal in a very solid win by the team!💪🏼\n⚽️⚽️⚽️⚽️" ...</code></pre>
</div>
</div>
<p>Nous allons voir par la suite, pourquoi ces factorisations sont utiles.</p>
</section>
<section id="lopérateur" class="level2">
<h2 class="anchored" data-anchor-id="lopérateur">L’opérateur <code>%&gt;%</code></h2>
<p>La fonction principale du pipe <code>%&gt;%</code> : construire <strong>une séquence de fonctions (“un tuyau”)</strong> qui est plus facile à comprendre et a lire dans le code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Par exemple, regardez la fonction suivante : quel est le</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co"># problème ?</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.960987</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le problème est que cette fonction est imbriquée et, à</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cause de cela, difficile à lire</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec le pipe, nous pouvons reécrire cette fonction comme</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ça et obtenir le même résultat après exécution du code :</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">log</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.960987</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Astuce">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez créer le pipe <code>%&gt;%</code> avec les raccourcis clavier suivants :</p>
<ul>
<li><p>Sur <strong>Windows</strong> : <kbd>Control</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd></p></li>
<li><p>Sur <strong>MacOS</strong> : <kbd>Command</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd></p></li>
</ul>
<p>De plus, vous pouvez aussi utiliser <code>|&gt;</code> comme opérateur pipe altérnatif (équivalent à <code>%&gt;%</code>).</p>
</div>
</div>
<p>Vous pouvez déjà constater que travailler avec des jeux de données du monde réel, tels que le jeu de données Instagram <code>igposts</code>, nécessite un travail préparatoire substantiel. Mais rassurez-vous et ne vous découragez pas, plus vous pratiquez, plus cela devient facile et, bientôt, vous serez en mesure de charger facilement des ensembles de données dans RStudio ! Par ailleurs : il est normal de rencontrer des messages d’erreur. C’est une partie essentielle du processus d’apprentissage que de les surmonter en bricolant et en jouant avec vos données et votre code R jusqu’à ce que vous puissiez le faire fonctionner.</p>
<p>Après avoir chargé notre fichier CSV dans RStudio, appliqué des transformations et notre connaissance de l’opérateur pipe, nous pouvons maintenant manipuler les données avec le package <code>dplyr</code>.</p>
</section>
<section id="manipuler-les-données-avec-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-les-données-avec-dplyr">Manipuler les données avec <code>dplyr</code></h2>
<p>Le paquet <code>dplyr</code> est basé sur une logique de <em>verbes</em> pour les différents types de manipulation de données, notamment :</p>
<ul>
<li><p>Les verbes pour manipuler les données au niveau de <strong>colonnes</strong> :</p>
<ul>
<li><p><code>select()</code> : pour extraire une ou plusieurs colonnes d’un data frame.</p></li>
<li><p><code>mutate()</code> : pour créer une ou plusieurs nouvelles colonnes dans un data frame.</p></li>
</ul></li>
<li><p>Les verbes pour manipuler les données au niveau de <strong>lignes</strong> :</p>
<ul>
<li><p><code>filter()</code> : pour filtrer les lignes d’un data frame selon un ou plusieurs critères.</p></li>
<li><p><code>arrange()</code> : pour trier les lignes d’un data frame selon un ou plusieurs critères.</p></li>
</ul></li>
<li><p>Les verbes pour <strong>résumer, compter et regrouper</strong> les données :</p>
<ul>
<li><p><code>summarize()</code> : pour réduire une ou plusieurs colonnes d’un data frame en une seule ligne, notamment pour résumer des données.</p></li>
<li><p><code>count()</code> : pour compter le nombre d’observations d’une ou plusieurs catégories dans un data frame.</p></li>
<li><p><code>group_by()</code> : pour regrouper des données d’un data frame selon une ou plusieurs catégories.</p></li>
</ul></li>
</ul>
<p>Essayons maintenant d’appliquer tout cela avec du code et les données <code>igposts</code> pour comprendre ce que ça veut dire en pratique !</p>
</section>
<section id="manipulation-de-colonnes-selectet-mutate" class="level2">
<h2 class="anchored" data-anchor-id="manipulation-de-colonnes-selectet-mutate">Manipulation de colonnes : <code>select()</code>et <code>mutate()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select() : fonction pour extraire une ou plusieurs</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="co"># colonnes d'un data frame</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Par exemple, nous pouvons extraire les quatres colonnes</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co"># suivantes d'igposts (voir comment le pipe est utilisé) :</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Type, Followers.at.Posting, Total.Interactions)</span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec les deux points dans la fonction select(), vous</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="co"># pouvez sélectionner plusieurs colonnes successives. Notez</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="co"># que cette fois-ci, nous affichons que les six premières</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="co"># lignes avec la fonction head() :</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account<span class="sc">:</span>Views) <span class="sc">%&gt;%</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Vous pouvez également créer un nouvel objet, df1, qui est</span></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="co"># essentiellement un data frame plus petit que igposts avec</span></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="co"># un sous-ensemble de variables (un tel data frame plus</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a><span class="co"># petit peut être plus utile à analyser et à afficher) :</span></span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> igposts <span class="sc">%&gt;%</span></span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Type, Followers.at.Posting, Total.Interactions,</span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a>        URL)</span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb120-30"><a href="#cb120-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-31"><a href="#cb120-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-32"><a href="#cb120-32" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate() : fonction pour créer une ou plusieurs nouvelles</span></span>
<span id="cb120-33"><a href="#cb120-33" aria-hidden="true" tabindex="-1"></a><span class="co"># colonnes dans un data frame</span></span>
<span id="cb120-34"><a href="#cb120-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-35"><a href="#cb120-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Par exemple, nous pouvons créer une nouvelle colonne qui</span></span>
<span id="cb120-36"><a href="#cb120-36" aria-hidden="true" tabindex="-1"></a><span class="co"># compte le nombre d'interactions par follower :</span></span>
<span id="cb120-37"><a href="#cb120-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-38"><a href="#cb120-38" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb120-39"><a href="#cb120-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TI_par_Follower =</span> Total.Interactions<span class="sc">/</span>Followers.at.Posting)</span>
<span id="cb120-40"><a href="#cb120-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-41"><a href="#cb120-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention, sans opérateur &lt;-, nous ne changeons pas</span></span>
<span id="cb120-42"><a href="#cb120-42" aria-hidden="true" tabindex="-1"></a><span class="co"># l'objet df1 !  Pour ce faire et sauvegarder notre</span></span>
<span id="cb120-43"><a href="#cb120-43" aria-hidden="true" tabindex="-1"></a><span class="co"># nouvelle colonne, nous pouvons écraser df1 avec une</span></span>
<span id="cb120-44"><a href="#cb120-44" aria-hidden="true" tabindex="-1"></a><span class="co"># nouvelle vérsion de df1 :</span></span>
<span id="cb120-45"><a href="#cb120-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-46"><a href="#cb120-46" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb120-47"><a href="#cb120-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">TI_par_Follower =</span> Total.Interactions<span class="sc">/</span>Followers.at.Posting)</span>
<span id="cb120-48"><a href="#cb120-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-49"><a href="#cb120-49" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="manipulation-de-lignes-avec-filter-et-arrange" class="level2">
<h2 class="anchored" data-anchor-id="manipulation-de-lignes-avec-filter-et-arrange">Manipulation de lignes avec <code>filter()</code> et <code>arrange()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter() : fonction pour filtrer les lignes selon un ou</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plusieurs critères</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour filtrer pour une valeur spécifique d'une variable,</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="co"># p.ex. les posts de Cristiano Ronaldo :</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Account <span class="sc">==</span> <span class="st">"Cristiano Ronaldo"</span>)</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour plusieurs valeurs spécifique de la même variable, p.</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ex. les posts de Ronaldo et Messi :</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Account <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cristiano Ronaldo"</span>, <span class="st">"Leo Messi"</span>))</span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour plusieurs valeurs spécifiques de variables</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a><span class="co"># différentes, p. ex. les posts de type Photo de Ronaldo :</span></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Account <span class="sc">==</span> <span class="st">"Cristiano Ronaldo"</span>, Type <span class="sc">==</span> <span class="st">"Photo"</span>)</span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrer à partir de valeurs numériques, p. ex. les posts</span></span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a><span class="co"># avec au moins 10 millions d'intéractions :</span></span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)  <span class="co"># Cette commande désactive la notation scientifique des nombres</span></span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-27"><a href="#cb121-27" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-28"><a href="#cb121-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Total.Interactions <span class="sc">&gt;=</span> <span class="fl">1e+07</span>)</span>
<span id="cb121-29"><a href="#cb121-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-30"><a href="#cb121-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrer pour les posts de Selena Gomez avec au moins 10</span></span>
<span id="cb121-31"><a href="#cb121-31" aria-hidden="true" tabindex="-1"></a><span class="co"># millions d'intéractions :</span></span>
<span id="cb121-32"><a href="#cb121-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-33"><a href="#cb121-33" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-34"><a href="#cb121-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Account <span class="sc">==</span> <span class="st">"Selena Gomez"</span>, Total.Interactions <span class="sc">&gt;=</span> <span class="fl">1e+07</span>)</span>
<span id="cb121-35"><a href="#cb121-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-36"><a href="#cb121-36" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb121-37"><a href="#cb121-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-38"><a href="#cb121-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-39"><a href="#cb121-39" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange() : fonction pour trier les lignes selon un ou</span></span>
<span id="cb121-40"><a href="#cb121-40" aria-hidden="true" tabindex="-1"></a><span class="co"># plusieurs critères</span></span>
<span id="cb121-41"><a href="#cb121-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-42"><a href="#cb121-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier des valeurs/facteurs textuelles par ordre</span></span>
<span id="cb121-43"><a href="#cb121-43" aria-hidden="true" tabindex="-1"></a><span class="co"># alphabétique :</span></span>
<span id="cb121-44"><a href="#cb121-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-45"><a href="#cb121-45" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-46"><a href="#cb121-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb121-47"><a href="#cb121-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb121-48"><a href="#cb121-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-49"><a href="#cb121-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier par le nombre d'intéractions (ordre croissant)</span></span>
<span id="cb121-50"><a href="#cb121-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-51"><a href="#cb121-51" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-52"><a href="#cb121-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Total.Interactions) <span class="sc">%&gt;%</span></span>
<span id="cb121-53"><a href="#cb121-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb121-54"><a href="#cb121-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-55"><a href="#cb121-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier par le nombre d'intéractions par follower (ordre</span></span>
<span id="cb121-56"><a href="#cb121-56" aria-hidden="true" tabindex="-1"></a><span class="co"># décroissant)</span></span>
<span id="cb121-57"><a href="#cb121-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-58"><a href="#cb121-58" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb121-59"><a href="#cb121-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(TI_par_Follower)) <span class="sc">%&gt;%</span></span>
<span id="cb121-60"><a href="#cb121-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="résumer-compter-et-regrouper-avec-summarize-count-et-group_by" class="level2">
<h2 class="anchored" data-anchor-id="résumer-compter-et-regrouper-avec-summarize-count-et-group_by">Résumer, compter et regrouper avec <code>summarize()</code>, <code>count()</code> et <code>group_by()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize() : fonction qui réduit une ou plusieurs</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co"># colonnes en une seule ligne, notamment pour résumer des</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co"># données</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous pouvons, par exemple, résumer la somme totale de</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Total.Interactions dans notre ensemble de données. Ce</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co"># nombre est assez impressionnant et constitue une</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co"># caractéristique importante de notre ensemble de données.</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">sum_TI =</span> <span class="fu">sum</span>(Total.Interactions))</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous pouvons aussi calculer les moyennes des intéractions</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a><span class="co"># et de followers de tout les comptes qui ont publié les</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a><span class="co"># posts :</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_TI =</span> <span class="fu">mean</span>(Total.Interactions), <span class="at">mean_Followers =</span> <span class="fu">mean</span>(Followers.at.Posting))</span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a><span class="co"># count() : fonction qui compte le nombre d'observations</span></span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a><span class="co"># d'une ou plusieurs catégories</span></span>
<span id="cb122-26"><a href="#cb122-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-27"><a href="#cb122-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Compter l'occurence des types de posts Instagram (Photo</span></span>
<span id="cb122-28"><a href="#cb122-28" aria-hidden="true" tabindex="-1"></a><span class="co"># et Album, dans ce cas) dans notre jeu de données :</span></span>
<span id="cb122-29"><a href="#cb122-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-30"><a href="#cb122-30" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-31"><a href="#cb122-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Type)</span>
<span id="cb122-32"><a href="#cb122-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-33"><a href="#cb122-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Compter l'occurence des différents comptes dans notre jeu</span></span>
<span id="cb122-34"><a href="#cb122-34" aria-hidden="true" tabindex="-1"></a><span class="co"># de données :</span></span>
<span id="cb122-35"><a href="#cb122-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-36"><a href="#cb122-36" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-37"><a href="#cb122-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Account)</span>
<span id="cb122-38"><a href="#cb122-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-39"><a href="#cb122-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Compter l'occurence des différents comptes dans notre jeu</span></span>
<span id="cb122-40"><a href="#cb122-40" aria-hidden="true" tabindex="-1"></a><span class="co"># de données en les triant par cette occurence de manière</span></span>
<span id="cb122-41"><a href="#cb122-41" aria-hidden="true" tabindex="-1"></a><span class="co"># décroissante (avec le paramètre arrange(-n)) :</span></span>
<span id="cb122-42"><a href="#cb122-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-43"><a href="#cb122-43" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-44"><a href="#cb122-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb122-45"><a href="#cb122-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb122-46"><a href="#cb122-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb122-47"><a href="#cb122-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-48"><a href="#cb122-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-49"><a href="#cb122-49" aria-hidden="true" tabindex="-1"></a><span class="do">###############################################################################</span></span>
<span id="cb122-50"><a href="#cb122-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-51"><a href="#cb122-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-52"><a href="#cb122-52" aria-hidden="true" tabindex="-1"></a><span class="co"># group_by() : fonction qui regroupe des données selon une</span></span>
<span id="cb122-53"><a href="#cb122-53" aria-hidden="true" tabindex="-1"></a><span class="co"># ou plusieurs catégories</span></span>
<span id="cb122-54"><a href="#cb122-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-55"><a href="#cb122-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Regroupement par type de post et comparaison du nombre</span></span>
<span id="cb122-56"><a href="#cb122-56" aria-hidden="true" tabindex="-1"></a><span class="co"># moyen d'interactions par type de post :</span></span>
<span id="cb122-57"><a href="#cb122-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-58"><a href="#cb122-58" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-59"><a href="#cb122-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Type) <span class="sc">%&gt;%</span></span>
<span id="cb122-60"><a href="#cb122-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_TI =</span> <span class="fu">mean</span>(Total.Interactions))</span>
<span id="cb122-61"><a href="#cb122-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-62"><a href="#cb122-62" aria-hidden="true" tabindex="-1"></a><span class="co"># En utilisant le paramètre n=n() dans la fonction</span></span>
<span id="cb122-63"><a href="#cb122-63" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize(), nous pouvons également compter le nombre</span></span>
<span id="cb122-64"><a href="#cb122-64" aria-hidden="true" tabindex="-1"></a><span class="co"># d'observations dans chaque catégorie :</span></span>
<span id="cb122-65"><a href="#cb122-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-66"><a href="#cb122-66" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-67"><a href="#cb122-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Type) <span class="sc">%&gt;%</span></span>
<span id="cb122-68"><a href="#cb122-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">mean_TI =</span> <span class="fu">mean</span>(Total.Interactions))</span>
<span id="cb122-69"><a href="#cb122-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-70"><a href="#cb122-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilisons plusieurs verbes dplyr pour trouver les 10</span></span>
<span id="cb122-71"><a href="#cb122-71" aria-hidden="true" tabindex="-1"></a><span class="co"># comptes qui apparaissent le plus fréquemment dans nos</span></span>
<span id="cb122-72"><a href="#cb122-72" aria-hidden="true" tabindex="-1"></a><span class="co"># ensembles de données de posts Instagram. Nous résumons</span></span>
<span id="cb122-73"><a href="#cb122-73" aria-hidden="true" tabindex="-1"></a><span class="co"># également leur nombre moyen de followers et</span></span>
<span id="cb122-74"><a href="#cb122-74" aria-hidden="true" tabindex="-1"></a><span class="co"># d'interactions.</span></span>
<span id="cb122-75"><a href="#cb122-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-76"><a href="#cb122-76" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span></span>
<span id="cb122-77"><a href="#cb122-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb122-78"><a href="#cb122-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">mean_Followers =</span> <span class="fu">mean</span>(Followers.at.Posting),</span>
<span id="cb122-79"><a href="#cb122-79" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean_TI =</span> <span class="fu">mean</span>(Total.Interactions)) <span class="sc">%&gt;%</span></span>
<span id="cb122-80"><a href="#cb122-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb122-81"><a href="#cb122-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb122-82"><a href="#cb122-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-83"><a href="#cb122-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilisons plusieurs verbes dplyr pour comparer les Likes</span></span>
<span id="cb122-84"><a href="#cb122-84" aria-hidden="true" tabindex="-1"></a><span class="co"># et Comments des posts de Ronaldo et Messi :</span></span>
<span id="cb122-85"><a href="#cb122-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-86"><a href="#cb122-86" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb122-87"><a href="#cb122-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb122-88"><a href="#cb122-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Account <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Cristiano Ronaldo"</span>, <span class="st">"Leo Messi"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb122-89"><a href="#cb122-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">mean_Followers =</span> <span class="fu">mean</span>(Followers.at.Posting),</span>
<span id="cb122-90"><a href="#cb122-90" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean_Likes =</span> <span class="fu">mean</span>(Likes), <span class="at">mean_Comments =</span> <span class="fu">mean</span>(Comments))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="devoir-pour-session-8-et-infos-questionnaire" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-8-et-infos-questionnaire">Devoir pour Session 8 et infos questionnaire</h3>
<ul>
<li>Assurez-vous que vous pouvez charger correctement le fichier de données igposts.csv dans votre session R active.</li>
<li>Nous téléchargerons désormais régulièrement des fichiers CSV avec des jeux de données, c’est pourquoi ce processus doit fonctionner sur votre ordinateur portable. (Cela s’applique également aux Problem Sets 3 et 4).</li>
<li><strong>Questionnaire</strong> : Merci à toutes et tous les étudiant-e-s qui ont rempli le questionnaire avant la date limite (31 mars 2025). Vous recevrez 2 points bonus dans le Problem Set 4. Ceux-ci seront ajoutés séparément à la fin du cours, lorsque la note finale sera déterminée.</li>
<li>Nous commencerons bientôt à évaluer les données du questionnaire dans l’exercice.</li>
<li>Si vous avez rencontré des difficultés lors des deux premiers Problem Sets, assurez-vous que vous pouvez exécuter correctement sur votre ordinateur portable tout le code R traité jusqu’à présent dans le cours et que vous comprenez bien toutes les étapes. Nous vous rappellons que tout le contenu de la page GitHub et de la page Moodle du cours est pertinent pour les Problem Sets (pas seulement ce qui a été discuté en classe).</li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-8-manipuler-les-données-ii" class="level1">
<h1>Session 8 | Manipuler les données II</h1>
<p><strong>Sujet : Manipuler les données (partie 2)</strong></p>
<p>L’objectif de la session 8 est de vous entraîner à résoudre de manière autonome des problèmes de manipulation de données à l’aide du code R et de vous préparer ainsi au Problem Set 3.</p>
<p>Les exercices suivants se composent d’une question et d’une solution modèle sous forme de code R. Notez qu’en programmation R, il y a souvent plusieurs solutions pour arriver à la réponse correcte.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Conseil">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conseil
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour un meilleur effet d’apprentissage : essayez d’abord de résoudre la question avec votre propre script R sans consulter immédiatement la solution modèle. Comparez ensuite votre propre code avec celui de la solution modèle.</p>
</div>
</div>
<section id="exercices-avec-solutions" class="level2">
<h2 class="anchored" data-anchor-id="exercices-avec-solutions">Exercices avec solutions</h2>
<section id="préparez-vous-pour-lexercice" class="level3">
<h3 class="anchored" data-anchor-id="préparez-vous-pour-lexercice">0 : Préparez-vous pour l’exercice</h3>
<ul>
<li><p>Commencez en ouvrant un nouveau script R.</p></li>
<li><p>Nommez le <code>script_session_8</code> et sauvegardez le sur votre ordinateur. (Définissez votre répértoire de travail avec <code>setwd()</code> et sauvegardez le code de la console dans le script).</p></li>
<li><p>Chargez le paquet tidyverse avec <code>library(tidyverse)</code>.</p></li>
</ul>
</section>
<section id="mtcars-i" class="level3">
<h3 class="anchored" data-anchor-id="mtcars-i">1 : mtcars I</h3>
<ul>
<li>Affichez la structure de <code>mtcars</code>avec <code>str(mtcars)</code>.</li>
<li>Sélectionnez ensuite les colonnes <code>mpg</code> et <code>cyl</code> de <code>mtcars</code> avec <code>dplyr</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-39-contents" aria-controls="callout-39" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-39" class="callout-39-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(mpg, cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="mtcars-ii" class="level3">
<h3 class="anchored" data-anchor-id="mtcars-ii">2 : mtcars II</h3>
<ul>
<li><p>Filtrez mtcars pour <code>mpg &gt;= 25</code> !</p></li>
<li><p>Combien de modèles de voitures dans <code>mtcars</code> répondent à ce critère ?</p></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-40-contents" aria-controls="callout-40" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-40" class="callout-40-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(mpg <span class="sc">&gt;=</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Six modèles de voitures ont une valeur mpg d'au moins 25</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dans mtcars.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="mtcars-iii" class="level3">
<h3 class="anchored" data-anchor-id="mtcars-iii">3 : mtcars III</h3>
<ul>
<li>Triez <code>mtcars</code> par <code>mpg</code> dans l’ordre décroissant !</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-41-contents" aria-controls="callout-41" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-41" class="callout-41-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mpg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mtcars-iv" class="level3">
<h3 class="anchored" data-anchor-id="mtcars-iv">4 : mtcars IV</h3>
<ul>
<li><p>Créez une nouvelle variable (colonne) dans mtcars, nommé <code>mpg_wt</code>, définie comme le nombre de <code>mpg</code> par unité de poids (<code>wt</code>) !</p></li>
<li><p>Sauvegardez la vérsion modifiée de <code>mtcars</code> avec l’opérateur d’affectation sous l’objet <code>mtcars_v2</code>.</p></li>
<li><p>Affichez la nouvelle colonne <code>mpg_wt</code> de <code>mtcars_v2</code> en la triant par ordre décroissant !</p></li>
<li><p>Quel modèle de voiture de <code>mtcars</code> est le plus économe en carburant par rapport à son poids ?</p></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-42-contents" aria-controls="callout-42" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-42" class="callout-42-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>mtcars_v2 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mpg_wt =</span> mpg<span class="sc">/</span>wt)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>mtcars_v2 <span class="sc">%&gt;%</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(mpg_wt) <span class="sc">%&gt;%</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mpg_wt))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       mpg_wt
Lotus Europa        20.092531
Honda Civic         18.823529
Toyota Corolla      18.474114
Fiat 128            14.727273
Fiat X1-9           14.108527
Porsche 914-2       12.149533
Datsun 710           9.827586
Toyota Corona        8.722110
Mazda RX4            8.015267
Volvo 142E           7.697842
Merc 240D            7.648903
Mazda RX4 Wag        7.304348
Merc 230             7.238095
Ferrari Dino         7.111913
Hornet 4 Drive       6.656299
Merc 280             5.581395
Hornet Sportabout    5.436047
Valiant              5.231214
Merc 280C            5.174419
Pontiac Firebird     4.993498
Ford Pantera L       4.984227
Merc 450SL           4.638070
AMC Javelin          4.425036
Dodge Challenger     4.403409
Maserati Bora        4.201681
Merc 450SE           4.029484
Merc 450SLC          4.021164
Duster 360           4.005602
Camaro Z28           3.463542
Chrysler Imperial    2.750234
Cadillac Fleetwood   1.980952
Lincoln Continental  1.917404</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le Lotus Europa est le plus économe en carburant par</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co"># rapport à son poids.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diamonds-i" class="level3">
<h3 class="anchored" data-anchor-id="diamonds-i">5 : diamonds I</h3>
<ul>
<li>Affichez encore une fois <code>str(diamonds)</code> !</li>
<li>Utilisez des verbes <code>dplyr</code>pour compter le nombre de diamants dans <code>diamonds</code>qui pèsent plus de 3 carats !</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-43-contents" aria-controls="callout-43" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-43" class="callout-43-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(carat <span class="sc">&gt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `carat &gt; 3`     n
  &lt;lgl&gt;       &lt;int&gt;
1 FALSE       53908
2 TRUE           32</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Solution alternative :</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(carat <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    32</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le critère carat &gt; 3 s'applique à 32 diamants dans</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co"># diamonds.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diamonds-ii" class="level3">
<h3 class="anchored" data-anchor-id="diamonds-ii">6 : diamonds II</h3>
<ul>
<li>Calculez le prix moyen en USD des diamants dans <code>diamonds</code> !</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-44-contents" aria-controls="callout-44" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-44" class="callout-44-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">prix_moyen =</span> <span class="fu">mean</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  prix_moyen
       &lt;dbl&gt;
1      3933.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Solution alternative (sans dplyr) :</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(diamonds<span class="sc">$</span>price)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3932.8</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="diamonds-iii" class="level3">
<h3 class="anchored" data-anchor-id="diamonds-iii">7 : diamonds III</h3>
<ul>
<li>Calculez le prix moyen en USD des diamants des différentes catégories de pureté (<code>clarity</code>) dans <code>diamonds</code> !</li>
<li>Triez le résultat par ordre décroissant des prix moyens</li>
<li>Quelle catégorie de pureté est la plus chère en moyenne dans <code>diamonds</code> ?</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-45-contents" aria-controls="callout-45" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-45" class="callout-45-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(clarity) <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">prix_moyen =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(prix_moyen))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  clarity prix_moyen
  &lt;ord&gt;        &lt;dbl&gt;
1 SI2          5063.
2 SI1          3996.
3 VS2          3925.
4 I1           3924.
5 VS1          3839.
6 VVS2         3284.
7 IF           2865.
8 VVS1         2523.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec un prix par diamant de 5063 USD en moyenne, la</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="co"># catégorie de pureté SI2 est la plus chère dans diamonds.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="mtcars-v" class="level3">
<h3 class="anchored" data-anchor-id="mtcars-v">8 : mtcars V</h3>
<ul>
<li>Regroupez mtcars par <code>gear</code>, puis, à l’aide de <code>summarize()</code>, calculez <code>n</code>, la médiane et la variance de mpg.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-46-contents" aria-controls="callout-46" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-46" class="callout-46-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(gear) <span class="sc">%&gt;%</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">median_mpg =</span> <span class="fu">median</span>(mpg), <span class="at">var_mpg =</span> <span class="fu">var</span>(mpg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
   gear     n median_mpg var_mpg
  &lt;dbl&gt; &lt;int&gt;      &lt;dbl&gt;   &lt;dbl&gt;
1     3    15       15.5    11.4
2     4    12       22.8    27.8
3     5     5       19.7    44.3</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="iris-i" class="level3">
<h3 class="anchored" data-anchor-id="iris-i">9 : iris I</h3>
<ul>
<li>Sélectionner <code>Petal.Length</code>, <code>Petal.Width</code>, et <code>Species</code> dans <code>iris</code>.</li>
<li>Ensuite, utilisez <code>mutate()</code> pour créer une nouvelle colonne, appelée <code>Petal.Surface</code>, qui est le produit de <code>Petal.Length</code> et <code>Petal.Width</code>.</li>
<li>Regroupez ensuite les données par espèce et utilisez <code>summarize()</code> pour calculer une nouvelle variable : <code>mean_Petal.Surface</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-47-contents" aria-controls="callout-47" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-47" class="callout-47-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Petal.Length, Petal.Width, Species) <span class="sc">%&gt;%</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Petal.Surface =</span> Petal.Length <span class="sc">*</span> Petal.Width) <span class="sc">%&gt;%</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_Petal.Surface =</span> <span class="fu">mean</span>(Petal.Surface))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Species    mean_Petal.Surface
  &lt;fct&gt;                   &lt;dbl&gt;
1 setosa                  0.366
2 versicolor              5.72 
3 virginica              11.3  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les iris de l'espèce virginica ont les plus grandes</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="co"># surfaces de pétales (en moyenne).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diamonds-iv" class="level3">
<h3 class="anchored" data-anchor-id="diamonds-iv">10 : diamonds IV</h3>
<ul>
<li>Utilisez les verbes de <code>dplyr</code> pour calculer la moyenne des prix en USD par carat dans <code>diamonds</code>.</li>
<li>Montrez les résultats, triés par ordre décroissant de dollars par <code>carat</code>, pour les différentes catégories de taille (<code>cut</code>).</li>
<li>Montrez aussi <code>n</code>, le nombre de diamants par catégorie de taille.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-48-contents" aria-controls="callout-48" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-48" class="callout-48-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(carat, cut, price) <span class="sc">%&gt;%</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">USD_per_carat =</span> price<span class="sc">/</span>carat) <span class="sc">%&gt;%</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(cut) <span class="sc">%&gt;%</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">mean_USD_per_carat =</span> <span class="fu">mean</span>(USD_per_carat)) <span class="sc">%&gt;%</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_USD_per_carat))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  cut           n mean_USD_per_carat
  &lt;ord&gt;     &lt;int&gt;              &lt;dbl&gt;
1 Premium   13791              4223.
2 Very Good 12082              4014.
3 Ideal     21551              3920.
4 Good       4906              3860.
5 Fair       1610              3767.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En moyenne, les diamants de la meilleure qualité de</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co"># taille (Ideal) ne sont pas les plus chers dans diamonds.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="igposts-i" class="level3">
<h3 class="anchored" data-anchor-id="igposts-i">11 : igposts I</h3>
<ul>
<li>Chargez le jeu de données <code>igposts</code>que nous avons vu pendant session
<ol start="7" type="1">
<li></li>
</ol></li>
<li>Si nécessaire, téléchargez le encore une fois depuis Moodle et sauvegardez le dans le dossier de votre ordinateur que vous avez définit comme répértoire de travail.</li>
<li>Si nécessaire, transformez encore une fois les colonnes <code>igposts$Account</code>, <code>igposts$User.Name</code>et <code>igposts$Type</code> en variables catégorielles avec <code>as.factor()</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-49-contents" aria-controls="callout-49" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-49" class="callout-49-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vous pouvez copier-coller le code que nous avons utilisé</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="co"># la dernière fois (modifiez-le pour votre ordi) :</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>igposts <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code/igposts.csv"</span>,</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">encoding =</span> <span class="st">"UTF-8"</span>, <span class="at">na.strings =</span> <span class="st">"#N/A"</span>)</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquez encore une fois les transformations de</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a><span class="co"># variables, si nécessaire :</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>Account <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>Account)</span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>User.Name <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>User.Name)</span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>igposts<span class="sc">$</span>Type <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(igposts<span class="sc">$</span>Type)</span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-15"><a href="#cb154-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérifier, si ça a marché :</span></span>
<span id="cb154-16"><a href="#cb154-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-17"><a href="#cb154-17" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(igposts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   100 obs. of  12 variables:
 $ Account             : Factor w/ 38 levels "Anastasia Karanikolaou",..: 24 31 21 7 7 7 16 35 31 7 ...
 $ User.Name           : Factor w/ 38 levels "agustd","arianagrande",..: 24 30 21 7 7 7 16 35 30 7 ...
 $ Followers.at.Posting: int  434255880 381000851 26965756 545618329 548818853 551324765 44212419 56881100 390981561 547708976 ...
 $ Post.Created.Date   : chr  "27/02/2023" "22/02/2023" "07/02/2023" "09/02/2023" ...
 $ Post.Created.Time   : chr  "18:17:47" "21:32:34" "11:55:59" "16:19:37" ...
 $ Type                : Factor w/ 2 levels "Album","Photo": 1 2 1 1 2 1 2 1 1 2 ...
 $ Total.Interactions  : int  23333227 20020533 16776082 16501407 14683868 14619124 13517205 12844571 12661694 12639004 ...
 $ Likes               : int  23075849 19760862 16554530 16317762 14603158 14489506 13517204 12844571 12589553 12558961 ...
 $ Comments            : int  257378 259671 221552 183645 80710 129618 1 0 72141 80043 ...
 $ Views               : int  0 0 0 0 0 0 0 10998354 5648190 0 ...
 $ URL                 : chr  "https://www.instagram.com/p/CpLxnFlNJZn/" "https://www.instagram.com/p/Co_P7YgrrFO/" "https://www.instagram.com/p/CoXmBSLvj7A/" "https://www.instagram.com/p/CodNx8BL1-X/" ...
 $ Description         : chr  "Gracias a todos los que hicieron posible que ganara este premio. A todos los de la @afaseleccion, a mi familia "| __truncated__ "I deleted this one time because I thought maybe it was too much but eh (taking a break from social)" "“Ab humari permanent booking hogayi hai” \n\nWe seek your blessings and love on our journey ahead ❤️🙏" "Great feeling to have scored 4 goals and reaching my 500th league goal in a very solid win by the team!💪🏼\n⚽️⚽️⚽️⚽️" ...</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="igposts-ii" class="level3">
<h3 class="anchored" data-anchor-id="igposts-ii">12 : igposts II</h3>
<ul>
<li>Utilisez <code>dplyr</code> pour trouver le nombre <code>n</code>de posts Instagram regroupés par compte des influenceurs dans <code>igposts</code>.</li>
<li>Affichez les 10 premiers par ordre décroissant de <code>n</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-50-contents" aria-controls="callout-50" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-50" class="callout-50-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   Account                n
   &lt;fct&gt;              &lt;int&gt;
 1 Cristiano Ronaldo     11
 2 SUGA of BTS 민윤기     7
 3 LISA                   6
 4 Selena Gomez           6
 5 badgalriri             5
 6 Kylie                  5
 7 Leo Messi              5
 8 J                      4
 9 RM                     4
10 jhope                  3</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="igposts-iii" class="level3">
<h3 class="anchored" data-anchor-id="igposts-iii">13 : igposts III</h3>
<ul>
<li>Utilisez <code>dplyr</code> pour calculer le nombre moyen de <code>Likes</code>, <code>Comments</code>et <code>Views</code>par compte (<code>Account</code>) des influenceurs dans <code>igposts</code>.</li>
<li>Triez-les par ordre décroissant de la moyenne des <code>Likes</code>.</li>
<li>Affichez les top 10.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-51-contents" aria-controls="callout-51" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-51" class="callout-51-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Account) <span class="sc">%&gt;%</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_Likes =</span> <span class="fu">mean</span>(Likes), <span class="at">mean_Comments =</span> <span class="fu">mean</span>(Comments),</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean_Views =</span> <span class="fu">mean</span>(Views)) <span class="sc">%&gt;%</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_Likes)) <span class="sc">%&gt;%</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   Account            mean_Likes mean_Comments mean_Views
   &lt;fct&gt;                   &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;
 1 Jin of BTS          13517204             1          0 
 2 Leo Messi           13054417.       100670.         0 
 3 V                   12844571             0   10998354 
 4 KIARA               11490980         91835          0 
 5 Selena Gomez        10497252.        84834.    941365 
 6 Jenna Ortega        10339951         39161          0 
 7 Cristiano Ronaldo   10194789.        76861.         0 
 8 badgalriri           9798696.        54598.   2154085.
 9 Georgina Rodríguez   8953008         31427          0 
10 KAROL G              8770519        116385.   5155471.</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="igposts-iv" class="level3">
<h3 class="anchored" data-anchor-id="igposts-iv">14 : igposts IV</h3>
<ul>
<li>Utilisez <code>dplyr</code> pour afficher les variables <code>Account</code>, <code>Likes</code> et <code>URL</code> des 5 posts dans <code>igposts</code> qui ont reçu le plus de <code>Likes</code>.</li>
<li>Allez voir l’URL du post avec le plus de <code>Likes</code> : De quoi s’agit-il ?</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-52-contents" aria-controls="callout-52" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-52" class="callout-52-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Likes, URL) <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Likes)) <span class="sc">%&gt;%</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Account    Likes                                      URL
1         Leo Messi 23075849 https://www.instagram.com/p/CpLxnFlNJZn/
2      Selena Gomez 19760862 https://www.instagram.com/p/Co_P7YgrrFO/
3             KIARA 16554530 https://www.instagram.com/p/CoXmBSLvj7A/
4 Cristiano Ronaldo 16317762 https://www.instagram.com/p/CodNx8BL1-X/
5 Cristiano Ronaldo 14603158 https://www.instagram.com/p/CosNn0ZN-57/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram le plus liké dans igposts est un post</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="co"># de type album de Leo Messi dans lequel il met en scène un</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co"># prix qu'il a reçu de la FIFA.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/CpLxnFlNJZn/">URL Instagram du post de Leo Messi</a></p>
</section>
<section id="igposts-v" class="level3">
<h3 class="anchored" data-anchor-id="igposts-v">15 : igposts V</h3>
<ul>
<li>Faites la même chose que dans la question 14, mais maintenant pour les <code>Comments</code> au lieu des <code>Likes</code> !</li>
<li>Allez voir l’URL du post avec le plus de <code>Comments</code> : De quoi s’agit-il ?</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-53-contents" aria-controls="callout-53" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-53" class="callout-53-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Comments, URL) <span class="sc">%&gt;%</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Comments)) <span class="sc">%&gt;%</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Account Comments                                      URL
1      Selena Gomez   259671 https://www.instagram.com/p/Co_P7YgrrFO/
2         Leo Messi   257378 https://www.instagram.com/p/CpLxnFlNJZn/
3             KIARA   221552 https://www.instagram.com/p/CoXmBSLvj7A/
4 Cristiano Ronaldo   183645 https://www.instagram.com/p/CodNx8BL1-X/
5           Shakira   180662 https://www.instagram.com/p/Co8GDELuSpG/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram ayant reçu le plus de commentaires dans</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="co"># igposts est de type photo et a été publié par Selena</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Gomez. Il la représente en train de boire un cocktail et</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="co"># de flirter avec la caméra.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/Co_P7YgrrFO/">URL du post Instagram de Selena Gomez</a></p>
</section>
<section id="igposts-vi" class="level3">
<h3 class="anchored" data-anchor-id="igposts-vi">16 : igposts VI</h3>
<ul>
<li>Faites la même chose que dans les questions 14 et 15, mais maintenant pour les <code>Views</code> (à noter : Dans Instagram, la métrique <code>Views</code>désigne les <strong>video views</strong> uniquement ) !</li>
<li>Allez voir l’URL du post avec le plus de <code>Views</code> : De quoi s’agit-il ?</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-54-contents" aria-controls="callout-54" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-54" class="callout-54-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Views, URL) <span class="sc">%&gt;%</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Views)) <span class="sc">%&gt;%</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Account    Views                                      URL
1 Kendall 51269891 https://www.instagram.com/p/CoYqX0hr1jr/
2 Kendall 49665332 https://www.instagram.com/p/CpL9r3nvNnm/
3 Zendaya 30916132 https://www.instagram.com/p/CpHHbGWunhI/
4 KAROL G 15466414 https://www.instagram.com/p/ComtUDjrPAD/
5       V 10998354 https://www.instagram.com/p/CpJn09fPvud/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram qui a reçu le plus de Views (vidéos</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="co"># vues) dans igposts est un post d'album de Kendall Jenner</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="co"># dans lequel elle partage de courtes séquences de selfie</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="co"># d'elle-même, partageant un moment intime avec ses</span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="co"># followers (le son ne semble plus fonctionner).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/CoYqX0hr1jr/">URL du post Instagram de Kendall Jenner</a></p>
</section>
<section id="igposts-vii" class="level3">
<h3 class="anchored" data-anchor-id="igposts-vii">17 : igposts VII</h3>
<ul>
<li>Utilisez dplyr pour créer une nouvelle colonne : <code>Likes_par_Follower</code> (définie comme <code>Likes</code> divisé par <code>Followers.at.Posting</code>).</li>
<li>Trouvez maintenant le post avec le plus grand nombre de <code>Likes_par_Follower</code> et naviguez jusqu’à son URL : que montre-t-il ?</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-55-contents" aria-controls="callout-55" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-55" class="callout-55-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Likes_par_Follower =</span> Likes<span class="sc">/</span>Followers.at.Posting) <span class="sc">%&gt;%</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Likes_par_Follower, URL) <span class="sc">%&gt;%</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Likes_par_Follower)) <span class="sc">%&gt;%</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Account Likes_par_Follower
1 Anastasia Karanikolaou          0.7621047
2                  KIARA          0.6139094
3                  KIARA          0.3221590
4           Noah Schnapp          0.3215489
5                  KIARA          0.3109025
                                       URL
1 https://www.instagram.com/p/CoptMRoJtUD/
2 https://www.instagram.com/p/CoXmBSLvj7A/
3 https://www.instagram.com/p/CopAGdIPIre/
4 https://www.instagram.com/p/Co2oCgzOlEr/
5 https://www.instagram.com/p/Co7takyvRw-/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram qui a reçu le plus de Likes par</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="co"># follower dans igposts est un post de type album de</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Anastasia Karanikolaou, une amie de Kylie Jenner. Les</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="co"># photos montres les deux amies sur une place de basketball</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co"># en faisant des grimaces.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/CoptMRoJtUD/">URL du post Instagram de Anastasia Karanikolaou</a></p>
</section>
<section id="igposts-viii" class="level3">
<h3 class="anchored" data-anchor-id="igposts-viii">18 : igposts VIII</h3>
<ul>
<li>Faites la même chose qu’à la question 17, mais cette fois créez la variable <code>Comments_par_Follower</code>.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-56-contents" aria-controls="callout-56" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-56" class="callout-56-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Comments_par_Follower =</span> Comments<span class="sc">/</span>Followers.at.Posting) <span class="sc">%&gt;%</span></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Comments_par_Follower, URL) <span class="sc">%&gt;%</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Comments_par_Follower)) <span class="sc">%&gt;%</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Account Comments_par_Follower                                      URL
1   KIARA           0.008216050 https://www.instagram.com/p/CoXmBSLvj7A/
2 KAROL G           0.003050207 https://www.instagram.com/p/Co8GDELuSpG/
3 Shakira           0.002187604 https://www.instagram.com/p/Co8GDELuSpG/
4    ROSÉ           0.001815361 https://www.instagram.com/p/CogZR2xSvmd/
5 KAROL G           0.001803296 https://www.instagram.com/p/CopttjOOD2z/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram qui a reçu le plus de commentaires par</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="co"># follower dans igposts est un post d'album de l'actrice</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="co"># indienne Kiara Advani avec des photos de son mariage.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/CoXmBSLvj7A/">URL du post Instagram de KIARA</a></p>
</section>
<section id="igposts-ix" class="level3">
<h3 class="anchored" data-anchor-id="igposts-ix">19 : igposts IX</h3>
<ul>
<li>Faites la même chose que dans les questions 17 et 18, mais cette fois pour <code>Views_par_Follower</code> (ne calculez cette variable que pour les posts qui ont reçu plus de 0 vues).</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-57-contents" aria-controls="callout-57" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-57" class="callout-57-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>igposts <span class="sc">%&gt;%</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Views <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Views_par_Follower =</span> Views<span class="sc">/</span>Followers.at.Posting) <span class="sc">%&gt;%</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Account, Views_par_Follower, URL) <span class="sc">%&gt;%</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Views_par_Follower)) <span class="sc">%&gt;%</span></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Account Views_par_Follower                                      URL
1 KAROL G          0.2629886 https://www.instagram.com/p/ComtUDjrPAD/
2       V          0.1933569 https://www.instagram.com/p/CpJn09fPvud/
3 Kendall          0.1856206 https://www.instagram.com/p/CoYqX0hr1jr/
4 Zendaya          0.1828481 https://www.instagram.com/p/CpHHbGWunhI/
5 Kendall          0.1790413 https://www.instagram.com/p/CpL9r3nvNnm/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le post Instagram qui a reçu le plus de views par</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="co"># follower est un album publié par la chanteuse colombienne</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Karol G. Le post montre des photos et une vidéo d'elle</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="co"># avec Rihanna.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a href="https://www.instagram.com/p/ComtUDjrPAD/">URL du post Instagram de Karol G</a></p>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-9-problem-set-3" class="level1">
<h1>Session 9 (Problem Set 3)</h1>
<p>Les résultats du <strong>Problem Set 3</strong> (bonnes réponses, échelle des notes) sont accéssibles sur la page Moodle de l’exercice.</p>
<p>Voici l’histogramme des points obtenus par n = 64 étudiant-e-s qui ont participé au Problem Set 3 le 16 et 17 avril 2025 dans trois groupes (A, B, C).</p>
<ul>
<li><p>Le nombre maximal de points était de 20, il fallait 10 pour passer le test.</p></li>
<li><p>La moyenne des points obtenus était de 13.1 (note = 4.5).</p></li>
<li><p>58 étudiant-e-s (90.6%) ont réussi Problem Set 3.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="session-10-statistiques-descriptives" class="level1">
<h1>Session 10 | Statistiques descriptives</h1>
<p><strong>Sujet : La statistique descriptive</strong></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>La <strong>statistique descriptive</strong> est généralement la première étape d’une analyse statistique. Elle aide à comprendre le jeu de données et ses caractéristiques à un niveau descriptif.</p>
<p>Il ne s’agit donc <strong>pas</strong> d’analyser des <strong>relations de cause à effet</strong> (c’est en effet le rôle de la <em>statistique inférentielle</em>).</p>
<p>Les mesures suivantes font souvent partie des statistiques descriptives (souvent appelés <em>summary statistics</em> en anglais) et sont utilisées pour une première analyse des variables de type numérique d’un jeu de données.</p>
<ul>
<li><p>La taille de l’échantillon (nombre d’observations <em>n</em>)</p></li>
<li><p>Les mesures de tendance centrale (moyenne, médiane, mode)</p></li>
<li><p>Les mesures de dispersion (étendue, variance, écart-type, kurtosis, etc.)</p></li>
<li><p>Les mesure de position (percentiles, quartiles)</p></li>
</ul>
<p>Ces mesure permettent d’obtenir une première idée de la structure d’un jeu de données. Elles permettent également d’identifier des valeurs extrêmes (angl. <em>outliers</em>) qui peuvent jouer un rôle important dans un jeu de données.</p>
<p>Des mesures concernant les <strong>variables catégorielles</strong> peuvent également faire partie d’une analyse déscriptive, notamment :</p>
<ul>
<li>La fréquence de chaque catégories (p.&nbsp;ex. combien de participant-e-s à un questionnaire sont des femmes ?)</li>
<li>La répartition des différentes catégories (p.&nbsp;ex. quel est le pourcentage de femmes dans l’échantillon ?)</li>
</ul>
</div>
</div>
<p>Dans la a mise en œuvre d’une analyse statistique, par exemple dans un travail scientifique, les statistiques descriptives sont souvent présentées sous deux formats :</p>
<ul>
<li><p>des <strong>tableaux</strong> pour les mesures telles que la taille de l’échantillon, les moyennes, etc. Souvent aussi pour différentes catégories, p.&nbsp;ex. hommes et femmes.</p></li>
<li><p>des <strong>graphiques</strong> pour la visualisation de distributions, par exemple des histogrammes, et des répartitions de variables catégorielles, par exemple par le biais de diagrammes à barres.</p></li>
</ul>
<p>Lorsque l’on veut représenter des statistiques descriptives dans R, il est souvent utile de combiner les deux paquets R <code>dplyr</code> et <code>ggplot2</code>. C’est une bonne nouvelle, car nous avons déjà examiné les principaux codes R nécessaires pour utiliser ces deux paquets dans ce cours.</p>
<p>Pour nous entraîner à nouveau, cette fois avec nos propres données, nous allons procéder ci-dessous à une analyse descriptive des réponses au questionnaire (version de 2024) !</p>
<p>Vous verrez donc par la suite comment ce que nous avons appris jusqu’à présent dans le cours peut être combiné de manière utile.</p>
<section id="analyse-des-réponses-au-questionnaire-1ère-partie-stats-déscriptives" class="level2">
<h2 class="anchored" data-anchor-id="analyse-des-réponses-au-questionnaire-1ère-partie-stats-déscriptives">Analyse des réponses au questionnaire, 1ère partie (stats déscriptives)</h2>
<p>Veuillez ouvrir un nouveau script R et charger les paquets <code>tidyverse</code> et <code>ggthemes</code>. Ensuite, vous pouvez définir votre répértoire de travaille.</p>
<p>Vous pouvez ensuite télécharger le fichier <code>reponses_socio.csv</code> depuis la page Moodle du cours (matériel de la 10ème session) et le sauvegarder dans votre répértoire de travail.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-05-01%20at%2009.09.22.png" class="img-fluid figure-img"></p>
<figcaption>Paramètres pour l’importation du fichier <code>reponses_socio.csv</code>.</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script session 10</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="co"># vous devez modifier les fonctions setwd() et read.csv()</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="co"># pour correspondre à votre ordinateur :</span></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code"</span>)</span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>reponses_socio <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code/reponses_socio.csv"</span>,</span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">encoding =</span> <span class="st">"UTF-8"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Contrôle, si ça a marché</span></span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(reponses_socio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   74 obs. of  11 variables:
 $ X         : int  1 2 3 4 5 6 7 8 9 10 ...
 $ naissance : int  2001 2001 2002 2004 2002 2001 2000 1999 1999 2001 ...
 $ genre     : Factor w/ 3 levels "Autre","Femme",..: 2 2 2 2 2 2 3 3 2 3 ...
 $ permis    : Factor w/ 3 levels "N/A","Non","Oui": 3 3 3 3 3 3 3 3 3 3 ...
 $ suisse    : Factor w/ 2 levels "Non","Oui": 2 2 2 2 1 2 2 2 2 2 ...
 $ origine   : Factor w/ 3 levels "Afrique","Amérique (Nord et Sud et Caraïbes)",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ fraterie  : int  1 1 3 2 0 0 1 1 5 1 ...
 $ domicile  : Factor w/ 9 levels "Bâle-Ville","Berne",..: 3 3 8 9 3 3 3 7 4 3 ...
 $ trajet    : num  5 35 5 45 6 40 35 5 20 35 ...
 $ note_ecole: num  5 4.5 4.7 5.1 4.6 4.9 4.2 4.8 4.5 5.1 ...
 $ note_uni  : num  5.5 5.4 4.7 4.9 5 5.5 4.4 5.3 5 4.9 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Une formidable fonction pour analyser les stats</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="co"># déscriptives : summary()</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reponses_socio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       X           naissance      genre    permis   suisse  
 Min.   : 1.00   Min.   :1986   Autre: 2   N/A: 1   Non:10  
 1st Qu.:19.25   1st Qu.:2000   Femme:56   Non:18   Oui:64  
 Median :37.50   Median :2002   Homme:16   Oui:55           
 Mean   :37.50   Mean   :2001                               
 3rd Qu.:55.75   3rd Qu.:2003                               
 Max.   :74.00   Max.   :2005                               
                                                            
                               origine      fraterie         domicile 
 Afrique                           : 1   Min.   :0.000   Fribourg:35  
 Amérique (Nord et Sud et Caraïbes): 5   1st Qu.:1.000   Vaud    :17  
 Europe                            :68   Median :1.000   Valais  : 8  
                                         Mean   :1.797   Genève  : 5  
                                         3rd Qu.:2.000   Berne   : 3  
                                         Max.   :7.000   Tessin  : 3  
                                                         (Other) : 3  
     trajet         note_ecole       note_uni    
 Min.   :  1.50   Min.   :1.000   Min.   :2.000  
 1st Qu.: 10.00   1st Qu.:4.500   1st Qu.:4.700  
 Median : 20.00   Median :4.800   Median :5.000  
 Mean   : 34.66   Mean   :4.763   Mean   :4.853  
 3rd Qu.: 56.25   3rd Qu.:5.000   3rd Qu.:5.200  
 Max.   :180.00   Max.   :6.000   Max.   :5.800  
                  NA's   :2       NA's   :1      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Abordons maintenant quelques questions plus spécifiques</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="co"># auxquelles nous pouvons répondre à l'aide de statistiques</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co"># descriptives</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Trajet pour arriver à l'université</span></span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="co"># *****************************************</span></span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="co"># histogramme très basique</span></span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> reponses_socio, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> trajet)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plus sophistiqué</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> reponses_socio, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> trajet)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>,</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Trajets en minutes des étudiant-e-s pour arriver à l'UniFR"</span>,</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Questionnaire avec n = 74 participant-e-s"</span>, <span class="at">x =</span> <span class="st">"Trajet en minutes"</span>,</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Fréquence"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. histogramme des années de naissance</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co"># *****************************************</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> reponses_socio, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> naissance)) <span class="sc">+</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"lightgreen"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Années de naissance"</span>, <span class="at">subtitle =</span> <span class="st">"n = 74 répondants à un questionnaire"</span>,</span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Année de naissance"</span>, <span class="at">y =</span> <span class="st">"Fréquence"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. diagramme à barres des genres</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co"># *****************************************</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> reponses_socio, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> genre, <span class="at">fill =</span> genre)) <span class="sc">+</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique plus sophistiquée</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="co"># changer d'abord l'ordre des catégories (commençant avec</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="co"># la plus fréquente)</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>ordre <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Femme"</span>, <span class="st">"Homme"</span>, <span class="st">"Autre"</span>)</span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Puis combiner dplyr avec ggplot2 !</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>reponses_socio <span class="sc">%&gt;%</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">genre =</span> <span class="fu">factor</span>(genre, <span class="at">levels =</span> ordre)) <span class="sc">%&gt;%</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> genre, <span class="at">fill =</span> genre)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Répartition des genres"</span>, <span class="at">subtitle =</span> <span class="st">"n = 74 répondants à un questionnaire"</span>,</span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Genre"</span>, <span class="at">y =</span> <span class="st">"Fréquence"</span>, <span class="at">legend =</span> <span class="st">""</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Moyennes des notes</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="co"># *****************************************</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(reponses_socio<span class="sc">$</span>note_ecole, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.7625</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(reponses_socio<span class="sc">$</span>note_uni, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.853425</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(reponses_socio<span class="sc">$</span>note_uni, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(reponses_socio<span class="sc">$</span>note_ecole, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>reponses_socio <span class="sc">%&gt;%</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(note_ecole, note_uni, genre) <span class="sc">%&gt;%</span></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(genre) <span class="sc">%&gt;%</span></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(note_ecole <span class="sc">&gt;</span> <span class="fl">3.99</span>, note_uni <span class="sc">&gt;</span> <span class="fl">0.99</span>) <span class="sc">%&gt;%</span></span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">note_ecole_moyenne =</span> <span class="fu">mean</span>(note_ecole),</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">note_uni_moyenne =</span> <span class="fu">mean</span>(note_uni))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  genre     n note_ecole_moyenne note_uni_moyenne
  &lt;fct&gt; &lt;int&gt;              &lt;dbl&gt;            &lt;dbl&gt;
1 Autre     2               4.5              4.75
2 Femme    53               4.90             4.88
3 Homme    16               4.59             4.84</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisation de la relation entre note_ecole et note_uni</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>reponses_socio <span class="sc">%&gt;%</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(note_ecole, note_uni) <span class="sc">%&gt;%</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(note_ecole <span class="sc">&gt;</span> <span class="fl">3.99</span>, note_uni <span class="sc">&gt;</span> <span class="fl">0.99</span>) <span class="sc">%&gt;%</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> note_uni, <span class="at">y =</span> note_ecole)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-79-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Permis de conduire</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="co"># *****************************************</span></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(reponses_socio<span class="sc">$</span>permis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
N/A Non Oui 
  1  18  55 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(reponses_socio<span class="sc">$</span>suisse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Non Oui 
 10  64 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>reponses_socio <span class="sc">%&gt;%</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(permis, suisse) <span class="sc">%&gt;%</span></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(permis <span class="sc">!=</span> <span class="st">"N/A"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(suisse, permis) <span class="sc">%&gt;%</span></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'suisse'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   suisse [2]
  suisse permis     n
  &lt;fct&gt;  &lt;fct&gt;  &lt;int&gt;
1 Non    Non        3
2 Non    Oui        7
3 Oui    Non       15
4 Oui    Oui       48</code></pre>
</div>
</div>
</section>
<section id="la-fonction-write.csv" class="level2">
<h2 class="anchored" data-anchor-id="la-fonction-write.csv">La fonction <code>write.csv()</code></h2>
<p>Avec R, vous ne pouvez pas seulement lire des données au format CSV (entrée de données ; avec des fonctions telles que <code>read.csv()</code>), mais vous pouvez également créer des fichiers CSV à partir de votre session en cours (sortie de données), notamment avec la fonction <code>write.csv()</code> !</p>
<p>La syntaxe de la fonction nécessite comme arguments le nom du data frame que vous voulez sauvegarder comme CSV ainsi que le chemin du fichier sur votre ordinateur qui inclut le nom que vous voulez donner au ficher CSV : <code>write.csv(nom_df, "chemin_du_fichier/nom_du_ficher.csv")</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voici un exemple avec du code (recréons le tableau avec</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co"># les animaux de Ice Age !)</span></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Manny"</span>, <span class="st">"Sid"</span>, <span class="st">"Diego"</span>, <span class="st">"Ellie"</span>, <span class="st">"Peaches"</span>, <span class="st">"Scrat"</span>,</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rudy"</span>, <span class="st">"Buck"</span>)</span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mammoth"</span>, <span class="st">"sloth"</span>, <span class="st">"sabertooth"</span>, <span class="st">"mammoth"</span>, <span class="st">"mammoth"</span>,</span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"squirrel"</span>, <span class="st">"dinosaur"</span>, <span class="st">"weasel"</span>)</span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-10"><a href="#cb206-10" aria-hidden="true" tabindex="-1"></a>female <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb206-11"><a href="#cb206-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-12"><a href="#cb206-12" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">20</span>, <span class="dv">35</span>, <span class="dv">25</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">100</span>, <span class="dv">28</span>)</span>
<span id="cb206-13"><a href="#cb206-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-14"><a href="#cb206-14" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">80</span>, <span class="dv">400</span>, <span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">10000</span>, <span class="dv">3</span>)</span>
<span id="cb206-15"><a href="#cb206-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-16"><a href="#cb206-16" aria-hidden="true" tabindex="-1"></a>ice_age_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(name, species, female, age, weight)</span>
<span id="cb206-17"><a href="#cb206-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-18"><a href="#cb206-18" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ice_age_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name    species female age weight
1   Manny    mammoth  FALSE  30   5000
2     Sid      sloth  FALSE  20     80
3   Diego sabertooth  FALSE  35    400
4   Ellie    mammoth   TRUE  25   4000
5 Peaches    mammoth   TRUE   7   1000
6   Scrat   squirrel  FALSE   4      1
7    Rudy   dinosaur  FALSE 100  10000
8    Buck     weasel  FALSE  28      3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maintenant, notre but est de créer un ficher CSV qui</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="co"># contient les données du data frame ice_age_df Il faut</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="co"># adapter le chemin du fichier suivant pour qu'il marche</span></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sur votre ordinateur :</span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-6"><a href="#cb208-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ice_age_df, <span class="at">file =</span> <span class="st">"/Users/domus_julian/Documents/GitHub/intro-a-R/code/ice_age_df.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si tout a bien marché, vous devrez maintenant avoir un ficher CSV, nommé <code>ice_age_df.csv</code>dans votre répértoire de travail !</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="session-11-statistiques-inférentielles-i" class="level1">
<h1>Session 11 | Statistiques inférentielles I</h1>
<p><strong>Sujet : La statistique inférentielle, Partie 1 (tests t)</strong></p>
<p>Dans cette et la prochaine session, nous allons nous concentrer sur trois méthodes de statistiques inférentielles couramment utilisées :</p>
<ul>
<li><p>Les <strong>tests t</strong> (angl. Student’s t-test)</p></li>
<li><p>l’<strong>analyse de variance</strong> (angl. <strong>ANOVA</strong> = ANalysis Of VAriance)</p></li>
<li><p>La <strong>régression linéaire</strong> (angl. linear regression).</p></li>
</ul>
<p>Mais d’abord, il faut répondre à la question suivante :</p>
<section id="cest-quoi-la-statistique-inférentielle" class="level2">
<h2 class="anchored" data-anchor-id="cest-quoi-la-statistique-inférentielle">C’est quoi la statistique inférentielle ?</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les statistiques inférentielles sont une branche des statistiques qui permet de tirer des conclusions générales sur une population entière en se basant sur l’analyse statistique d’un échantillon représentatif de cette population.</p>
</div>
</div>
<p>En sciences sociales, les statistiques inférentielles sont souvent utilisées pour démontrer des corrélations et des relations de cause à effet entre des variables. Nous voulons savoir, par exemple, si le genre (variable x) a une influence sur les notes de maturité (variable y).</p>
<p>En général, pour analyser de telles relations, nous formulons souvent des hypothèses basées sur des théories ou des suppositions tiré de la littérature d’un domaine de recherche, que nous pouvons ensuite tester sur notre échantillon. Les résultats obtenus nous permettent de confirmer ou d’infirmer nos hypothèses et de généraliser les conclusions à la population entière. Ceci nous permet de contribuer à la création de nouvelles connaissance dans notre domaine de recherche</p>
</section>
<section id="le-test-t" class="level2">
<h2 class="anchored" data-anchor-id="le-test-t">le test t</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Le test t est est un outil statistique qui permet d’évaluer les moyennes d’un ou deux échantillons à l’aide d’un test d’hypothèse. Il est aussi appelé test t de Student, car le statisticien qui l’a inventé au début du 20ème siècle, William Sealy Gosset, a publié sous le pseudonyme de “Student” (<a href="https://en.wikipedia.org/wiki/Student%27s_t-test">Wikipédia, 2024</a>).</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-61-contents" aria-controls="callout-61" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-61" class="callout-61-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Pour effectuer un test t, il y a plusieurs hypothèses qui doivent être satisfaites :</p>
<ol type="1">
<li><strong>Les données sont continues</strong></li>
<li><strong>L’échantillonnage est aléatoire</strong>
<ul>
<li>Les données de chaque échantillon ont été prélevées au hasard dans une population.</li>
</ul></li>
<li><strong>Indépendance</strong>
<ul>
<li>Les observations doivent être indépendantes les unes des autres. Cela signifie que la valeur d’une observation ne doit pas dépendre de la valeur d’une autre observation.</li>
<li>Pour les tests t à deux échantillons, les échantillons doivent être indépendants. Si les échantillons ne sont pas indépendants, un test t par paires peut être approprié.</li>
</ul></li>
<li><strong>Normalité</strong>
<ul>
<li>La variable continue étudiée doit (plus ou moins) suivre une loi normale dans chaque groupe ou échantillon.</li>
<li>Cette hypothèse peut être vérifiée à l’aide de graphiques (comme un histogramme) ou de tests statistiques (comme <a href="https://www.statology.org/shapiro-wilk-test-r/">le test de Shapiro-Wilk</a> : <code>shapiro.test()</code>).</li>
</ul></li>
<li><strong>Homogénéité des variances (homoscédasticité)</strong>
<ul>
<li>Les variances des données dans chaque groupe est similaire.</li>
<li>Cette hypothèse peut être vérifiée à l’aide <a href="https://www.datanovia.com/en/lessons/homogeneity-of-variance-test-in-r/">du test de Levene ou du test de Bartlett</a>.</li>
</ul></li>
</ol>
<p>En pratique, les tests t sont relativement robustes aux déviations de ces hypothèses, surtout si le nombre d’observations (n) de chaque échantillon est important.</p>
<p>Néanmoins, si une ou plusieurs de ces hypothèses n’est pas satisfaite, alors des alternatives au test t peuvent être utilisées, comme <a href="#0">le test de Wilcoxon-Mann-Whitney</a> (<code>wilcox.test()</code>)ou <a href="#0">le test de Kruskal-Wallis</a> (<code>kruskal.test()</code>).</p>
</div>
</div>
</div>
<p>Dans R, le test t est éffectué avec la fonction <code>test.t()</code>.</p>
<p>Il existe <strong>trois types</strong> de tests t :</p>
<ol type="1">
<li><p><strong>Le test t à un échantillon</strong> (angl. one sample t-test) : pour évaluer si la moyenne d’un seul échantillon diffère de manière significative d’une valeur connue.</p>
<ul>
<li>Par exemple, si la moyenne des notes d’un groupe de 30 lycéens, qui est de 4.9, est significativement différente de 5.0 ou non.</li>
</ul></li>
<li><p><strong>Le test t à deux échantillons indépendants</strong> (angl. two sample t-test ; aussi appelé Welch two sample t-test) : pour évaluer si les moyennes de deux échantillons indépendants diffèrent de manière significative.</p>
<ul>
<li>Par exemple, si la moyenne des notes de 30 lycéennes, qui est de 5.0, est significativement différente ou non de la moyenne des notes de 30 lycéens, qui est de 4.8.</li>
</ul></li>
<li><p><strong>Le test t pour échantillons appariés</strong> (angl. pairwise t-test) : pour comparer les moyennes de deux groupes qui sont liés ou appariés d’une certaine manière. Dans ce type de test, chaque participant est mesuré deux fois, une fois dans chaque groupe, ce qui permet de réduire les effets des variations individuelles.</p>
<ul>
<li><p>Par exemple, nous pourrions enregistrer la moyenne des notes d’une classe de 30 élèves avant et après un cours de soutien scolaire en ligne. Il y a donc deux mesures pour chaque élève. Le cours de soutien scolaire est dans ce cas un traitement.</p></li>
<li><p>(à noter : nous n’allons pas traiter ce type de test t plus en détail dans l’exercice)</p></li>
</ul></li>
</ol>
<p>Voyons maintenant des exemples avec du code !</p>
<section id="exemple-1-test-t-à-un-échantillon" class="level3">
<h3 class="anchored" data-anchor-id="exemple-1-test-t-à-un-échantillon">Exemple 1 : test t à un échantillon</h3>
<p><strong>Problème</strong> : Tester si la moyenne de QI d’un échantillon d’étudiant-e-s, qui est de 105, est différente de manière significative de la moyenne de la population, qui est de 100.</p>
<ul>
<li><p>Notre hypothèse H1 stipule qu’il y a une différence significative entre le QI des étudiant-e-s et celui de la population générale. En effet, nous assumons que le QI des étudiant-e-s est plus élevé que celui de la population.</p></li>
<li><p>L’hypothèse nulle H0 serait donc le contraire, c’est à dire que la différence n’est pas significative entre les deux groupes.</p></li>
</ul>
<p>À noter : dans le code qui suit, nous allons encore une fois utiliser la fonction <code>rnorm()</code>que nous avons vu en classe pour créer des valeurs “aléatoires” qui suivent une loi normale. Nous pouvons utiliser ces valeurs pour simuler notre problème.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Générer des données d'échantillon avec n = 25</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co"># observations hypothétiques de QI d'étudiant-e.  Nous</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co"># simulons, avec rnorm() 25 observations d'une loi normale</span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co"># avec une moyenne de 25 et un écart-type de 15</span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>scores_qi <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">25</span>, <span class="at">mean =</span> <span class="dv">105</span>, <span class="at">sd =</span> <span class="dv">15</span>)</span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-8"><a href="#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Test t à un échantillon Il faut 2 arguments dans la</span></span>
<span id="cb209-9"><a href="#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="co"># fonction t.test() : les données à tester (scores_qi) et</span></span>
<span id="cb209-10"><a href="#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="co"># la valeur à laquelle on veut comparer les données (mu =</span></span>
<span id="cb209-11"><a href="#cb209-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 100)</span></span>
<span id="cb209-12"><a href="#cb209-12" aria-hidden="true" tabindex="-1"></a>resultat_test_t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(scores_qi, <span class="at">mu =</span> <span class="dv">100</span>)</span>
<span id="cb209-13"><a href="#cb209-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultat_test_t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    One Sample t-test

data:  scores_qi
t = 1.5844, df = 24, p-value = 0.1262
alternative hypothesis: true mean is not equal to 100
95 percent confidence interval:
  98.63817 110.36192
sample estimates:
mean of x 
    104.5 </code></pre>
</div>
</div>
<p>Il s’agit maintenant d’interpréter le résultat du test t dans R.</p>
<ul>
<li><p><strong>La statistique t</strong> quantifie la différence entre les moyennes des groupes par rapport à la variabilité de l’échantillon. Le signe de la statistique t indique si la moyenne de l’échantillon est supérieure (t positif) ou inférieure (t négatif) à la moyenne de la comparaison. L’ampleur reflète combien d’erreurs standard la différence est par rapport à zéro. En général, des valeurs absolues plus élevées suggèrent des preuves plus solides contre l’hypothèse nulle, ce qui se traduit par des valeurs p plus faibles.</p></li>
<li><p><strong>df</strong> signifie “degrees of freedom”. Dans un test t, les degrés de liberté font référence au nombre de valeurs dans le calcul final d’une statistique qui sont libres de varier. Il s’agit d’une mesure de la quantité d’informations disponibles pour estimer le paramètre statistique.</p></li>
<li><p>La <strong>valeur p</strong> (angl. p-value) est la probabilité d’observer un résultat aussi extrême que celui obtenu dans l’échantillon sous l’hypothèse nulle. Elle est utilisée pour déterminer si le résultat du test est statistiquement significatif en comparant sa valeur à un seuil de signification prédéfini (habituellement 5% = 0.05). La p-value est calculée à partir de la statistique de test t et des degrés de liberté associés à l’échantillon.</p></li>
</ul>
<p>En pratique, c’est surtout la valeur p qui compte ! Dans notre cas, elle est clairement supérieure à 5% ( &gt; 0.05), ce qui nous indique que la différence du QI entre les étudiant-e-s et la population n’est PAS significative (si nous utilisons des intérvalles de confiance de 95%) !</p>
<p>Cela veut dire que <strong>nous ne pouvons PAS abondonner notre hypothèse nulle H0</strong> car il y a une forte probabilité que la différence de QI observée dans notre échantillon est le résultat d’un pure hasard. En d’autres termes, selon cet échantillon, nous ne pouvons pas conclure que le QI des étudiant-e-s et significativement plus élevé que celui de la population générale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regénérons encore une fois des données d'échantillon,</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mais cette fois-ci avec n = 50 observations</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a>scores_qi <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="at">mean =</span> <span class="dv">105</span>, <span class="at">sd =</span> <span class="dv">15</span>)</span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Test t à un échantillon</span></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a>resultat_test_t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(scores_qi, <span class="at">mu =</span> <span class="dv">100</span>)</span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultat_test_t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    One Sample t-test

data:  scores_qi
t = 2.8085, df = 49, p-value = 0.007129
alternative hypothesis: true mean is not equal to 100
95 percent confidence interval:
 101.5691 109.4630
sample estimates:
mean of x 
 105.5161 </code></pre>
</div>
</div>
<p>La valeur p est maintenant beaucoup plus petite, soit inférieure à 1% (&lt; 0.01). Cela nous indique que la différence entre le QI des étudiant-e-s et de la population est significative (si nous utilisons des intervalles de confiance de 95%) !</p>
<p>Avec un tel résultat de test t, <strong>nous pouvons rejeter l’hypothèse nulle H0</strong>, car la probabilité que les valeurs observées soient le résultat d’un pure hasard sont très faible (moins de 1%). Nous pouvont alors inférer que le QI des étudiant-e-s est significativement plus élevé que celui de la population générale.</p>
</section>
<section id="exercice-1" class="level3">
<h3 class="anchored" data-anchor-id="exercice-1">Exercice 1</h3>
<p>Selon l’étude <a href="https://doi.org/10.5167/uzh-251581">World Internet Project de l’Université de Zurich</a>, qui a évalué les données pour la Suisse, les personnes en Suisse ont passé en moyenne 5.6 heures en ligne en 2023. Chez les 20-29 ans, ce chiffre s’élève même à 7.9 heures en moyenne.</p>
<p>Réalisez un test T en utilisant ces statistiques comme suit :</p>
<ul>
<li><p>Simulez avec <code>rnorm()</code>30 valeurs pour l’utilisation d’Internet en heures par jour pour le groupe d’âge 20-29 ans (<code>mean = 7.9, sd = 2</code>).</p></li>
<li><p>Testez si la durée moyenne d’utilisation d’Internet en heures de votre échantillon simulé de 30 suisses de 20 à 29 ans se distingue significativement de la moyenne nationale (<code>mu = 5.6</code>).</p></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-62-contents" aria-controls="callout-62" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-62" class="callout-62-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Générons des données d'échantillon hypothétique avec n =</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 30 observations</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>usage_20_29 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="at">mean =</span> <span class="fl">7.9</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Test t à un échantillon</span></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a>resultat_test_t <span class="ot">&lt;-</span> <span class="fu">t.test</span>(usage_20_29, <span class="at">mu =</span> <span class="fl">5.6</span>)</span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultat_test_t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    One Sample t-test

data:  usage_20_29
t = 6.1576, df = 29, p-value = 0.000001035
alternative hypothesis: true mean is not equal to 5.6
95 percent confidence interval:
 7.073147 8.538438
sample estimates:
mean of x 
 7.805792 </code></pre>
</div>
</div>
<p>La très faible valeur p indique qu’il est extrêmement improbable que l’utilisation d’Internet des 20-29 ans ne diffère PAS significativement de la moyenne nationale.</p>
<p>Nous pouvons alors rejeter H0.</p>
<p>En d’autres termes : Nous pouvons supposer avec une très grande certitude que les 20-29 ans ont une utilisation d’Internet significativement plus élevée que la moyenne de la population en Suisse.</p>
</div>
</div>
</div>
</section>
<section id="exemple-2-test-t-à-deux-échantillons" class="level3">
<h3 class="anchored" data-anchor-id="exemple-2-test-t-à-deux-échantillons">Exemple 2 : test t à deux échantillons</h3>
<p>Utilisons encore une fois la fonction <code>rnorm()</code>, mais maintenant pour simuler deux échantillons hypothétiques :</p>
<ul>
<li><p>Un échantillon de 5 tailles de femmes suisses</p></li>
<li><p>Un échantillon de 5 tailles d’homme suisses</p></li>
</ul>
<p>Selon l’article de <a href="https://www.24heures.ch/calculateur-en-ligne-quelle-taille-faites-vous-par-rapport-aux-autres-191558705635#"><em>24 heures</em></a>, qu’on a déjà vu en classe, en Suisse, les femmes ont une taille moyenne de 164.7 cm tandis que les hommes mesurent 177.4 cm en moyenne. Dans la suite, nous supposons que les écarts-types sont de +- 5.6 cm pour les femmes et de +- 6.1 cm pour les hommes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Données exemplaires :</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>tailles_f <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="at">mean =</span> <span class="fl">177.4</span>, <span class="at">sd =</span> <span class="fl">5.6</span>)</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a>tailles_h <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5</span>, <span class="at">mean =</span> <span class="fl">164.7</span>, <span class="at">sd =</span> <span class="fl">6.1</span>)</span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Two-sample t-test</span></span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a>t_test_two_sample <span class="ot">&lt;-</span> <span class="fu">t.test</span>(tailles_f, tailles_h)</span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(t_test_two_sample)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  tailles_f and tailles_h
t = 3.7297, df = 6.8056, p-value = 0.007747
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
  5.091961 23.016717
sample estimates:
mean of x mean of y 
 178.4840  164.4297 </code></pre>
</div>
</div>
<p>Comme nos échantillons de <code>n = 5</code> sont très petit, il se peut que la différence de taille moyenne entre les suisses et les suissesses n’est pa significative si on utilise des intervalles de confiances de 95% ! Cependant, dès que nous augmentons l’échantillon simulé, par exemple à <code>n = 20</code> ou <code>n = 100</code>, le test T indique clairement que la différence de taille est significative.</p>
</section>
<section id="exercice-2" class="level3">
<h3 class="anchored" data-anchor-id="exercice-2">Exercice 2</h3>
<p>Supposons maintenant qu’un avion en provenance d’Amérique atterrisse à Genève-Cointrin. Il transporte une sélection de 24 joueuses de la Women’s NBA, la ligue professionnelle féminine de basket-ball aux États-Unis. Selon <a href="https://jokermag.com/average-height-wnba-players/">les statistiques de la WNBA</a>, ces joueuses mesurent en moyenne 184.5 cm.</p>
<p>Quelle est la probabilité que 24 hommes suisses choisis au hasard mesurent également cette taille en moyenne ? (Supposons que l’écart-type des joueuses est de 6.5 cm).</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-63-contents" aria-controls="callout-63" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-63" class="callout-63-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Générons des données pour deux échantillons hypothétique</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="co"># avec n = 24 observations chacun</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>tailles_f_WNBA <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">24</span>, <span class="at">mean =</span> <span class="fl">184.5</span>, <span class="at">sd =</span> <span class="fl">6.5</span>)</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>tailles_h <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">24</span>, <span class="at">mean =</span> <span class="fl">177.4</span>, <span class="at">sd =</span> <span class="fl">6.1</span>)</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Two-sample t-test</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a>t_test_two_sample <span class="ot">&lt;-</span> <span class="fu">t.test</span>(tailles_f_WNBA, tailles_h)</span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(t_test_two_sample)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  tailles_f_WNBA and tailles_h
t = 3.8971, df = 45.668, p-value = 0.0003162
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
  3.253468 10.207582
sample estimates:
mean of x mean of y 
 184.4436  177.7131 </code></pre>
</div>
</div>
<p>La très petite valeur p, inférieure à 1%, indique qu’il est extrêmement improbable que 24 hommes suisses tiré au hasard sont environ de même taille que 24 joueuses de la WNBA. Nous pouvons alors rejeter H0. En d’autres termes : Nous pouvons supposer avec une très grande certitude que les joueuses de la WNBA sont significativement plus grande que les hommes suisses moyens.</p>
</div>
</div>
</div>
<p>À noter : la fonction <code>t.test()</code>, comme on l’a utilisé dans ces exemples de code jusqu’à présent, utilise plusieurs paramètres par défaut, si nous ne les spécifions pas comme arguments dans la fonction. Voici quelques-un de ces paramètres, qu’on peut aussi visualiser avec <code>?t.test()</code> :</p>
<pre><code>t.test(x, y = NULL,
       alternative = c("two.sided", "less", "greater"),
       mu = 0, paired = FALSE, var.equal = FALSE,
       conf.level = 0.95, ...)</code></pre>
<p>En fonction de votre problématique et de vos données, par exemple dans un travail de bachelor, il peut être nécessaire de spécifier explicitement certains de ces paramètres. Pour ce faire, il peut être utile de lire les pages d’aide de R et de rechercher d’autres documents en ligne pertinents pour votre problématique spécifique.</p>
<ul>
<li>Un tutoriel qui approfondit le test t dans R est par exemple <a href="https://www.datacamp.com/tutorial/t-tests-r-tutorial">celui de Datacamp (2024)</a>.</li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-12-statistiques-inférentielles-ii" class="level1">
<h1>Session 12 | Statistiques inférentielles II</h1>
<p><strong>Sujet : La statistique inférentielle, Partie 2 (ANOVA et régression linéaire)</strong></p>
<section id="lanalyse-de-la-variance-anova" class="level2">
<h2 class="anchored" data-anchor-id="lanalyse-de-la-variance-anova">L’analyse de la variance (ANOVA)</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>L’analyse de la variance (abbrégée <strong>ANOVA</strong>) est un ensemble de modèles statistiques et de procédures d’estimation associées utilisés pour analyser les différences entre les moyennes. L’ANOVA a été développée par le statisticien britannique <a href="https://fr.wikipedia.org/wiki/Ronald_Aylmer_Fisher">Ronald Fisher (1890-1962)</a>.</p>
<p>L’ANOVA permet d’étudier le comportement d’une variable quantitative à expliquer en fonction d’une ou de plusieurs variables catégorielles.&nbsp;</p>
<p>Dans sa forme la plus simple, l’ANOVA fournit un test statistique permettant de déterminer si deux moyennes de population ou plus sont égales, et généralise donc le test t au-delà de deux moyennes. En d’autres termes, l’ANOVA est utilisée pour tester si les différences entre deux ou plusieurs moyennes d’une variable quantitative à expliquer sont significatives ou si elles peuvent être attribuées au hasard.</p>
<p>Le principe de l’ANOVA est basé sur la loi de la variance totale, selon laquelle la variance observée d’une variable particulière est divisée en composantes attribuables à différentes sources de variation, telles que la variation entre les groupes et la variation à l’intérieur des groupes.</p>
<p>En fonction du nombre de facteurs et du nombre de niveaux dans chaque facteur, il existe différents types d’ANOVA, tels que l’ANOVA à un facteur, l’ANOVA à deux facteurs, etc.</p>
<p>(Source : <a href="https://en.wikipedia.org/wiki/Analysis_of_variance">Wikipédia, 2024</a>).</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-65-contents" aria-controls="callout-65" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-65" class="callout-65-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Comme pour le test t, l’ANOVA nécessite certaines hypothèses concernant les données. Les observations de la variable à expliquer doivent notamment être indépendamment et identiquement distribuées (approximativement une distribution normale) et la variance entre les groupes doit être similaire (homoscédasticité).</p>
</div>
</div>
</div>
<p>Dans R, la <strong>fonction <code>aov()</code></strong> est utilisée pour effectuer des ANOVAs à un ou plusieurs facteurs.</p>
<ul>
<li><p>Elle prend en entrée une formule qui spécifie la variable réponse et les facteurs explicatifs, ainsi qu’un data frame contenant les données. Syntaxe : <code>aov(formula, data)</code></p></li>
<li><p>La fonction <code>aov()</code> renvoie un objet de classe <em>aov</em> qui contient les résultats de l’analyse de variance, y compris</p>
<ul>
<li><p>les sommes de carrés,</p></li>
<li><p>les degrés de liberté,</p></li>
<li><p>les valeurs de F et</p></li>
<li><p>les valeurs de p pour chaque effet du modèle.</p></li>
</ul></li>
</ul>
<p>En résumé, <code>aov()</code> est utilisée pour ajuster des modèles linéaires à effets fixes et pour effectuer des analyses de variance.</p>
<section id="exemple-1-anova-avec-le-jeu-de-données-palmerpenguins" class="level3">
<h3 class="anchored" data-anchor-id="exemple-1-anova-avec-le-jeu-de-données-palmerpenguins">Exemple 1 : ANOVA avec le jeu de données <code>palmerpenguins</code></h3>
<p><a href="https://allisonhorst.github.io/palmerpenguins/index.html"><img src="images/palmerpenguins.png" class="img-fluid"></a></p>
<p>Pour cet exemple, il faut télécharger le paquet R <code>palmerpenguins</code>. Celui-ci contient un jeu de données avec des informations sur trois espèces de pingouins (Adélie, Chinstrap et Gentoo) qui vivent dans l’archipel de Palmer en Antarctique.</p>
<p>Les données ont été collectées entre 2007 et 2009 et comprennent des mesures telles que la longueur du bec (<code>bill_length_mm</code>), la longueur des nageoires (<code>flipper_length_mm</code>), le poids corporel (<code>body_mass_g</code>) et le sexe des pingouins.</p>
<ul>
<li><p>Utilisez le code suivant pour la première installation du paquet : <code>install.packages("palmerpenguins")</code></p></li>
<li><p>Après l’installation, il suffit d’activer le paquet avec <code>library(palmerpenguins)</code></p></li>
<li><p>Il est toujours recommandé de comprendre un nouveau jeu de données au niveau déscriptif, utilisez donc <code>?palmerpenguins</code> et naviguez un peu sur <a href="https://allisonhorst.github.io/palmerpenguins/">le site des créatrices de ce paquet R</a> !</p></li>
<li><p>Le <strong>but de notre ANOVA</strong> est de déterminer si les différences de longueur moyenne des nageoires <code>flipper_length_mm</code> entre les trois espèces de pingouins sont statistiquement significatives.</p>
<ul>
<li><p><code>flipper_length_mm</code> est donc notre variable quantitative à expliquer et</p></li>
<li><p><code>species</code> est notre variable catégorielle qui indique à quelle espèces de pingouins (Adélie, Chinstrap et Gentoo) chaque observation de <code>flipper_length_mm</code> appartient.</p></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Explorez d'abord un peu la structure du jeu de données</span></span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [344 × 8] (S3: tbl_df/tbl/data.frame)
 $ species          : Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ island           : Factor w/ 3 levels "Biscoe","Dream",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
 $ bill_depth_mm    : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
 $ flipper_length_mm: int [1:344] 181 186 195 NA 193 190 181 195 193 190 ...
 $ body_mass_g      : int [1:344] 3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...
 $ sex              : Factor w/ 2 levels "female","male": 2 1 1 NA 1 2 1 2 NA NA ...
 $ year             : int [1:344] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisez les distributions de flipper length avec des</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="co"># boxplots</span></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> flipper_length_mm)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comme alternative, vous pouvez aussi créez un histogramme</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plus avancé pour comparer flipper length par espèce</span></span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species),</span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"darkorchid"</span>,</span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cyan4"</span>)) <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograms of flipper length by penguin species"</span>,</span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"n = 344 ; data source : palmerpenguin R package"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-86-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculs des variances de flipper length avec dplyr par</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="co"># espèce de pingouin, pour vérifier si l'hypothèse des</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="co"># variances similaire entre groupes est satisfaite :</span></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">var_fl =</span> <span class="fu">var</span>(flipper_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species   var_fl
  &lt;fct&gt;      &lt;dbl&gt;
1 Adelie      42.8
2 Chinstrap   50.9
3 Gentoo      42.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ANOVA avec aov()</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>anova_1 <span class="ot">&lt;-</span> <span class="fu">aov</span>(flipper_length_mm <span class="sc">~</span> species, <span class="at">data =</span> penguins)</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(anova_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value              Pr(&gt;F)    
species       2  52473   26237   594.8 &lt;0.0000000000000002 ***
Residuals   339  14953      44                                
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
2 observations deleted due to missingness</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># à noter, avec TukeyHSD() nous pouvons vérifier d'avantage</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="co"># les différence entre chaque paire de variables des trois</span></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="co"># groupe :</span></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="fu">TukeyHSD</span>(anova_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Tukey multiple comparisons of means
    95% family-wise confidence level

Fit: aov(formula = flipper_length_mm ~ species, data = penguins)

$species
                      diff       lwr       upr p adj
Chinstrap-Adelie  5.869887  3.586583  8.153191     0
Gentoo-Adelie    27.233349 25.334376 29.132323     0
Gentoo-Chinstrap 21.363462 19.000841 23.726084     0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous pouvons rejeter H0 avec une grande certitude !</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="la-régression-linéaire-avec-lm" class="level2">
<h2 class="anchored" data-anchor-id="la-régression-linéaire-avec-lm">La régression linéaire avec <code>lm()</code></h2>
<section id="explications-théoriques-de-la-régression-linéaire" class="level3">
<h3 class="anchored" data-anchor-id="explications-théoriques-de-la-régression-linéaire">Explications théoriques de la régression linéaire</h3>
<p>Dans le monde réel, nous supposons souvent qu’il existe des <strong>relations de cause à effet</strong>.</p>
<ul>
<li>Par exemple, nous pouvons supposer que les personnes ayant un niveau d’éducation élevé ont des salaires plus élevés. Il s’agit bien sûr d’une généralisation et il se peut qu’elle ne soit vraie qu’en moyenne (il se peut que certaines personnes ayant un très faible niveau d’éducation aient des salaires très élevés et vice versa). Néanmoins, malgré quelques exceptions à la règle, nous pouvons raisonnablement supposer qu’en moyenne, une telle relation de cause à effet entre le niveau d’éducation et le salaire existe.</li>
</ul>
<p>La question suivante est donc de savoir quelle est l’ampleur d’un tel effet et s’il est possible de le quantifier.</p>
<ul>
<li><p>Est-il possible, par exemple, de prédire une augmentation moyenne du salaire en % pour chaque année d’études supplémentaire ? Répondre à une telle question peut s’avérer compliqué pour différentes raisons.</p></li>
<li><p>Si l’éducation est importante, un certain nombre d’autres facteurs peuvent également influencer le salaire d’une personne, tels que l’âge, le sexe, l’origine, la classe sociale, l’intelligence, les capacités de communication, la résistance au stress et peut-être même la taille, l’attrait physique et l’attitude politique. Si ces autres facteurs ont également une influence sur le salaire, comment déterminer l’impact fractionnel du niveau d’éducation ?</p></li>
</ul>
<p>Un autre problème, en particulier dans la pratique, est que nombre de ces autres facteurs peuvent ne pas être disponibles ou être difficiles à mesurer.</p>
<ul>
<li>Et même si tous ces facteurs pouvaient être observés et contrôlés, la relation entre le niveau d’éducation et le salaire sera toujours soumise à un certain degré de hasard. Peut-être y a-t-il d’autres facteurs inconnus, ou peut-être y a-t-il simplement une fluctuation inexplicable du niveau de salaire entre tous les individus, même ceux qui ont des qualifications et des profils socio-économiques très similaires.</li>
</ul>
<p>Une solution possible pour quantifier néanmoins la relation de causalité entre deux variables, telles que le niveau d’éducation et le salaire des personnes, malgré ces incertitudes, est d’effectuer une <strong>analyse de régression linéaire</strong> !</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>La régression linéaire est une méthode statistique utilisée pour modéliser la relation linéaire entre une <strong>variable à expliquer (y)</strong> et une ou plusieurs <strong>variables explicatives (x1, x2, etc.)</strong>.</p>
<ul>
<li><p>La variable à expliquer, y, est parfois aussi appelée <strong>variable dépendante</strong> ou <strong>variable de réponse</strong> et, en anglais, <strong>output variable</strong>, <strong>response variable</strong>, <strong>predicted variable</strong></p></li>
<li><p>Les variables explicatives, x, quant à eux, sont aussi appelées <strong>variables indépendantes</strong> ou <strong>prédicteurs</strong> et, en anglais, <strong>input variables</strong>, <strong>predictor variables</strong>.</p></li>
</ul>
<p>Nous parlons de régression linéaire <strong>simple</strong>, si il y a seulement une variable explicative x et de régression linéaire <strong>multiple</strong> si il y a plus d’une variable explicative, p.&nbsp;ex. x1, x2, x3, etc.</p>
</div>
</div>
<p>En analyse de données, un modèle de régression a deux principaux types d’applications possibles :</p>
<ul>
<li><p><strong>Explication (causale)</strong> : Si nous supposons qu’il existe une relation causale entre y et x, nous pouvons expliquer les variations observées de y en termes de variations observées de x.</p>
<ul>
<li>Par exemple, considérons un échantillon aléatoire de données sur la taille et le poids des personnes. Nous pouvons supposer qu’en moyenne, les personnes plus grandes pèsent plus que les personnes plus petites (relation de cause à effet). Par conséquent, nous pourrions développer un modèle de régression qui explique les variations de poids (y) en termes de variations de taille (x).</li>
</ul></li>
<li><p><strong>Prédiction</strong> : Si nous disposons d’un échantillon représentatif de données contenant des observations des valeurs y et x, nous pouvons adapter un modèle de régression aux données. Par la suite, nous pouvons utiliser le modèle de régression pour un nouvel ensemble de données qui ne contient que des valeurs x et prédire les valeurs y correspondantes.</p>
<ul>
<li>Supposons par exemple que vous soyez un agent immobilier. Vous disposez d’un ensemble de données de 200 ventes de maisons dans une ville au cours des cinq derniers mois, qui contient le prix de vente (y) et la taille de la maison en mètres carrés (x). Vous pouvez maintenant adapter un modèle de régression à vos données et l’utiliser pour prédire les prix de vente attendus des maisons actuellement sur le marché en fonction de leurs superficie (x), que vous connaissez.</li>
</ul></li>
</ul>
<p>Notez qu’un modèle de régression linéaire, comme tout modèle, est toujours <strong>une simplification de la réalité</strong>. Par conséquent, la précision des modèles de régression linéaire appliqués à des données réelles ne sera jamais de 100 %, c’est-à-dire qu’elle est sujette à une erreur d’estimation.</p>
<p>Comprendre (et aussi quantifier) cette déviation du modèle de régression par rapport aux valeurs observées est également une étape importante de toute analyse de régression, comme nous le verrons par la suite.</p>
<p>Au niveau technique, l’objectif de la régression linéaire est de spécifier une équation mathématique, appelée <strong>modèle de régression</strong>, qui quantifie la relation entre les variables y et x sur la base d’un ensemble d’observations.</p>
<p>Par exemple, dans le cas d’une régression linéaire simple avec une variable x, nous utiliserions l’équation suivante :</p>
<p><span class="math display">\[
y = \beta_0 + \beta_1 x + \epsilon
\]</span> où :</p>
<ul>
<li><p><span class="math inline">\(y\)</span> est la variable à expliquer</p></li>
<li><p><span class="math inline">\(x\)</span> est la variable explicative.</p></li>
<li><p><span class="math inline">\(\beta_0\)</span> est l’ordonnée à l’origine de la droite de régression.</p></li>
<li><p><span class="math inline">\(\beta_1\)</span> est la pente de la droite de régression.</p></li>
<li><p><span class="math inline">\(\epsilon\)</span> est le terme d’erreur aléatoire</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
À noter
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si cela est trop abstrait pour certaines personnes : Nous pourrions également dire que, d’un point de vue pratique, l’objectif d’une régression linéaire simple est d’ajuster une ligne droite à un nuage de points. Le modèle de régression serait la droite de régression qui modélise la relation entre les variables y et x (les observations sous la forme d’un nuage de points).</p>
</div>
</div>
</section>
<section id="la-fonction-lm" class="level3">
<h3 class="anchored" data-anchor-id="la-fonction-lm">La fonction <code>lm()</code></h3>
<p>La fonction <strong><code>lm()</code></strong> dans R est utilisée pour ajuster un modèle de régression linéaire. Elle est couramment utilisée dans le contexte de la régression linéaire pour étudier la relation entre une variable dépendante (<code>y</code>) et une ou plusieurs variables indépendantes (<code>x1</code>, <code>x2</code>, etc.).</p>
<p>La syntaxe de base de la fonction <code>lm()</code> est la suivante : <strong><code>lm(formula, data)</code></strong>.</p>
<ul>
<li><p>L’argument <code>formula</code> désigne une formule qui décrit le modèle à ajuster. Par exemple, <code>y ~ x1 + x2</code> signifie que la variable dépendante y est modélisée en fonction des variables indépendantes x1 et x2.</p></li>
<li><p>L’argument <code>data</code> requiert l’indication du jeu de données que la régression doit utiliser en tant qu’entrée contenant les variables mentionnées dans la formule.</p></li>
</ul>
</section>
<section id="exemple-1-la-régression-linéaire-à-une-variable-avec-mtcars" class="level3">
<h3 class="anchored" data-anchor-id="exemple-1-la-régression-linéaire-à-une-variable-avec-mtcars">Exemple 1 : La régression linéaire à une variable avec <code>mtcars</code></h3>
<p>Voici un exemple d’utilisation de la fonction <code>lm()</code> avec le jeu de données <code>mtcars</code> : <code>lm(mpg ~ wt, data = mtcars)</code></p>
<ul>
<li><p>Notre but est de modéliser la relation entre la variable dépendante <code>mpg</code> (miles per gallon) et la variable indépendante <code>wt</code> (weight).</p></li>
<li><p>Notre <strong>hypothèse</strong> est qu’il existe une relation négative entre <code>wt</code> et <code>mpg</code> des véhicules dans <code>mtcars</code>. En d’autres termes, nous nous attendons à ce que les voitures plus lourdes aient tendance à parcourir moins de distance avec une unité de carburant que les voitures plus légères.</p></li>
<li><p>Nous supposons qu’il s’agit d’une <strong>relation de cause à effet</strong>, car les lois de la physique nous apprennent que l’accélération et le déplacement d’objets plus lourds nécessitent une force et une énergie plus importantes. Par conséquent, nous supposons que les voitures plus lourdes consomment généralement plus d’énergie en forme de carburant que les voitures plus légères.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Charger le jeu de données mtcars</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuster un modèle de régression linéaire avec mpg comme</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="co"># variable dépendante et wt comme variable indépendante</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a>modele_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> mtcars)</span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résumé du modèle que nous pouvons interpréter</span></span>
<span id="cb233-9"><a href="#cb233-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modele_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.5432 -2.3647 -0.1252  1.4096  6.8727 

Coefficients:
            Estimate Std. Error t value             Pr(&gt;|t|)    
(Intercept)  37.2851     1.8776  19.858 &lt; 0.0000000000000002 ***
wt           -5.3445     0.5591  -9.559       0.000000000129 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.046 on 30 degrees of freedom
Multiple R-squared:  0.7528,    Adjusted R-squared:  0.7446 
F-statistic: 91.38 on 1 and 30 DF,  p-value: 0.0000000001294</code></pre>
</div>
</div>
<p>Le résultat de la régression linéaire indique que le modèle linéaire <code>modele_1</code> prédit la variable dépendante <code>mpg</code> en fonction de la variable indépendante <code>wt</code>. Regardons le résultat plus en detail :</p>
<ul>
<li><p>Les coefficients du modèle sont présentés dans la section <em>Coefficients</em>.</p>
<ul>
<li><p>L’interception est estimée à 37,285 et le coefficient pour <code>wt</code> est estimé à -5,345. Cela signifie que pour chaque augmentation d’une unité de <code>wt</code>, la valeur prédite de <code>mpg</code> diminue de 5,345 unités en moyenne. En d’autres termes, pour chaque tranche de 1 000 livres (environ 454 kg) de plus qu’une voiture pèse, la valeur de sa consommation de carburant diminue de 5,345 miles.</p></li>
<li><p>La valeur de p (Pr(&gt;|t|)) pour le coefficient de <code>wt</code> est très faible (&lt; 0,000000000129), ce qui indique que le coefficient est significativement différent de zéro et que la variable <code>wt</code> a un effet significatif sur la variable dépendante <code>mpg</code>.</p></li>
</ul></li>
<li><p>La section <em>Residuals</em> indique les résidus minimaux, du premier quartile, de la médiane, du troisième quartile et maximaux. Ces valeurs peuvent être utilisées pour vérifier si les hypothèses du modèle sont satisfaites.</p></li>
<li><p>Le <em>Residual standard error</em> est l’écart type résiduel, qui mesure l’écart entre les valeurs prédites et les valeurs réelles de la variable dépendante. Plus cette valeur est faible, mieux le modèle s’adapte aux données. Dans ce cas, la valeur est de 3,046.</p></li>
<li><p>Le <em>Multiple R-squared</em> est le coefficient de détermination, qui mesure la proportion de la variance de la variable dépendante expliquée par la variable indépendante. Dans ce cas, le coefficient de détermination est de 0,7528, ce qui indique que la variable <code>wt</code> explique environ 75,28% de la variance de la variable <code>mpg</code>. Pour un modèle de régression ne comportant qu’une seule variable, il s’agit d’une valeur exceptionnellement élevée. Cela signifie que les variations de la consommation de carburant d’une voiture à l’autre s’expliquent dans une très large mesure par les différences de poids !</p></li>
<li><p>Le <em>Adjusted R-squared</em> est une mesure de la proportion de la variance de la variable dépendante qui est expliquée par les variables indépendantes dans un modèle de régression linéaire, tout en tenant compte du nombre de variables indépendantes dans le modèle. Il est calculé en ajustant le R-squared en fonction du nombre de variables indépendantes dans le modèle, et est toujours inférieur ou égal au R-squared. Un modèle avec un coefficient de détermination ajusté plus élevé est considéré comme un meilleur modèle, car il explique une plus grande proportion de la variance de la variable dépendante tout en utilisant un nombre raisonnable de variables indépendantes.</p></li>
<li><p>Enfin, la <em>F-statistic</em> est utilisée pour tester l’hypothèse nulle que le coefficient de régression est égal à zéro. Dans ce cas, la valeur de p associée à la statistique F est très faible (&lt; 0,0000000001294), ce qui indique que l’hypothèse nulle peut être rejetée et que le modèle est significatif.</p></li>
</ul>
<p>La vidéo YouTube suivante de StatQuest, un créateur de contenus qui explique très bien lest concepts statistiques (en anglais), décrit comment interpréter les résultats d’une regression linéaire dans R :</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/u1cc1r_Y7M0?si=TBPst3RY5jKWxIyu" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
<p><strong>Les graphiques de diagnostic</strong></p>
<p>Les graphiques de diagnostic (angl. diagnostic plots) sont des graphiques utilisés pour évaluer la qualité d’un modèle de régression linéaire et vérifier si les hypothèses du modèle sont satisfaites (p. ex. si les variables suivent approximativement une loi normale).</p>
<p>En utilisant la fonction <code>plot()</code> après avoir calculé un modèle de régression linéaire dans R, nous pouvons visualiser quatre types de plots diagnostiques :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cette commande fait en sorte que les graphes de</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="co"># diagnostic soient tous affichés en même temps, sur un</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a><span class="co"># panneau 2 X 2 :</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher ensuite les graphiques de diagnostic :</span></span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(modele_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-88-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Explications des quatre graphiques diagnostiques</strong> :</p>
<ol type="1">
<li><p><strong>Residuals vs Fitted</strong> : Ce graphique montre si les résidus (la distance entre les valeurs modélisées et observées) présentent des tendances non linéaires. Il peut y avoir une relation non linéaire entre les variables explicatives x et une variable expliquée y, et le schéma peut apparaître dans ce graphique si le modèle ne capture pas la relation non linéaire. Si vous trouvez des résidus plus ou moins uniformément répartis (approximés par la ligne rouge) autour de la ligne horizontale en pointillés sans tendances distinctes, c’est une bonne indication que vous n’avez pas de relations non linéaires.</p></li>
<li><p><strong>Q-Q Residuals</strong> : Ce graphique montre si les résidus (les points) suivent une loi normale. Les résidus se situent-ils plus ou moins sur la ligne droite diagonale en pointillés ou s’en écartent-ils fortement ? C’est une bonne chose si les résidus sont bien alignés sur la ligne droite en pointillés.</p></li>
<li><p><strong>Scale-Location</strong> : Ce graphique affiche les valeurs ajustées d’un modèle de régression sur l’axe des abscisses et la racine carrée des résidus standardisés sur l’axe des ordonnées. C’est ainsi que vous pouvez vérifier l’hypothèse de variance égale (homoscédasticité). C’est une bonne chose si vous voyez une ligne rouge plus ou moins horizontale avec des points répartis de manière égale (au hasard) autour d’elle.</p></li>
<li><p><strong>Residuals vs Leverage</strong> : Ce graphique permet d’identifier les valeurs aberrantes influentes (valeurs extrêmes) dans les données qui peuvent affecter le modèle de régression linéaire. Toutes les valeurs aberrantes ne sont pas nécessairement influentes ; certaines peuvent ne pas avoir d’impact significatif sur le modèle de régression, ce qui signifie que les résultats de l’analyse de régression restent similaires, que ces cas soient inclus ou exclus. Cependant, certaines valeurs aberrantes peuvent avoir une grande influence et modifier les résultats si elles sont exclues, car elles ne s’alignent pas sur la tendance générale. Dans ce graphique, nous nous concentrons sur les valeurs aberrantes situées dans les coins supérieurs ou inférieurs droits, en dehors des lignes pointillées, qui indiquent des scores élevés de « distance de Cook ». Ces cas ont un impact significatif sur les résultats de la régression et doivent être notés.</p></li>
</ol>
<p>En examinant ces graphiques de diagnostic, nous pouvons évaluer si les hypothèses du modèle de régression linéaire sont satisfaites, telles que l’indépendance des résidus, l’homoscédasticité, la linéarité et la normalité des résidus.</p>
<p>Si les graphiques de diagnostic montrent que les hypothèses ne sont pas satisfaites, cela peut indiquer que le modèle n’est pas adéquat et qu’une transformation des données ou une sélection de variables différente peut être nécessaire.</p>
<p>Dans le cas spécifique du modèle de régression <code>modele_1</code>, qui modélise <code>mpg ~ wt</code> dans le jeu de données <code>mtcars</code>, les graphique de diagnostic sont tout à fait acceptable.</p>
</section>
<section id="exemple-2-la-régression-linéaire-multiple-avec-mtcars" class="level3">
<h3 class="anchored" data-anchor-id="exemple-2-la-régression-linéaire-multiple-avec-mtcars">Exemple 2 : La régression linéaire multiple avec <code>mtcars</code></h3>
<p>Pouvons-nous encore améliorer <code>modele_1</code> qui prédit <code>mpg</code> dans le jeu de données mtcars ? Une possibilité évidente est d’inclure d’autres variables x, en plus de <code>wt</code>, dans notre modèle de régression pour prédire <code>mpg</code>.</p>
<p>En d’autres termes, nous devrions effectuer une régression linéaire multiple !</p>
<p>Si nous vérifions à nouveau les variables de mtcars (par exemple, avec <code>?mtcars</code>), une autre variable nous saute aux yeux qui pourrait avoir un impact sur <code>mpg</code> : la variable <code>hp</code>, qui indique la puissance brute en chevaux des voitures.</p>
<p>Nous pouvons raisonnablement supposer une relation causale : que les voitures avec plus de chevaux, c’est-à-dire avec des moteurs plus puissants, consomment plus de <code>mpg</code> que les voitures avec moins de <code>hp</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuster un modèle de régression linéaire multiple avec</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mpg comme variable dépendante et wt et hp comme variables</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="co"># indépendantes</span></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a>modele_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data =</span> mtcars)</span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résumé du modèle que nous pouvons interpréter</span></span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modele_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt + hp, data = mtcars)

Residuals:
   Min     1Q Median     3Q    Max 
-3.941 -1.600 -0.182  1.050  5.854 

Coefficients:
            Estimate Std. Error t value             Pr(&gt;|t|)    
(Intercept) 37.22727    1.59879  23.285 &lt; 0.0000000000000002 ***
wt          -3.87783    0.63273  -6.129           0.00000112 ***
hp          -0.03177    0.00903  -3.519              0.00145 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.593 on 29 degrees of freedom
Multiple R-squared:  0.8268,    Adjusted R-squared:  0.8148 
F-statistic: 69.21 on 2 and 29 DF,  p-value: 0.000000000009109</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher les graphiques de diagnostic</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(modele_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Les résultats montrent qu’en effet, la puissance en chevaux <code>hp</code> a également un effet négatif sur <code>mpg</code>. La valeur p de <code>hp</code> indique un effet significatif au niveau de 1% (mais pas au niveau de 0,1% comme pour <code>wt</code>).</p>
<p>Le R-carré de notre modèle a également augmenté pour atteindre 82,68% (R-carré ajusté à 81,48%), ce qui est une valeur très élevée. Cela signifie que <code>modele_2</code> peut effectivement expliquer une plus grande partie de la variabilité de <code>mpg</code> que <code>modele_1</code>. Néanmoins, parce qu’il utilise plus de variables, le <code>modele_2</code> est aussi plus complexe. Cela se traduit par une statistique F (69.21) plus faible pour <code>modele_2</code> que pour <code>modele_1</code> (statistique F = 91,38).</p>
<p>Une question est alors : <strong>comment choisir le meilleur modèle de regression ?</strong></p>
</section>
<section id="exemple-3-la-régression-par-étape-avec-mtcars" class="level3">
<h3 class="anchored" data-anchor-id="exemple-3-la-régression-par-étape-avec-mtcars">Exemple 3 : La régression par étape avec <code>mtcars</code></h3>
<p>Une possible solution est d’utiliser ce qu’on appelle <strong>la régression par étape</strong>. C’est une méthode d’ajustement des modèles de régression dans laquelle le choix des variables prédictives est effectué par une procédure automatique.</p>
<p>Dans R, la régression par étapes peut être effectuée à l’aide de différentes approches, notamment la fonction <code>step()</code>, qui base ses sélections sur les valeurs AIC (critère d’information d’Akaike).</p>
<ul>
<li><p>Pour notre exemple de régression par étapes, nous allons prédire <code>mpg</code> en utilisant toutes les autres variables de l’ensemble de données <code>mtcars</code>.</p></li>
<li><p>A partir de ce « modèle complet », nous utiliserons ensuite une procédure qui éliminera les variables qui ne contribuent pas de manière significative à expliquer la variation de <code>mpg</code>.</p></li>
<li><p>La procédure continuera à éliminer des variables jusqu’à ce qu’un optimum soit atteint, c’est-à-dire un modèle qui a un pouvoir explicatif suffisant (montré par sa valeur R-carré) mais qui n’est pas trop complexe (ou suradapté) avec trop de variables (ceci est décidé sur la base de la métrique AIC, <strong>qui va être minimisée</strong> par la procédure).</p></li>
<li><p>La bonne nouvelle, c’est que R produira le modèle optimal pour nous !</p></li>
</ul>
<p>Voyons comment ça marche avec du code R !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut éventuellement d'abord installer le paquet stats</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('stats')</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stats)</span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Créons le modèle complet avec toutes le variables de</span></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="co"># mtcars (avec ~ .)</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a>full_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> ., <span class="at">data =</span> mtcars)</span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(full_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ ., data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.4506 -1.6044 -0.1196  1.2193  4.6271 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept) 12.30337   18.71788   0.657   0.5181  
cyl         -0.11144    1.04502  -0.107   0.9161  
disp         0.01334    0.01786   0.747   0.4635  
hp          -0.02148    0.02177  -0.987   0.3350  
drat         0.78711    1.63537   0.481   0.6353  
wt          -3.71530    1.89441  -1.961   0.0633 .
qsec         0.82104    0.73084   1.123   0.2739  
vs           0.31776    2.10451   0.151   0.8814  
am           2.52023    2.05665   1.225   0.2340  
gear         0.65541    1.49326   0.439   0.6652  
carb        -0.19942    0.82875  -0.241   0.8122  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.65 on 21 degrees of freedom
Multiple R-squared:  0.869, Adjusted R-squared:  0.8066 
F-statistic: 13.93 on 10 and 21 DF,  p-value: 0.0000003793</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous utilisons la fonction step(), en commençant par le</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="co"># modèle complet et en permettant à la fois la sélection en</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a><span class="co"># amont et l'élimination en aval sur la base de l'AIC (avec</span></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="co"># direction = 'both')</span></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>stepwise_model <span class="ot">&lt;-</span> <span class="fu">step</span>(full_model, <span class="at">direction =</span> <span class="st">"both"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=70.9
mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb

       Df Sum of Sq    RSS    AIC
- cyl   1    0.0799 147.57 68.915
- vs    1    0.1601 147.66 68.932
- carb  1    0.4067 147.90 68.986
- gear  1    1.3531 148.85 69.190
- drat  1    1.6270 149.12 69.249
- disp  1    3.9167 151.41 69.736
- hp    1    6.8399 154.33 70.348
- qsec  1    8.8641 156.36 70.765
&lt;none&gt;              147.49 70.898
- am    1   10.5467 158.04 71.108
- wt    1   27.0144 174.51 74.280

Step:  AIC=68.92
mpg ~ disp + hp + drat + wt + qsec + vs + am + gear + carb

       Df Sum of Sq    RSS    AIC
- vs    1    0.2685 147.84 66.973
- carb  1    0.5201 148.09 67.028
- gear  1    1.8211 149.40 67.308
- drat  1    1.9826 149.56 67.342
- disp  1    3.9009 151.47 67.750
- hp    1    7.3632 154.94 68.473
&lt;none&gt;              147.57 68.915
- qsec  1   10.0933 157.67 69.032
- am    1   11.8359 159.41 69.384
+ cyl   1    0.0799 147.49 70.898
- wt    1   27.0280 174.60 72.297

Step:  AIC=66.97
mpg ~ disp + hp + drat + wt + qsec + am + gear + carb

       Df Sum of Sq    RSS    AIC
- carb  1    0.6855 148.53 65.121
- gear  1    2.1437 149.99 65.434
- drat  1    2.2139 150.06 65.449
- disp  1    3.6467 151.49 65.753
- hp    1    7.1060 154.95 66.475
&lt;none&gt;              147.84 66.973
- am    1   11.5694 159.41 67.384
- qsec  1   15.6830 163.53 68.200
+ vs    1    0.2685 147.57 68.915
+ cyl   1    0.1883 147.66 68.932
- wt    1   27.3799 175.22 70.410

Step:  AIC=65.12
mpg ~ disp + hp + drat + wt + qsec + am + gear

       Df Sum of Sq    RSS    AIC
- gear  1     1.565 150.09 63.457
- drat  1     1.932 150.46 63.535
&lt;none&gt;              148.53 65.121
- disp  1    10.110 158.64 65.229
- am    1    12.323 160.85 65.672
- hp    1    14.826 163.35 66.166
+ carb  1     0.685 147.84 66.973
+ vs    1     0.434 148.09 67.028
+ cyl   1     0.414 148.11 67.032
- qsec  1    26.408 174.94 68.358
- wt    1    69.127 217.66 75.350

Step:  AIC=63.46
mpg ~ disp + hp + drat + wt + qsec + am

       Df Sum of Sq    RSS    AIC
- drat  1     3.345 153.44 62.162
- disp  1     8.545 158.64 63.229
&lt;none&gt;              150.09 63.457
- hp    1    13.285 163.38 64.171
+ gear  1     1.565 148.53 65.121
+ cyl   1     1.003 149.09 65.242
+ vs    1     0.645 149.45 65.319
+ carb  1     0.107 149.99 65.434
- am    1    20.036 170.13 65.466
- qsec  1    25.574 175.67 66.491
- wt    1    67.572 217.66 73.351

Step:  AIC=62.16
mpg ~ disp + hp + wt + qsec + am

       Df Sum of Sq    RSS    AIC
- disp  1     6.629 160.07 61.515
&lt;none&gt;              153.44 62.162
- hp    1    12.572 166.01 62.682
+ drat  1     3.345 150.09 63.457
+ gear  1     2.977 150.46 63.535
+ cyl   1     2.447 150.99 63.648
+ vs    1     1.121 152.32 63.927
+ carb  1     0.011 153.43 64.160
- qsec  1    26.470 179.91 65.255
- am    1    32.198 185.63 66.258
- wt    1    69.043 222.48 72.051

Step:  AIC=61.52
mpg ~ hp + wt + qsec + am

       Df Sum of Sq    RSS    AIC
- hp    1     9.219 169.29 61.307
&lt;none&gt;              160.07 61.515
+ disp  1     6.629 153.44 62.162
+ carb  1     3.227 156.84 62.864
+ drat  1     1.428 158.64 63.229
- qsec  1    20.225 180.29 63.323
+ cyl   1     0.249 159.82 63.465
+ vs    1     0.249 159.82 63.466
+ gear  1     0.171 159.90 63.481
- am    1    25.993 186.06 64.331
- wt    1    78.494 238.56 72.284

Step:  AIC=61.31
mpg ~ wt + qsec + am

       Df Sum of Sq    RSS    AIC
&lt;none&gt;              169.29 61.307
+ hp    1     9.219 160.07 61.515
+ carb  1     8.036 161.25 61.751
+ disp  1     3.276 166.01 62.682
+ cyl   1     1.501 167.78 63.022
+ drat  1     1.400 167.89 63.042
+ gear  1     0.123 169.16 63.284
+ vs    1     0.000 169.29 63.307
- am    1    26.178 195.46 63.908
- qsec  1   109.034 278.32 75.217
- wt    1   183.347 352.63 82.790</code></pre>
</div>
</div>
<p>Voici comment la régression par étape choisit le meilleur modèle :</p>
<ul>
<li><strong>AIC le plus faible</strong> : le modèle ayant l’AIC le plus faible est généralement préféré car il suggère un meilleur ajustement du modèle compte tenu du nombre de variables explicatives utilisées. L’AIC permet d’équilibrer l’adéquation et la complexité du modèle. Dans notre exemple, le modèle optimal retenu est donc <code>mpg ~ wt + qsec + am</code>.</li>
</ul>
<p>Après avoir exécuté la régression par étape, le résumé de <code>stepwise_model</code> affiche les coefficients pour chaque variable explicative ainsi que des statistiques telles que le R-carré, la statistique F et les valeurs p pour les variables explicatives.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stepwise_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt + qsec + am, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.4811 -1.5555 -0.7257  1.4110  4.6610 

Coefficients:
            Estimate Std. Error t value   Pr(&gt;|t|)    
(Intercept)   9.6178     6.9596   1.382   0.177915    
wt           -3.9165     0.7112  -5.507 0.00000695 ***
qsec          1.2259     0.2887   4.247   0.000216 ***
am            2.9358     1.4109   2.081   0.046716 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.459 on 28 degrees of freedom
Multiple R-squared:  0.8497,    Adjusted R-squared:  0.8336 
F-statistic: 52.75 on 3 and 28 DF,  p-value: 0.0000000000121</code></pre>
</div>
</div>
<p><strong>Graphiques de diagnostic</strong> : Après avoir choisi un modèle, il est utile de vérifier les graphiques des résidus pour valider les hypothèses d’homoscédasticité, de normalité et d’indépendance des résidus :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stepwise_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Les graphiques de diagnostic sont acceptable pour notre modèle !</p>
</section>
<section id="ressources-pour-aller-plus-loin" class="level3">
<h3 class="anchored" data-anchor-id="ressources-pour-aller-plus-loin">Ressources pour aller plus loin</h3>
<p>Je vous recommande de jeter un coup d’œil à d’autres vidéos YouTube de StatQuest qui expliquent clairement les concepts statistiques, dont beaucoup sont très pertinents pour les sciences sociales et pour vos études en général, p.&nbsp;ex. :</p>
<ul>
<li><a href="https://youtu.be/nk2CQITm_eo?si=rtNUDxVBeq6D7xkr">Linear Regression, Clearly Explained!!!</a></li>
<li><a href="https://youtu.be/mno47Jn4gaU?si=PDMYDHu1ANTV70V2">Multiple Regression in R, Step-by-Step!!!</a></li>
<li><a href="https://youtu.be/rzFX5NWojp0?si=A10LmX2WJ1mbN46c">The Normal Distribution, Clearly Explained!!!</a></li>
<li><a href="https://youtu.be/vemZtEM63GY?si=SO9AOuuRMhDch-yk">p-values: What they are and how to interpret them</a></li>
<li><a href="https://youtu.be/2AQKmw14mHM?si=gN5HL80pFAi_R0CM">R-squared, Clearly Explained!!!</a></li>
<li><a href="https://youtu.be/0oc49DyA3hU?si=gH4KNuhTOYtnGoZU">Hypothesis Testing and The Null Hypothesis, Clearly Explained!!!</a></li>
<li><a href="https://youtu.be/C4N3_XJJ-jU?si=2MPycgEfuUTQMaRa">Logistic Regression in R, Clearly Explained!!!</a></li>
</ul>
</section>
<section id="devoir-pour-session-13-problem-set-4-et-infos-sur-la-session-14" class="level3">
<h3 class="anchored" data-anchor-id="devoir-pour-session-13-problem-set-4-et-infos-sur-la-session-14">Devoir pour Session 13 (Problem Set 4) et infos sur la session 14</h3>
<ul>
<li>La semaine prochaine, les 22 et 23 mai, <strong>le Problem Set 4</strong> aura lieu pendant la session 13. Son contenu sera axé sur les statistiques descriptives et inférentielles (contenu des sessions 10, 11 et 12).</li>
<li>Attention, <strong>la session 14 du 29 et 30 mai 2024 sera une session en auto-apprentissage !</strong> Il n’y a donc pas d’enseignement en classe à Fribourg.La session 14 vous fournira surtout des ressources R plus avancées que vous pourrez utiliser plus tard, par exemple pendant votre travail de bachelor, pour vos analyses empiriques.</li>
</ul>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="session-13-problem-set-4" class="level1">
<h1>Session 13 (Problem Set 4)</h1>
<p>Les résultats du <strong>Problem Set 4</strong> (bonnes réponses, échelle des notes) sont accéssibles sur la page Moodle de l’exercice.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Important">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Spécificité du Problem Set 4</strong> : les étudiant-e-s qui ont répondu dans les temps au questionnaire sur l’utilisation des médias se voient attribuer 2 points bonus supplémentaires à leur score dans le Problem Set 4. Ces 2 points bonus, obtenus par une majorité d’étudiant-e-s, sont pris en compte pour le calcul final de la note du cours (ils ne sont toutefois pas comptabilisés dans l’histogramme ci-dessous).</p>
</div>
</div>
<p>Voici l’histogramme des points obtenus par n = 71 étudiant-e-s qui ont participé au Problem Set 4.</p>
<ul>
<li><p>Le nombre maximal de points était de 20, il fallait 10 pour passer le test.</p></li>
<li><p>La moyenne des points obtenus était de 11.</p></li>
<li><p>47 étudiant-e-s (66%) ont réussi Problem Set 4.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="session-14-en-auto-apprentissage" class="level1">
<h1>Session 14 (en auto-apprentissage)</h1>
<p><strong>Continuez à améliorer votre maîtrise de R en sciences de la communication</strong></p>
<p>Voici des étapes clés pour devenir un·e utilisateur·trice avancé·e de R.</p>
<section id="pratique-régulière" class="level3">
<h3 class="anchored" data-anchor-id="pratique-régulière">Pratique régulière</h3>
<ul>
<li><p>Il est essentiel de pratiquer régulièrement pour devenir plus à l’aise avec R.</p></li>
<li><p>Intégrez l’utilisation de R dans vos projets académiques et personnels autant que possible.</p></li>
</ul>
</section>
<section id="application-académique" class="level3">
<h3 class="anchored" data-anchor-id="application-académique">Application académique</h3>
<ul>
<li><p>Demandez aux enseignant-e-s d’autres cours si vous pouvez utiliser R dans leurs cours.</p></li>
<li><p>Proposez d’utiliser R pour l’analyse de données dans vos travaux de séminaire et de Bachelor.</p></li>
<li><p>Collaborez avec d’autres étudiant-e-s utilisateurs·trices de R sur des projets de recherche en groupe à l’université.</p></li>
</ul>
</section>
<section id="mooc" class="level3">
<h3 class="anchored" data-anchor-id="mooc">MOOC</h3>
<p>Pour répéter et approfondir vos connaissances en R, des <strong>MOOC</strong> (massive open online courses) sont disponibles gratuitement en tant qu’auditeur/auditrice (après inscription) :</p>
<ol type="1">
<li><p><strong>Datacamp</strong>: Introduction to R (4h):&nbsp;<a href="https://www.datacamp.com/courses/free-introduction-to-r" class="uri">https://www.datacamp.com/courses/free-introduction-to-r</a></p></li>
<li><p><strong>Edx (Harvard)</strong>: R Basics (8-16h):&nbsp;<a href="https://www.edx.org/course/data-science-r-basics" class="uri">https://www.edx.org/course/data-science-r-basics</a></p></li>
<li><p><strong>Edx (Stanford)</strong>: R Programming Fundamentals (12-18h):&nbsp;<a href="https://www.edx.org/course/r-programming-fundamentals" class="uri">https://www.edx.org/course/r-programming-fundamentals</a></p></li>
<li><p><strong>Coursera</strong>: Data Analysis with R Programming (37h):&nbsp;<a href="https://www.coursera.org/learn/data-analysis-r" class="uri">https://www.coursera.org/learn/data-analysis-r</a></p></li>
<li><p><strong>Udacity</strong>: Data Analysis with R (2 months):&nbsp;<a href="https://www.udacity.com/course/data-analysis-with-r--ud651" class="uri">https://www.udacity.com/course/data-analysis-with-r--ud651</a></p></li>
</ol>
<p>Si vous payez entre 50 et 200 USD, il est également possible de valider de tels MOOC avec un certificat. Ces certificats peuvent notamment être reliés à LinkedIn et y être affichés.</p>
</section>
<section id="tutoriels-sur-youtube" class="level3">
<h3 class="anchored" data-anchor-id="tutoriels-sur-youtube">Tutoriels sur Youtube</h3>
<p>Il existe également de nombreux tutoriels R sur Youtube. Il peut s’agir de cours R complets de différents niveaux ou de courtes vidéos montrant comment utiliser une technique R particulière (par ex. un certain type de visualisation).</p>
<ol type="1">
<li><p><strong>Introduction à R et RStudio (ft. mon chat radioactif) :</strong> Tutoriel facile à comprendre en français d’environ 1h par le chercheur belge Nathan Uyttendaele (Il aborde certains aspects et logiciels que nous ne traitons pas dans notre cours. Mais dans l’ensemble, c’est une bonne introduction à R et RStudio pour les débutants) :&nbsp;<a href="https://www.youtube.com/watch?v=sav3Mbe0_DM" class="uri">https://www.youtube.com/watch?v=sav3Mbe0_DM</a></p></li>
<li><p><strong>Introduction to R &amp; RStudio and other videos on Data Analysis with R</strong>&nbsp;by Wouter van Atteveldt (computational communication scientist, VU Amsterdam) :&nbsp;<a href="https://www.youtube.com/watch?v=PVhZD5MINYM&amp;list=PLjXODJ_lGN_V2ntvV2CN_GvzZ6Qm5km9L" class="uri">https://www.youtube.com/watch?v=PVhZD5MINYM&amp;list=PLjXODJ_lGN_V2ntvV2CN_GvzZ6Qm5km9L</a></p></li>
<li><p><strong>Boot Camp of the Summer Institute in Computational Social Science</strong>, SICSS, taught by Chris Bail from Duke University (multiple videos, social science focus) :&nbsp;<a href="https://sicss.io/boot_camp/" class="uri">https://sicss.io/boot_camp/</a></p></li>
<li><p><strong>R Programming Tutorial: Learn the basics of statistical computing</strong>&nbsp;(by Barton Poulson, 2h comprehensive general R introduction) :&nbsp;<a href="https://www.youtube.com/watch?v=_V8eKsto3Ug" class="uri">https://www.youtube.com/watch?v=_V8eKsto3Ug</a></p></li>
</ol>
</section>
<section id="intelligence-artificielle-pour-coder" class="level3">
<h3 class="anchored" data-anchor-id="intelligence-artificielle-pour-coder">Intelligence artificielle pour coder</h3>
<p>Utiliser l’intelligence artificielle générative pour coder. Jouez avec, demandez simplement du code R pour faire certaines choses. Ces interfaces peuvent vous fournir du code prêt à l’emploi, que vous pouvez copier et coller directement dans RStudio !</p>
<ul>
<li><p><a href="https://chatgpt.com">ChatGPT</a></p></li>
<li><p><a href="https://chat.mistral.ai/chat">Le Chat de Mistral</a></p></li>
</ul>
</section>
<section id="communautés-en-ligne" class="level3">
<h3 class="anchored" data-anchor-id="communautés-en-ligne">Communautés en Ligne</h3>
<p>Participez à des communautés en ligne pour rester connecté·e avec les dernières tendances et partager vos connaissances :</p>
<ul>
<li><a href="https://github.com">GitHub</a> : Le réseau social des développeurs</li>
<li><a href="https://stackoverflow.com">Stackoverflow</a> : Un forum d’entraide pour programmeurs</li>
<li><a href="https://www.kaggle.com">Kaggle</a> : Une plateforme pour le machine learning et l’analyse de données</li>
</ul>
</section>
<section id="lecture-spécialisée" class="level3">
<h3 class="anchored" data-anchor-id="lecture-spécialisée">Lecture spécialisée</h3>
<p>Approfondissez vos connaissances en R avec des livres numérique open-source :</p>
<ul>
<li><p><strong>R for Data Science</strong> [anglais] Une référence bien établie en sciences des données avec R par Wickham &amp; Grolemund (2023, 2e éd.) : <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz/</a></p></li>
<li><p><strong>R Cookbook</strong> [anglais] Référence établie pour l’introduction, les statistiques et les graphiques avec R par Long &amp; Teetor (2019, 2e éd.) :&nbsp;<a href="https://rc2e.com/" class="uri">https://rc2e.com/</a></p></li>
<li><p><strong>R Graphics Cookbook</strong> [anglais] Ouvrage de référence pour concevoir des graphiques attrayants avec R&nbsp;(2022, 2e éd.), by Chang :&nbsp;<a href="https://r-graphics.org/" class="uri">https://r-graphics.org/</a></p></li>
<li><p><strong>Introduction à la programmation R</strong>&nbsp;par Goulet (2016, 5e éd.) de l’Université Laval&nbsp;:&nbsp;<a href="https://cran.r-project.org/doc/contrib/Goulet_introduction_programmation_R.pdf" class="uri">https://cran.r-project.org/doc/contrib/Goulet_introduction_programmation_R.pdf</a></p></li>
</ul>
</section>
<section id="valorisation-des-compétences" class="level3">
<h3 class="anchored" data-anchor-id="valorisation-des-compétences">Valorisation des Compétences</h3>
<ul>
<li>Mettez en avant vos compétences en programmation R dans votre CV et sur LinkedIn, notamment les certificats obtenus via des MOOCs.</li>
</ul>
<p>Ces conseils vous aideront à utiliser efficacement R dans le domaine des sciences de la communication et à développer une expertise approfondie.</p>
</section>
<section id="au-revoir-et-à-bientôt" class="level3">
<h3 class="anchored" data-anchor-id="au-revoir-et-à-bientôt">Au revoir et à bientôt</h3>
<p>Ainsi se termine ce cours et donc l’introduction à R dans le cadre des Exercices Méthodes II du <a href="https://www.unifr.ch/dcm/fr/etudes/bachelor/bachelor-fr-communication-medias/">Bachelor en sciences de la communication à l’Université de Fribourg</a> !</p>
<p>J’espère que vous avez appris beaucoup de choses, notamment des techniquesqui vous seront utiles pour la suite de vos études ! 💪 😎</p>
<p>Et n’oubliez pas qu’au final, il faut surtout faire preuve de bon sens pour comprendre comment des compétences comme la programmation R peuvent être utilisées au mieux pour étudier des phénomènes intéressants en sciences de la communication ! 😄</p>
<p><em>Julian Maitra, Fribourg, 30 mai 2024.</em></p>
<p><strong>FIN DU COURS</strong></p>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div>MIT</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>